{
  "openapi": "3.1.0",
  "info": {
    "title": "OCXP - Open Context Exchange Protocol",
    "description": "Unified context API with auto-generated OpenAPI",
    "version": "2.0.0"
  },
  "paths": {
    "/ocxp/{content_type}/bulk/read": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Read Content",
        "description": "Bulk read content.",
        "operationId": "bulkReadContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkReadRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkReadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/{content_type}/bulk/write": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Write Content",
        "description": "Bulk write content.",
        "operationId": "bulkWriteContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkWriteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkWriteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/{content_type}/bulk/delete": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Delete Content",
        "description": "Bulk delete content.",
        "operationId": "bulkDeleteContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkDeleteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session": {
      "get": {
        "tags": [
          "Session"
        ],
        "summary": "List all sessions",
        "description": "Returns sessions for the workspace filtered by status. Ordered by most recently updated.",
        "operationId": "listSessions",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of sessions to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum number of sessions to return"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Filter by status: active, archived",
              "default": "active",
              "title": "Status"
            },
            "description": "Filter by status: active, archived"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of sessions returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Create session",
        "description": "Creates a new session linked to a mission in DynamoDB. Used by Brain to establish session-mission relationship.",
        "operationId": "createSession",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSessionRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Session created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionResponse"
                }
              }
            }
          },
          "409": {
            "description": "Session already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/messages": {
      "get": {
        "tags": [
          "Session"
        ],
        "summary": "Get session messages",
        "description": "Loads message history for a session from S3 storage.",
        "operationId": "getSessionMessages",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum number of messages to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of messages to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Messages returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionMessagesResponse"
                }
              }
            }
          },
          "404": {
            "description": "Session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/metadata": {
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Update session metadata",
        "description": "Updates session title and message count. Creates session if it does not exist.",
        "operationId": "updateSessionMetadata",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SessionMetadataUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session metadata updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/fork": {
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Fork session",
        "description": "Creates a new session branched from an existing one at a specified message point.",
        "operationId": "forkSession",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForkRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Session forked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionForkResponse"
                }
              }
            }
          },
          "404": {
            "description": "Parent session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/archive": {
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Archive session",
        "description": "Soft deletes a session by changing its status to archived.",
        "operationId": "archiveSession",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session archived successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "List all projects",
        "description": "Returns all projects in the workspace with their linked repos and missions.",
        "operationId": "listProjects",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of projects to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of projects to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of projects returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Create a new project",
        "description": "Creates a project with auto-generated UUID. Projects link repos, missions, and sessions for context scoping.",
        "operationId": "createProject",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Project created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/list": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "List all projects (alias)",
        "description": "Alias for GET /ocxp/project. Returns all projects in the workspace.",
        "operationId": "listProjectsAlias",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of projects to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of projects to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of projects returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get project details",
        "description": "Returns full project details including linked repos, missions, and metadata.",
        "operationId": "getProject",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Project found and returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Project"
        ],
        "summary": "Update project",
        "description": "Updates project name and/or description. Only provided fields are updated.",
        "operationId": "updateProject",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Project updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Delete project",
        "description": "Permanently deletes a project and its metadata. Linked repos are not deleted.",
        "operationId": "deleteProject",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Project deleted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/repos": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Link repository to project",
        "description": "Links a repository to the project with category, priority, and auto-include settings for KB queries.",
        "operationId": "addLinkedRepo",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddRepoRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Repository linked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/repos/{repo_id}": {
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Unlink repository from project",
        "description": "Removes a repository link from the project. The repository itself is not deleted.",
        "operationId": "removeLinkedRepo",
        "parameters": [
          {
            "name": "repo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Repo Id"
            }
          },
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Repository unlinked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/default-repo": {
      "put": {
        "tags": [
          "Project"
        ],
        "summary": "Set default repository",
        "description": "Sets the default repository for the project. Used for integration and primary context.",
        "operationId": "setDefaultRepo",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetDefaultRepoRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Default repository set successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/context-repos": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get context repositories",
        "description": "Returns all repositories marked for auto-include in KB queries.",
        "operationId": "getContextRepos",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Context repositories returned",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/missions": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Add mission to project",
        "description": "Associates a mission with the project for context grouping.",
        "operationId": "addMission",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddMissionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mission added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/missions/{mission_id}": {
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Remove mission from project",
        "description": "Removes the mission association from the project. The mission itself is not deleted.",
        "operationId": "removeMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mission removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/databases": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Link database to project",
        "description": "Links a database configuration to the project for agent context.",
        "operationId": "addDatabase",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddDatabaseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Database linked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get project databases",
        "description": "Returns all databases linked to the project.",
        "operationId": "getProjectDatabases",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database list returned",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/databases/{database_id}": {
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Unlink database from project",
        "description": "Removes a database link from the project. The database config is not deleted.",
        "operationId": "removeDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database unlinked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/default-database": {
      "put": {
        "tags": [
          "Project"
        ],
        "summary": "Set default database",
        "description": "Sets the default database for the project. Used when no specific database_id is provided.",
        "operationId": "setDefaultDatabase",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetDefaultDatabaseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Default database set successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission": {
      "get": {
        "tags": [
          "Mission"
        ],
        "summary": "List all missions",
        "description": "Returns all missions in the workspace, optionally filtered by project.",
        "operationId": "listMissions",
        "parameters": [
          {
            "name": "project_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by project ID",
              "title": "Project Id"
            },
            "description": "Filter by project ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of missions to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of missions to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of missions returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Mission"
        ],
        "summary": "Create a new mission",
        "description": "Creates a mission with auto-generated UUID and context folder.",
        "operationId": "createMission",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mission created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}": {
      "get": {
        "tags": [
          "Mission"
        ],
        "summary": "Get mission details",
        "description": "Returns full mission details including status, progress, and linked sessions.",
        "operationId": "getMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mission found and returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Mission"
        ],
        "summary": "Update mission",
        "description": "Updates mission metadata. Only provided fields are updated.",
        "operationId": "updateMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mission updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Mission"
        ],
        "summary": "Delete mission",
        "description": "Permanently deletes a mission and its metadata.",
        "operationId": "deleteMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mission deleted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/sessions": {
      "post": {
        "tags": [
          "Mission"
        ],
        "summary": "Add session to mission",
        "description": "Associates a session with the mission.",
        "operationId": "addSession",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddSessionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/sessions/{session_id}": {
      "delete": {
        "tags": [
          "Mission"
        ],
        "summary": "Remove session from mission",
        "description": "Removes the session association from the mission. The session itself is not deleted.",
        "operationId": "removeSession",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/kb/query": {
      "post": {
        "tags": [
          "KB"
        ],
        "summary": "Query Knowledge Base",
        "description": "Semantic search with optional project scoping and external docs fallback.",
        "operationId": "queryKnowledgeBase",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KBQueryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KBQueryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/kb/rag": {
      "post": {
        "tags": [
          "KB"
        ],
        "summary": "Rag Knowledge Base",
        "description": "RAG query with LLM response and citations.",
        "operationId": "ragKnowledgeBase",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RAGRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KBRagResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/download": {
      "post": {
        "tags": [
          "Repo"
        ],
        "summary": "Start repository download",
        "description": "Initiates an async download of a Git repository. Returns a job ID for status tracking. If the repository already exists (deduplicated), returns immediately with status='linked'.",
        "operationId": "downloadRepository",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DownloadRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Download job started or linked to existing",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoDownloadResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid repository URL"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/status/{job_id}": {
      "get": {
        "tags": [
          "Repo"
        ],
        "summary": "Get download status",
        "description": "Returns the current status and progress of a repository download job.",
        "operationId": "getRepoDownloadStatus",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job status returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoStatusResponse"
                }
              }
            }
          },
          "404": {
            "description": "Job not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/list": {
      "get": {
        "tags": [
          "Repo"
        ],
        "summary": "List downloaded repositories",
        "description": "Returns all repositories that have been downloaded for the workspace.",
        "operationId": "listDownloadedRepos",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of repositories returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/{id}": {
      "delete": {
        "tags": [
          "Repo"
        ],
        "summary": "Delete repository",
        "description": "Permanently deletes a downloaded repository and its indexed content. Uses the repository UUID.",
        "operationId": "delete_repo",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Repository deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoDeleteResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/docs/snapshot": {
      "post": {
        "tags": [
          "Docs"
        ],
        "summary": "Create Snapshot",
        "description": "Create a documentation snapshot from a GitHub repository.",
        "operationId": "createSnapshot",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SnapshotRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/docs/list": {
      "get": {
        "tags": [
          "Docs"
        ],
        "summary": "List Docs",
        "description": "List documentation snapshots.",
        "operationId": "listDocs",
        "parameters": [
          {
            "name": "doc_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Doc Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/docs/status/{job_id}": {
      "get": {
        "tags": [
          "Docs"
        ],
        "summary": "Get Snapshot Status",
        "description": "Get snapshot job status.",
        "operationId": "getSnapshotStatus",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/github/check-access": {
      "post": {
        "tags": [
          "GitHub"
        ],
        "summary": "Github Check Access",
        "description": "Check GitHub repository access.\n\nUses the user's stored GitHub token for private repository access.\nPublic repositories are accessible without a token.",
        "operationId": "githubCheckAccess",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CheckAccessRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/github/branches": {
      "post": {
        "tags": [
          "GitHub"
        ],
        "summary": "Github List Branches",
        "description": "List repository branches.\n\nUses the user's stored GitHub token for private repository access.",
        "operationId": "githubListBranches",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ListBranchesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/github/contents": {
      "post": {
        "tags": [
          "GitHub"
        ],
        "summary": "Github Get Contents",
        "description": "Get repository contents.\n\nUses the user's stored GitHub token for private repository access.",
        "operationId": "githubGetContents",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetContentsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "List all database configurations",
        "description": "Returns all database configurations in the workspace.",
        "operationId": "listDatabases",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of databases to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of databases to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of databases returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Create a new database configuration",
        "description": "Creates a database configuration with auto-generated UUID. Use postgres_lambda for Lambda-proxied connections.",
        "operationId": "createDatabase",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DatabaseCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Database created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseConfigResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database/list": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "List all database configurations (alias)",
        "description": "Alias for GET /ocxp/database. Returns all databases in the workspace.",
        "operationId": "listDatabasesAlias",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of databases to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of databases to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of databases returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database/{database_id}": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "Get database configuration details",
        "description": "Returns full database configuration including connection settings and allowed tables.",
        "operationId": "getDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database found and returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseConfigResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Database"
        ],
        "summary": "Update database configuration",
        "description": "Updates database configuration. Only provided fields are updated.",
        "operationId": "updateDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DatabaseUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Database updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseConfigResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Database"
        ],
        "summary": "Delete database configuration",
        "description": "Permanently deletes a database configuration.",
        "operationId": "deleteDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database deleted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database/{database_id}/test": {
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Test database connection",
        "description": "Tests the database connection and returns status.",
        "operationId": "testDatabaseConnection",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Connection test completed",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/schema": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "Get database schema",
        "description": "Returns database schema information including tables and their metadata.",
        "operationId": "getSchema",
        "parameters": [
          {
            "name": "pattern",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter tables by name pattern",
              "title": "Pattern"
            },
            "description": "Filter tables by name pattern"
          },
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Schema returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseSchemaResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/sample/{table_name}": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "Get sample data from table",
        "description": "Returns sample rows from a specified table.",
        "operationId": "getSample",
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of sample rows",
              "default": 5,
              "title": "Limit"
            },
            "description": "Number of sample rows"
          },
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sample data returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseSampleResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid table name"
          },
          "404": {
            "description": "Database or table not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/tables": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "List available tables",
        "description": "Returns list of tables available in the database. Supports caching.",
        "operationId": "listTables",
        "parameters": [
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "cache_ttl",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 3600,
              "minimum": 0,
              "description": "Cache TTL in seconds (0=no cache)",
              "default": 300,
              "title": "Cache Ttl"
            },
            "description": "Cache TTL in seconds (0=no cache)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Table list returned successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/databases": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "List configured databases",
        "description": "Returns list of database configurations available in the workspace.",
        "operationId": "listDatabases",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database list returned successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/overview": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "Get complete database overview",
        "description": "Returns complete database structure with tables, columns, and foreign keys in a single call. Supports caching.",
        "operationId": "getDatabaseOverview",
        "parameters": [
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "cache_ttl",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 3600,
              "minimum": 0,
              "description": "Cache TTL in seconds (0=no cache)",
              "default": 300,
              "title": "Cache Ttl"
            },
            "description": "Cache TTL in seconds (0=no cache)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database overview returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseOverviewResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/types": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Get content types",
        "description": "Returns all available content types (mission, context, repo, etc.) with optional item counts.",
        "operationId": "getContentTypes",
        "parameters": [
          {
            "name": "counts",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include item counts per type",
              "default": false,
              "title": "Counts"
            },
            "description": "Include item counts per type"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of content types returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentTypesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/list": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "List content",
        "description": "Lists all content items of a specific type, optionally filtered by path.",
        "operationId": "listContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by path prefix",
              "title": "Path"
            },
            "description": "Filter by path prefix"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum items to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum items to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Content list returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid content type"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/query": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Query content",
        "description": "Advanced query with filters on name, path, size, etc. Supports eq, ne, contains, startsWith, gt, lt operators.",
        "operationId": "queryContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QueryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Query results returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid filter or content type"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/search": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Search content",
        "description": "Full-text search in content names and paths. Case-insensitive.",
        "operationId": "searchContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Search query string",
              "title": "Q"
            },
            "description": "Search query string"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum results to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Search results returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/tree": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Get content tree",
        "description": "Returns hierarchical tree structure of content with configurable depth.",
        "operationId": "getContentTree",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Root path for tree",
              "title": "Path"
            },
            "description": "Root path for tree"
          },
          {
            "name": "depth",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 10,
              "minimum": 1,
              "description": "Maximum tree depth",
              "default": 3,
              "title": "Depth"
            },
            "description": "Maximum tree depth"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tree structure returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentTreeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/stats": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Get content statistics",
        "description": "Returns file counts and sizes grouped by extension for a content path.",
        "operationId": "getContentStats",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Path to analyze",
              "title": "Path"
            },
            "description": "Path to analyze"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Statistics returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/{content_id}": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Read content",
        "description": "Reads content by type and path. Binary files are base64-encoded.",
        "operationId": "readContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Content returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentReadResponse"
                }
              }
            }
          },
          "404": {
            "description": "Content not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Write content",
        "description": "Writes content to storage. Supports ETag for optimistic locking and ifNotExists for creation-only.",
        "operationId": "writeContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WriteRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Content written successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentWriteResponse"
                }
              }
            }
          },
          "409": {
            "description": "Content already exists or ETag mismatch"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Context"
        ],
        "summary": "Delete content",
        "description": "Deletes content. Use recursive=true with confirm=true to delete directories.",
        "operationId": "deleteContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "recursive",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Delete directory recursively",
              "default": false,
              "title": "Recursive"
            },
            "description": "Delete directory recursively"
          },
          {
            "name": "confirm",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Confirm recursive deletion",
              "default": false,
              "title": "Confirm"
            },
            "description": "Confirm recursive deletion"
          },
          {
            "name": "manage_metadata",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Also delete .metadata.json sidecars",
              "default": true,
              "title": "Manage Metadata"
            },
            "description": "Also delete .metadata.json sidecars"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Content deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentDeleteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Recursive delete requires confirmation"
          },
          "404": {
            "description": "Content not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/folder/{folder_path}": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Create folder",
        "description": "Creates a folder with metadata.json for Bedrock KB indexing. The metadata.json serves as a folder marker (S3 doesn't have real folders) and provides KB-filterable attributes.",
        "operationId": "createFolder",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Type"
            }
          },
          {
            "name": "folder_path",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Folder Path"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFolderRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Folder created with metadata.json",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentWriteResponse"
                }
              }
            }
          },
          "409": {
            "description": "Folder already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/move": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Move content",
        "description": "Moves content from source to destination path. Use overwrite=true to replace existing.",
        "operationId": "moveContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MoveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Content moved successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Source not found"
          },
          "409": {
            "description": "Destination exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/lock": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Lock content",
        "description": "Acquires an exclusive lock on content for the specified TTL (seconds). Stub endpoint for SDK compatibility.",
        "operationId": "lockContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LockRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lock acquired",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/unlock": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Unlock content",
        "description": "Releases an exclusive lock on content. Stub endpoint for SDK compatibility.",
        "operationId": "unlockContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LockRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lock released",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/mission/create": {
      "post": {
        "tags": [
          "Tools"
        ],
        "summary": "Create a new mission",
        "description": "Creates a mission with optional project association and goals list.",
        "operationId": "createMission",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mission created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionCreateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/mission/{mission_id}/update": {
      "post": {
        "tags": [
          "Tools"
        ],
        "summary": "Update mission status",
        "description": "Updates mission status, progress percentage, and/or notes.",
        "operationId": "updateMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mission updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionUpdateResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/mission/{mission_id}/context": {
      "get": {
        "tags": [
          "Tools"
        ],
        "summary": "Get mission context",
        "description": "Returns mission context data optimized for AI consumption.",
        "operationId": "getMissionContext",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Context returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionContextResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/discover": {
      "post": {
        "tags": [
          "Tools"
        ],
        "summary": "Discover similar content",
        "description": "Searches the knowledge base for content semantically similar to the query.",
        "operationId": "discoverSimilar",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DiscoverRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Discovery results returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscoverResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/discover/ticket": {
      "post": {
        "tags": [
          "Tools"
        ],
        "summary": "Find content by Jira ticket",
        "description": "Searches the knowledge base for content associated with a Jira ticket ID.",
        "operationId": "findByTicket",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FindByTicketRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Related content returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TicketDiscoverResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/token": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login For Access Token",
        "description": "OAuth2 compatible login endpoint for Swagger UI.\n\nAuthenticates with Cognito using username/password and returns JWT tokens.\nUse this endpoint to get a token for testing other endpoints in Swagger.\nReturns snake_case fields per OAuth2 spec for Swagger compatibility.",
        "operationId": "loginForAccessToken",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_loginForAccessToken"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OAuth2TokenResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login",
        "description": "JSON login endpoint for programmatic clients.\n\nAuthenticates with Cognito using username/password and returns JWT tokens.\nUse /auth/token for OAuth2 form-based login (Swagger UI).",
        "operationId": "login",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/refresh": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Refresh Tokens",
        "description": "Refresh access token using refresh token.\n\nReturns new access and ID tokens. The refresh token remains valid\nuntil it expires (configured in Cognito).",
        "operationId": "refreshTokens",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/config": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get Auth Config",
        "description": "Get Cognito configuration for frontend.",
        "operationId": "getAuthConfig",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthConfig"
                }
              }
            }
          }
        }
      }
    },
    "/auth/me": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get Current User",
        "description": "Get current authenticated user info.",
        "operationId": "getCurrentUser",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/workspaces": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "List Workspaces",
        "description": "List workspaces for authenticated user.",
        "operationId": "listWorkspaces",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkspacesResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/github-token": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get Github Token Status",
        "description": "Check if user has a GitHub token configured.\n\nReturns whether a token is stored and the associated GitHub username,\nbut never returns the actual token value.",
        "operationId": "getGithubTokenStatus",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GitHubTokenStatusResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Auth"
        ],
        "summary": "Set Github Token",
        "description": "Save user's GitHub token for server-side repository operations.\n\nThe token is stored securely in DynamoDB linked to the user's Cognito identity.\nThis enables GitHub operations without transmitting the token on every request.",
        "operationId": "setGithubToken",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GitHubTokenRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GitHubTokenSuccessResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Auth"
        ],
        "summary": "Delete Github Token",
        "description": "Remove user's stored GitHub token.\n\nDeletes the GitHub token from DynamoDB. The user will need to\nreconfigure their token for future GitHub operations.",
        "operationId": "deleteGithubToken",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GitHubTokenSuccessResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "operationId": "healthCheck",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AddDatabaseRequest": {
        "properties": {
          "database_id": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Database Id",
            "description": "Database config ID (UUID or 'amc-default')"
          },
          "priority": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Priority",
            "description": "Priority weight for database selection",
            "default": 50
          },
          "auto_include": {
            "type": "boolean",
            "title": "Auto Include",
            "description": "Automatically include in agent context",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "database_id"
        ],
        "title": "AddDatabaseRequest"
      },
      "AddMissionRequest": {
        "properties": {
          "mission_id": {
            "type": "string",
            "minLength": 1,
            "title": "Mission Id"
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "AddMissionRequest"
      },
      "AddRepoRequest": {
        "properties": {
          "repo_id": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Repo Id"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "project|framework|tool|reference",
            "default": "project"
          },
          "priority": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Priority",
            "default": 50
          },
          "auto_include": {
            "type": "boolean",
            "title": "Auto Include",
            "default": true
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "default": "main"
          }
        },
        "type": "object",
        "required": [
          "repo_id"
        ],
        "title": "AddRepoRequest"
      },
      "AddSessionRequest": {
        "properties": {
          "session_id": {
            "type": "string",
            "minLength": 1,
            "title": "Session Id"
          }
        },
        "type": "object",
        "required": [
          "session_id"
        ],
        "title": "AddSessionRequest"
      },
      "AuthConfig": {
        "properties": {
          "region": {
            "type": "string",
            "title": "Region"
          },
          "user_pool_id": {
            "type": "string",
            "title": "User Pool Id"
          },
          "client_id": {
            "type": "string",
            "title": "Client Id"
          }
        },
        "type": "object",
        "required": [
          "region",
          "user_pool_id",
          "client_id"
        ],
        "title": "AuthConfig"
      },
      "Body_loginForAccessToken": {
        "properties": {
          "grant_type": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^password$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grant Type"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "format": "password",
            "title": "Password"
          },
          "scope": {
            "type": "string",
            "title": "Scope",
            "default": ""
          },
          "client_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Id"
          },
          "client_secret": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "format": "password",
            "title": "Client Secret"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "Body_loginForAccessToken"
      },
      "BulkDeleteRequest": {
        "properties": {
          "ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Ids"
          }
        },
        "type": "object",
        "required": [
          "ids"
        ],
        "title": "BulkDeleteRequest"
      },
      "BulkDeleteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkDeleteResponse",
        "description": "Response for POST /ocxp/{type}/bulk/delete."
      },
      "BulkItemResult": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "id",
          "success"
        ],
        "title": "BulkItemResult",
        "description": "Result for a single item in bulk operation."
      },
      "BulkReadRequest": {
        "properties": {
          "ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Ids"
          }
        },
        "type": "object",
        "required": [
          "ids"
        ],
        "title": "BulkReadRequest"
      },
      "BulkReadResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkReadResponse",
        "description": "Response for POST /ocxp/{type}/bulk/read."
      },
      "BulkWriteItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "content": {
            "type": "string",
            "title": "Content"
          }
        },
        "type": "object",
        "required": [
          "id",
          "content"
        ],
        "title": "BulkWriteItem"
      },
      "BulkWriteRequest": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/BulkWriteItem"
            },
            "type": "array",
            "title": "Items"
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "BulkWriteRequest"
      },
      "BulkWriteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkWriteResponse",
        "description": "Response for POST /ocxp/{type}/bulk/write."
      },
      "CheckAccessRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "CheckAccessRequest"
      },
      "ColumnOverview": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "type": {
            "type": "string",
            "title": "Type"
          },
          "nullable": {
            "type": "boolean",
            "title": "Nullable"
          },
          "default": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": ""
          }
        },
        "type": "object",
        "required": [
          "name",
          "type",
          "nullable"
        ],
        "title": "ColumnOverview",
        "description": "Column information for database overview."
      },
      "ContentDeleteResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path"
          },
          "deleted": {
            "type": "boolean",
            "title": "Deleted",
            "default": true
          },
          "files_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Files Count"
          }
        },
        "type": "object",
        "required": [
          "path"
        ],
        "title": "ContentDeleteResponse",
        "description": "Response for DELETE /ocxp/{type}/{id}."
      },
      "ContentEntry": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "README.md"
            ]
          },
          "type": {
            "type": "string",
            "title": "Type",
            "description": "file or directory",
            "examples": [
              "file"
            ]
          },
          "path": {
            "type": "string",
            "title": "Path",
            "examples": [
              "docs/README.md"
            ]
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size",
            "examples": [
              1024
            ]
          },
          "mtime": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mtime",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          }
        },
        "type": "object",
        "required": [
          "name",
          "type",
          "path"
        ],
        "title": "ContentEntry",
        "description": "Single entry in a content listing."
      },
      "ContentListResponse": {
        "properties": {
          "entries": {
            "items": {
              "$ref": "#/components/schemas/ContentEntry"
            },
            "type": "array",
            "title": "Entries"
          },
          "cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cursor"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "default": false
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "entries",
          "total"
        ],
        "title": "ContentListResponse",
        "description": "Response for GET /ocxp/{type}/list."
      },
      "ContentReadResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path",
            "examples": [
              "mission/current.md"
            ]
          },
          "content": {
            "type": "string",
            "title": "Content",
            "examples": [
              "# Mission\n\nImplement feature X..."
            ]
          },
          "encoding": {
            "type": "string",
            "title": "Encoding",
            "default": "utf-8",
            "examples": [
              "utf-8",
              "base64"
            ]
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size",
            "examples": [
              256
            ]
          },
          "mtime": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mtime",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata"
          }
        },
        "type": "object",
        "required": [
          "path",
          "content"
        ],
        "title": "ContentReadResponse",
        "description": "Response for GET /ocxp/{type}/{id}."
      },
      "ContentStatsResponse": {
        "properties": {
          "total_files": {
            "type": "integer",
            "title": "Total Files"
          },
          "total_size": {
            "type": "integer",
            "title": "Total Size"
          },
          "by_extension": {
            "additionalProperties": {
              "additionalProperties": {
                "type": "integer"
              },
              "type": "object"
            },
            "type": "object",
            "title": "By Extension"
          }
        },
        "type": "object",
        "required": [
          "total_files",
          "total_size",
          "by_extension"
        ],
        "title": "ContentStatsResponse",
        "description": "Response for GET /ocxp/{type}/stats."
      },
      "ContentTreeNode": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "type": {
            "type": "string",
            "title": "Type"
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size"
          },
          "children": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ContentTreeNode"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Children"
          },
          "truncated": {
            "type": "boolean",
            "title": "Truncated",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "name",
          "type"
        ],
        "title": "ContentTreeNode",
        "description": "Tree node for hierarchical content view."
      },
      "ContentTreeResponse": {
        "properties": {
          "tree": {
            "$ref": "#/components/schemas/ContentTreeNode"
          }
        },
        "type": "object",
        "required": [
          "tree"
        ],
        "title": "ContentTreeResponse",
        "description": "Response for GET /ocxp/{type}/tree."
      },
      "ContentTypeInfo": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "mission"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "examples": [
              "Mission content"
            ]
          }
        },
        "type": "object",
        "required": [
          "name",
          "description"
        ],
        "title": "ContentTypeInfo",
        "description": "Content type metadata."
      },
      "ContentTypesResponse": {
        "properties": {
          "types": {
            "items": {
              "$ref": "#/components/schemas/ContentTypeInfo"
            },
            "type": "array",
            "title": "Types"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "types",
          "total"
        ],
        "title": "ContentTypesResponse",
        "description": "Response for GET /ocxp/types."
      },
      "ContentWriteResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path"
          },
          "type": {
            "type": "string",
            "title": "Type",
            "default": "file"
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size"
          },
          "etag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Etag"
          }
        },
        "type": "object",
        "required": [
          "path"
        ],
        "title": "ContentWriteResponse",
        "description": "Response for POST /ocxp/{type}/{id}."
      },
      "CreateFolderRequest": {
        "properties": {
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": ""
          }
        },
        "type": "object",
        "title": "CreateFolderRequest",
        "description": "Request body for folder creation."
      },
      "CreateSessionRequest": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "active"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "mission_id"
        ],
        "title": "CreateSessionRequest",
        "description": "Request body for POST /ocxp/session - create new session linked to mission."
      },
      "DatabaseConfigResponse": {
        "properties": {
          "database_id": {
            "type": "string",
            "title": "Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "Production DB"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": "",
            "examples": [
              "Main PostgreSQL database"
            ]
          },
          "db_type": {
            "type": "string",
            "title": "Db Type",
            "description": "postgres|postgres_lambda|mysql|mariadb",
            "examples": [
              "postgres_lambda"
            ]
          },
          "lambda_function_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Function Name",
            "examples": [
              "query_database"
            ]
          },
          "lambda_region": {
            "type": "string",
            "title": "Lambda Region",
            "default": "us-west-2",
            "examples": [
              "us-west-2"
            ]
          },
          "host": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Host",
            "examples": [
              "db.example.com"
            ]
          },
          "port": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Port",
            "examples": [
              5432
            ]
          },
          "database_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Name",
            "examples": [
              "myapp_prod"
            ]
          },
          "allowed_tables": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Allowed Tables",
            "examples": [
              [
                "users",
                "orders",
                "products"
              ]
            ]
          },
          "read_only": {
            "type": "boolean",
            "title": "Read Only",
            "default": true,
            "examples": [
              true
            ]
          },
          "max_rows": {
            "type": "integer",
            "maximum": 10000.0,
            "minimum": 1.0,
            "title": "Max Rows",
            "default": 100,
            "examples": [
              100
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "active|inactive|error",
            "default": "active",
            "examples": [
              "active"
            ]
          },
          "last_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "examples": [
              "Connection timeout"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          }
        },
        "type": "object",
        "required": [
          "database_id",
          "workspace",
          "name",
          "db_type"
        ],
        "title": "DatabaseConfigResponse",
        "description": "Full database configuration response."
      },
      "DatabaseCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name"
          },
          "description": {
            "type": "string",
            "maxLength": 2000,
            "title": "Description",
            "default": ""
          },
          "db_type": {
            "type": "string",
            "title": "Db Type",
            "description": "postgres|postgres_lambda|supabase|mysql|mariadb",
            "default": "postgres_lambda"
          },
          "lambda_function_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Function Name",
            "description": "Lambda function name for postgres_lambda type"
          },
          "lambda_region": {
            "type": "string",
            "title": "Lambda Region",
            "default": "us-west-2"
          },
          "secret_arn": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secret Arn",
            "description": "AWS Secrets Manager ARN for credentials"
          },
          "allowed_tables": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Allowed Tables"
          },
          "read_only": {
            "type": "boolean",
            "title": "Read Only",
            "default": true
          },
          "max_rows": {
            "type": "integer",
            "maximum": 10000.0,
            "minimum": 1.0,
            "title": "Max Rows",
            "default": 100
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "DatabaseCreate",
        "description": "Request body for creating a database config."
      },
      "DatabaseListResponse": {
        "properties": {
          "databases": {
            "items": {
              "$ref": "#/components/schemas/DatabaseConfigResponse"
            },
            "type": "array",
            "title": "Databases"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "databases",
          "count"
        ],
        "title": "DatabaseListResponse",
        "description": "Response for GET /ocxp/database."
      },
      "DatabaseOverviewResponse": {
        "properties": {
          "database_id": {
            "type": "string",
            "title": "Database Id"
          },
          "database_name": {
            "type": "string",
            "title": "Database Name"
          },
          "table_count": {
            "type": "integer",
            "title": "Table Count"
          },
          "tables": {
            "items": {
              "$ref": "#/components/schemas/TableOverview"
            },
            "type": "array",
            "title": "Tables"
          },
          "cached": {
            "type": "boolean",
            "title": "Cached",
            "default": false
          },
          "cache_expires_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cache Expires At"
          },
          "generated_at": {
            "type": "string",
            "title": "Generated At"
          },
          "query_time_ms": {
            "type": "number",
            "title": "Query Time Ms"
          }
        },
        "type": "object",
        "required": [
          "database_id",
          "database_name",
          "table_count",
          "tables",
          "generated_at",
          "query_time_ms"
        ],
        "title": "DatabaseOverviewResponse",
        "description": "Complete database overview with schema and metadata."
      },
      "DatabaseSampleResponse": {
        "properties": {
          "table_name": {
            "type": "string",
            "title": "Table Name",
            "examples": [
              "users"
            ]
          },
          "rows": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Rows"
          },
          "columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Columns"
          },
          "row_count": {
            "type": "integer",
            "title": "Row Count",
            "default": 0,
            "examples": [
              5
            ]
          },
          "database_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          }
        },
        "type": "object",
        "required": [
          "table_name"
        ],
        "title": "DatabaseSampleResponse",
        "description": "Response for GET /ocxp/context/database/sample/{table}."
      },
      "DatabaseSchemaResponse": {
        "properties": {
          "tables": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Tables"
          },
          "table_count": {
            "type": "integer",
            "title": "Table Count",
            "default": 0,
            "examples": [
              15
            ]
          },
          "database_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          }
        },
        "type": "object",
        "title": "DatabaseSchemaResponse",
        "description": "Response for GET /ocxp/context/database/schema."
      },
      "DatabaseUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "lambda_function_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Function Name"
          },
          "lambda_region": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Region"
          },
          "secret_arn": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secret Arn",
            "description": "AWS Secrets Manager ARN for credentials"
          },
          "allowed_tables": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allowed Tables"
          },
          "read_only": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Read Only"
          },
          "max_rows": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 10000.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Rows"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "active|inactive|error"
          }
        },
        "type": "object",
        "title": "DatabaseUpdate",
        "description": "Request body for updating a database config."
      },
      "DiscoverRequest": {
        "properties": {
          "query": {
            "type": "string",
            "title": "Query"
          },
          "content_types": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Types"
          },
          "limit": {
            "type": "integer",
            "title": "Limit",
            "default": 10
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "DiscoverRequest"
      },
      "DiscoverResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/DiscoverResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "DiscoverResponse",
        "description": "Response for POST /tools/discover."
      },
      "DiscoverResult": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path",
            "examples": [
              "docs/architecture.md"
            ]
          },
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "examples": [
              "context"
            ]
          },
          "score": {
            "type": "number",
            "title": "Score",
            "examples": [
              0.92
            ]
          },
          "snippet": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Snippet",
            "examples": [
              "...relevant content snippet..."
            ]
          }
        },
        "type": "object",
        "required": [
          "path",
          "content_type",
          "score"
        ],
        "title": "DiscoverResult",
        "description": "Single discovery result."
      },
      "DownloadRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          },
          "branch": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Branch"
          },
          "mode": {
            "type": "string",
            "title": "Mode",
            "default": "full"
          },
          "path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Path"
          },
          "repo_type": {
            "type": "string",
            "title": "Repo Type",
            "default": "auto"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "DownloadRequest"
      },
      "FindByTicketRequest": {
        "properties": {
          "ticket_id": {
            "type": "string",
            "title": "Ticket Id"
          }
        },
        "type": "object",
        "required": [
          "ticket_id"
        ],
        "title": "FindByTicketRequest"
      },
      "ForeignKeyInfo": {
        "properties": {
          "column": {
            "type": "string",
            "title": "Column"
          },
          "foreign_table": {
            "type": "string",
            "title": "Foreign Table"
          },
          "foreign_column": {
            "type": "string",
            "title": "Foreign Column"
          }
        },
        "type": "object",
        "required": [
          "column",
          "foreign_table",
          "foreign_column"
        ],
        "title": "ForeignKeyInfo",
        "description": "Foreign key relationship information."
      },
      "ForkRequest": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "fork_point": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fork Point"
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "ForkRequest"
      },
      "GetContentsRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          },
          "path": {
            "type": "string",
            "title": "Path",
            "default": ""
          },
          "ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ref"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "GetContentsRequest"
      },
      "GitHubTokenRequest": {
        "properties": {
          "github_token": {
            "type": "string",
            "minLength": 1,
            "title": "Github Token"
          }
        },
        "type": "object",
        "required": [
          "github_token"
        ],
        "title": "GitHubTokenRequest",
        "description": "Request to save GitHub token."
      },
      "GitHubTokenStatusResponse": {
        "properties": {
          "configured": {
            "type": "boolean",
            "title": "Configured"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "scopes": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scopes"
          }
        },
        "type": "object",
        "required": [
          "configured"
        ],
        "title": "GitHubTokenStatusResponse",
        "description": "GitHub token status response."
      },
      "GitHubTokenSuccessResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "GitHubTokenSuccessResponse",
        "description": "Success response for GitHub token operations."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "KBQueryRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Query"
          },
          "max_results": {
            "type": "integer",
            "maximum": 20.0,
            "minimum": 1.0,
            "title": "Max Results",
            "default": 5
          },
          "search_type": {
            "type": "string",
            "pattern": "^(SEMANTIC|HYBRID)$",
            "title": "Search Type",
            "default": "SEMANTIC"
          },
          "doc_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Doc Id",
            "description": "Filter to specific doc_id"
          },
          "repo_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Ids",
            "description": "Filter to specific repo IDs"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Filter to specific project"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "description": "Filter to specific mission"
          },
          "enable_fallback": {
            "type": "boolean",
            "title": "Enable Fallback",
            "description": "Enable external docs fallback when KB has no/low results",
            "default": true
          },
          "fallback_threshold": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Fallback Threshold",
            "description": "Score threshold below which fallback triggers",
            "default": 0.5
          },
          "persist_external_docs": {
            "type": "boolean",
            "title": "Persist External Docs",
            "description": "Save external docs to S3 for future KB queries",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "KBQueryRequest"
      },
      "KBQueryResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/KBResultItem"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          },
          "fallback_triggered": {
            "type": "boolean",
            "title": "Fallback Triggered",
            "description": "Whether external docs fallback was triggered",
            "default": false
          },
          "fallback_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Source",
            "description": "External source used for fallback",
            "examples": [
              "context7",
              "aws_docs"
            ]
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "KBQueryResponse",
        "description": "Response for POST /ocxp/kb/query."
      },
      "KBRagResponse": {
        "properties": {
          "answer": {
            "type": "string",
            "title": "Answer"
          },
          "citations": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Citations"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id"
          }
        },
        "type": "object",
        "required": [
          "answer"
        ],
        "title": "KBRagResponse",
        "description": "Response for POST /ocxp/kb/rag."
      },
      "KBResultItem": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content"
          },
          "score": {
            "type": "number",
            "title": "Score"
          },
          "source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type",
            "description": "Source type: kb, context7, aws_docs",
            "default": "kb",
            "examples": [
              "kb",
              "context7",
              "aws_docs"
            ]
          }
        },
        "type": "object",
        "required": [
          "content",
          "score"
        ],
        "title": "KBResultItem",
        "description": "Single KB search result."
      },
      "LinkedRepoResponse": {
        "properties": {
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "examples": [
              "my-app"
            ]
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "project|framework|tool|reference",
            "examples": [
              "project"
            ]
          },
          "priority": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Priority",
            "examples": [
              50
            ]
          },
          "auto_include": {
            "type": "boolean",
            "title": "Auto Include",
            "examples": [
              true
            ]
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "examples": [
              "main"
            ]
          }
        },
        "type": "object",
        "required": [
          "repo_id",
          "category",
          "priority",
          "auto_include",
          "branch"
        ],
        "title": "LinkedRepoResponse",
        "description": "Linked repository in a project."
      },
      "ListBranchesRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "ListBranchesRequest"
      },
      "LockRequest": {
        "properties": {
          "content_type": {
            "type": "string",
            "title": "Content Type"
          },
          "content_id": {
            "type": "string",
            "title": "Content Id"
          },
          "ttl": {
            "type": "integer",
            "title": "Ttl",
            "default": 300
          }
        },
        "type": "object",
        "required": [
          "content_type",
          "content_id"
        ],
        "title": "LockRequest"
      },
      "LoginRequest": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "LoginRequest",
        "description": "JSON login request for programmatic clients."
      },
      "MessageResponse": {
        "properties": {
          "message_id": {
            "type": "integer",
            "title": "Message Id",
            "examples": [
              1
            ]
          },
          "role": {
            "type": "string",
            "title": "Role",
            "description": "user|assistant|system",
            "examples": [
              "user"
            ]
          },
          "content": {
            "type": "string",
            "title": "Content",
            "examples": [
              "How do I implement feature X?"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          }
        },
        "type": "object",
        "required": [
          "message_id",
          "role",
          "content"
        ],
        "title": "MessageResponse",
        "description": "Single message in a session."
      },
      "MissionContextResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "context": {
            "additionalProperties": true,
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "context"
        ],
        "title": "MissionContextResponse",
        "description": "Response for GET /tools/mission/{id}/context."
      },
      "MissionCreate": {
        "properties": {
          "title": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Title"
          },
          "description": {
            "type": "string",
            "maxLength": 5000,
            "title": "Description",
            "default": ""
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "goals": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Goals"
          }
        },
        "type": "object",
        "required": [
          "title"
        ],
        "title": "MissionCreate"
      },
      "MissionCreateRequest": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "goals": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Goals"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "MissionCreateRequest"
      },
      "MissionCreateResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "examples": [
              "mission-abc123"
            ]
          },
          "path": {
            "type": "string",
            "title": "Path",
            "examples": [
              "mission/mission-abc123.md"
            ]
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "path"
        ],
        "title": "MissionCreateResponse",
        "description": "Response for POST /tools/mission/create."
      },
      "MissionListResponse": {
        "properties": {
          "missions": {
            "items": {
              "$ref": "#/components/schemas/MissionResponse"
            },
            "type": "array",
            "title": "Missions"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "missions",
          "count"
        ],
        "title": "MissionListResponse",
        "description": "Response for GET /ocxp/mission."
      },
      "MissionResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "title": {
            "type": "string",
            "title": "Title",
            "examples": [
              "Implement user authentication"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": "",
            "examples": [
              "Add OAuth2 login flow"
            ]
          },
          "context_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Path",
            "examples": [
              "workspaces/acme-corp/mission/550e8400-e29b-41d4-a716-446655440000/"
            ]
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "examples": [
              "project-001"
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "draft|active|completed|archived",
            "default": "draft",
            "examples": [
              "draft"
            ]
          },
          "progress": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Progress",
            "default": 0,
            "examples": [
              50
            ]
          },
          "goals": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Goals",
            "examples": [
              [
                "Implement login",
                "Add OAuth providers"
              ]
            ]
          },
          "notes": {
            "type": "string",
            "title": "Notes",
            "default": "",
            "examples": [
              "Consider using Auth0 for OAuth"
            ]
          },
          "session_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Session Ids",
            "examples": [
              [
                "sess-001",
                "sess-002"
              ]
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "examples": [
              "user@example.com"
            ]
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "workspace",
          "title"
        ],
        "title": "MissionResponse",
        "description": "Full mission response."
      },
      "MissionUpdate": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 5000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "draft|active|completed|archived"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 10000
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "title": "MissionUpdate"
      },
      "MissionUpdateRequest": {
        "properties": {
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "title": "MissionUpdateRequest"
      },
      "MissionUpdateResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "MissionUpdateResponse",
        "description": "Response for POST /tools/mission/{id}/update."
      },
      "MoveRequest": {
        "properties": {
          "source": {
            "type": "string",
            "title": "Source"
          },
          "destination": {
            "type": "string",
            "title": "Destination"
          },
          "overwrite": {
            "type": "boolean",
            "title": "Overwrite",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "source",
          "destination"
        ],
        "title": "MoveRequest"
      },
      "OAuth2TokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "default": 3600
          },
          "id_token": {
            "type": "string",
            "title": "Id Token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "id_token",
          "refresh_token"
        ],
        "title": "OAuth2TokenResponse",
        "description": "OAuth2 standard token response for Swagger UI compatibility (snake_case)."
      },
      "ProjectCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name"
          },
          "description": {
            "type": "string",
            "maxLength": 2000,
            "title": "Description",
            "default": ""
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "ProjectCreate"
      },
      "ProjectListResponse": {
        "properties": {
          "projects": {
            "items": {
              "$ref": "#/components/schemas/ProjectResponse"
            },
            "type": "array",
            "title": "Projects"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "projects",
          "count"
        ],
        "title": "ProjectListResponse",
        "description": "Response for GET /ocxp/project."
      },
      "ProjectResponse": {
        "properties": {
          "project_id": {
            "type": "string",
            "title": "Project Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "My Project"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "examples": [
              "A sample project for development"
            ]
          },
          "context_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Path",
            "examples": [
              "workspaces/acme-corp/project/550e8400-e29b-41d4-a716-446655440000/"
            ]
          },
          "linked_repos": {
            "items": {
              "$ref": "#/components/schemas/LinkedRepoResponse"
            },
            "type": "array",
            "title": "Linked Repos"
          },
          "mission_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Mission Ids",
            "examples": [
              [
                "mission-001",
                "mission-002"
              ]
            ]
          },
          "default_repo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Repo Id",
            "examples": [
              "my-app"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "examples": [
              "user@example.com"
            ]
          }
        },
        "type": "object",
        "required": [
          "project_id",
          "workspace",
          "name",
          "description"
        ],
        "title": "ProjectResponse",
        "description": "Full project response."
      },
      "ProjectUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "title": "ProjectUpdate"
      },
      "QueryFilter": {
        "properties": {
          "field": {
            "type": "string",
            "title": "Field"
          },
          "operator": {
            "type": "string",
            "title": "Operator",
            "default": "eq"
          },
          "value": {
            "title": "Value"
          }
        },
        "type": "object",
        "required": [
          "field",
          "value"
        ],
        "title": "QueryFilter"
      },
      "QueryRequest": {
        "properties": {
          "filters": {
            "items": {
              "$ref": "#/components/schemas/QueryFilter"
            },
            "type": "array",
            "title": "Filters",
            "default": []
          },
          "limit": {
            "type": "integer",
            "maximum": 1000.0,
            "minimum": 1.0,
            "title": "Limit",
            "default": 100
          }
        },
        "type": "object",
        "title": "QueryRequest"
      },
      "RAGRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Query"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session ID for conversation"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "RAGRequest"
      },
      "RefreshRequest": {
        "properties": {
          "refreshToken": {
            "type": "string",
            "title": "Refreshtoken"
          }
        },
        "type": "object",
        "required": [
          "refreshToken"
        ],
        "title": "RefreshRequest",
        "description": "Token refresh request - accepts both camelCase and snake_case."
      },
      "RefreshResponse": {
        "properties": {
          "accessToken": {
            "type": "string",
            "title": "Accesstoken"
          },
          "tokenType": {
            "type": "string",
            "title": "Tokentype",
            "default": "bearer"
          },
          "expiresIn": {
            "type": "integer",
            "title": "Expiresin",
            "default": 3600
          },
          "idToken": {
            "type": "string",
            "title": "Idtoken"
          }
        },
        "type": "object",
        "required": [
          "accessToken",
          "idToken"
        ],
        "title": "RefreshResponse",
        "description": "Token refresh response with camelCase output (no new refresh_token)."
      },
      "RepoDeleteResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Deleted repository UUID",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "description": "Deleted repository identifier (owner/repo)",
            "examples": [
              "owner/my-app"
            ]
          },
          "deleted": {
            "type": "boolean",
            "title": "Deleted",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "id",
          "repo_id"
        ],
        "title": "RepoDeleteResponse",
        "description": "Response for DELETE /ocxp/repo/{id}."
      },
      "RepoDownloadResponse": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id",
            "description": "Unique UUID for API operations (available when linked or complete)",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "job_id": {
            "type": "string",
            "title": "Job Id",
            "examples": [
              "job-abc123"
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "started|linked|downloading|indexing|complete|failed",
            "examples": [
              "started"
            ]
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "examples": [
              "Download initiated"
            ]
          },
          "deduplicated": {
            "type": "boolean",
            "title": "Deduplicated",
            "description": "True if repo already exists and was linked instead of downloaded",
            "default": false
          },
          "s3_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "S3 Path",
            "description": "S3 storage path",
            "examples": [
              "workspaces/public/repo/owner/repo/"
            ]
          },
          "detected_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detected Type",
            "description": "Auto-detected repo content type (code, docs, or mixed)",
            "examples": [
              "code",
              "docs",
              "mixed"
            ]
          },
          "detection_method": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detection Method",
            "description": "How repo type was detected: path_heuristic (from folder name) or github_api (from language analysis)",
            "examples": [
              "path_heuristic",
              "github_api"
            ]
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "status"
        ],
        "title": "RepoDownloadResponse",
        "description": "Response for POST /ocxp/repo/download."
      },
      "RepoInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique UUID for API operations",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "description": "Repository identifier (owner/repo) for display",
            "examples": [
              "owner/my-app"
            ]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "my-app"
            ]
          },
          "url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Url",
            "examples": [
              "https://github.com/org/my-app"
            ]
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "description": "Git branch",
            "default": "main",
            "examples": [
              "main"
            ]
          },
          "path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Path",
            "description": "Subpath within repository (if partial download)",
            "examples": [
              "src/components"
            ]
          },
          "visibility": {
            "type": "string",
            "title": "Visibility",
            "description": "Repository visibility: public or private",
            "default": "public",
            "examples": [
              "public",
              "private"
            ]
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "pending|downloading|indexed|failed",
            "examples": [
              "indexed"
            ]
          },
          "last_synced": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Synced",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "files_count": {
            "type": "integer",
            "title": "Files Count",
            "description": "Number of files indexed",
            "default": 0,
            "examples": [
              42
            ]
          },
          "total_size_bytes": {
            "type": "integer",
            "title": "Total Size Bytes",
            "description": "Total storage size in bytes",
            "default": 0,
            "examples": [
              1048576
            ]
          },
          "s3_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "S3 Path",
            "description": "S3 storage location",
            "examples": [
              "workspaces/prod/repo/owner/my-app/"
            ]
          },
          "repo_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Type",
            "description": "Content type: code, docs, or mixed",
            "examples": [
              "code",
              "docs",
              "mixed"
            ]
          }
        },
        "type": "object",
        "required": [
          "id",
          "repo_id",
          "name"
        ],
        "title": "RepoInfo",
        "description": "Repository information."
      },
      "RepoListResponse": {
        "properties": {
          "repos": {
            "items": {
              "$ref": "#/components/schemas/RepoInfo"
            },
            "type": "array",
            "title": "Repos"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "repos",
          "count"
        ],
        "title": "RepoListResponse",
        "description": "Response for GET /ocxp/repo/list."
      },
      "RepoStatusResponse": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "repo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Id"
          },
          "files_processed": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Files Processed"
          },
          "total_files": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Files"
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "status"
        ],
        "title": "RepoStatusResponse",
        "description": "Response for GET /ocxp/repo/status/{job_id}."
      },
      "SessionForkResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "parent_session_id": {
            "type": "string",
            "title": "Parent Session Id"
          },
          "fork_depth": {
            "type": "integer",
            "title": "Fork Depth"
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "parent_session_id",
          "fork_depth",
          "message_count"
        ],
        "title": "SessionForkResponse",
        "description": "Response for POST /ocxp/session/{id}/fork."
      },
      "SessionListResponse": {
        "properties": {
          "sessions": {
            "items": {
              "$ref": "#/components/schemas/SessionResponse"
            },
            "type": "array",
            "title": "Sessions"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "sessions",
          "count"
        ],
        "title": "SessionListResponse",
        "description": "Response for GET /ocxp/session."
      },
      "SessionMessagesResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/MessageResponse"
            },
            "type": "array",
            "title": "Messages"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "messages",
          "count"
        ],
        "title": "SessionMessagesResponse",
        "description": "Response for GET /ocxp/session/{id}/messages."
      },
      "SessionMetadataUpdate": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "message_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message Count"
          }
        },
        "type": "object",
        "title": "SessionMetadataUpdate"
      },
      "SessionResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id",
            "examples": [
              "sess-abc123"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "examples": [
              "Feature implementation discussion"
            ]
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count",
            "default": 0,
            "examples": [
              15
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "examples": [
              "user@example.com"
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "active|archived",
            "default": "active",
            "examples": [
              "active"
            ]
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "examples": [
              "mission-001"
            ]
          },
          "parent_session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Session Id",
            "examples": [
              "sess-parent123"
            ]
          },
          "fork_depth": {
            "type": "integer",
            "title": "Fork Depth",
            "default": 0,
            "examples": [
              0
            ]
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "workspace"
        ],
        "title": "SessionResponse",
        "description": "Session metadata response."
      },
      "SetDefaultDatabaseRequest": {
        "properties": {
          "database_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Id",
            "description": "Database ID to set as default (None to clear)"
          }
        },
        "type": "object",
        "title": "SetDefaultDatabaseRequest"
      },
      "SetDefaultRepoRequest": {
        "properties": {
          "repo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Id"
          }
        },
        "type": "object",
        "title": "SetDefaultRepoRequest"
      },
      "SnapshotRequest": {
        "properties": {
          "source_url": {
            "type": "string",
            "title": "Source Url",
            "description": "GitHub repository URL"
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "description": "Branch to snapshot",
            "default": "main"
          },
          "paths": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Paths",
            "description": "Paths to include (empty = all)"
          },
          "doc_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Doc Id",
            "description": "Custom doc ID (auto-generated if not provided)"
          },
          "trigger_vectorization": {
            "type": "boolean",
            "title": "Trigger Vectorization",
            "description": "Trigger KB sync after upload",
            "default": true
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Project ID for KB filtering"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "description": "Mission ID for KB filtering"
          }
        },
        "type": "object",
        "required": [
          "source_url"
        ],
        "title": "SnapshotRequest"
      },
      "TableOverview": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": ""
          },
          "column_count": {
            "type": "integer",
            "title": "Column Count"
          },
          "columns": {
            "items": {
              "$ref": "#/components/schemas/ColumnOverview"
            },
            "type": "array",
            "title": "Columns"
          },
          "foreign_keys": {
            "items": {
              "$ref": "#/components/schemas/ForeignKeyInfo"
            },
            "type": "array",
            "title": "Foreign Keys",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "name",
          "column_count",
          "columns"
        ],
        "title": "TableOverview",
        "description": "Table information with columns and foreign keys."
      },
      "TicketDiscoverResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/DiscoverResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "TicketDiscoverResponse",
        "description": "Response for POST /tools/discover/ticket."
      },
      "TokenResponse": {
        "properties": {
          "accessToken": {
            "type": "string",
            "title": "Accesstoken"
          },
          "tokenType": {
            "type": "string",
            "title": "Tokentype",
            "default": "bearer"
          },
          "expiresIn": {
            "type": "integer",
            "title": "Expiresin",
            "default": 3600
          },
          "idToken": {
            "type": "string",
            "title": "Idtoken"
          },
          "refreshToken": {
            "type": "string",
            "title": "Refreshtoken"
          }
        },
        "type": "object",
        "required": [
          "accessToken",
          "idToken",
          "refreshToken"
        ],
        "title": "TokenResponse",
        "description": "Token response with camelCase output for plugin compatibility."
      },
      "UserResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "username": {
            "type": "string",
            "title": "Username"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "username"
        ],
        "title": "UserResponse",
        "description": "User info response."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "WorkspaceItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name"
        ],
        "title": "WorkspaceItem",
        "description": "Workspace item."
      },
      "WorkspacesResponse": {
        "properties": {
          "workspaces": {
            "items": {
              "$ref": "#/components/schemas/WorkspaceItem"
            },
            "type": "array",
            "title": "Workspaces"
          }
        },
        "type": "object",
        "required": [
          "workspaces"
        ],
        "title": "WorkspacesResponse",
        "description": "Workspaces list response."
      },
      "WriteRequest": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content"
          },
          "encoding": {
            "type": "string",
            "title": "Encoding",
            "default": "utf-8"
          },
          "etag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Etag"
          },
          "ifNotExists": {
            "type": "boolean",
            "title": "Ifnotexists",
            "default": false
          },
          "manage_metadata": {
            "type": "boolean",
            "title": "Manage Metadata",
            "default": true
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id"
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "WriteRequest"
      }
    },
    "securitySchemes": {
      "OAuth2PasswordBearer": {
        "type": "oauth2",
        "description": "Login with your Cognito credentials",
        "flows": {
          "password": {
            "tokenUrl": "/auth/token",
            "scopes": {}
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "https://ix8b43sg3j.execute-api.us-west-2.amazonaws.com"
    }
  ]
}
