{
  "openapi": "3.1.0",
  "info": {
    "title": "OCXP - Open Context Exchange Protocol",
    "description": "\n## Context Operations (Recommended)\n\n- `POST /ocxp/context/discover` - Smart context discovery (replaces /kb/query and /kb/rag)\n- `POST /ocxp/context/validate` - Validate AI responses against context\n- `GET /ocxp/context/{type}/{id}` - Load content by ID\n- `POST /ocxp/context/{type}/bulk/*` - Bulk operations (read/write/delete)\n\n## Deprecated Endpoints\n\nThe following endpoints are deprecated and will be removed in v2.0:\n\n- `POST /ocxp/kb/query` - Use `/ocxp/context/discover` instead\n- `POST /ocxp/kb/rag` - Use `/ocxp/context/discover` with `include_answer=true`\n\n## Migration Guide\n\n**Before (deprecated):**\n```json\nPOST /ocxp/kb/query\n{\"query\": \"How does auth work?\", \"max_results\": 5}\n```\n\n**After (recommended):**\n```json\nPOST /ocxp/context/discover\n{\"query\": \"How does auth work?\", \"options\": {\"max_results\": 5}}\n```\n\nFor RAG with LLM answers, add `\"include_answer\": true` to options.\n",
    "version": "2.0.0"
  },
  "paths": {
    "/ocxp/resolution/resolve": {
      "post": {
        "tags": [
          "OCXP Resolution",
          "OCXP Resolution"
        ],
        "summary": "Resolve Ocxp Uri",
        "description": "Resolve OCXP URI to actual file locations.\n\nConverts ocxp://workspace/content_type/path to:\n- S3 URI (s3://bucket/path)\n- Local filesystem path (/vault/path)\n- Obsidian URI (obsidian://open?vault=...&file=...)\n\nArgs:\n    request: Resolution request with URI and mode\n    workspace: Current workspace from auth context\n\nReturns:\n    OCXPResolution with resolved paths and existence check\n\nRaises:\n    HTTPException: If URI format is invalid or content type is unknown",
        "operationId": "resolveOcxpUri",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OCXPResolveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OCXPResolution"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/resolution/validate": {
      "post": {
        "tags": [
          "OCXP Resolution",
          "OCXP Resolution"
        ],
        "summary": "Validate Ocxp Uri",
        "description": "Validate OCXP URI format and content type.\n\nArgs:\n    request: Validation request with URI\n\nReturns:\n    OCXPValidateResponse with validation result",
        "operationId": "validateOcxpUri",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OCXPValidateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OCXPValidateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/resolution/batch": {
      "post": {
        "tags": [
          "OCXP Resolution",
          "OCXP Resolution"
        ],
        "summary": "Batch Resolve Ocxp Uris",
        "description": "Batch resolve multiple OCXP URIs in a single request.\n\nArgs:\n    request: Batch resolution request with list of URIs\n    workspace: Current workspace from auth context\n\nReturns:\n    OCXPBatchResolveResponse with results and errors",
        "operationId": "batchResolveOcxpUris",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OCXPBatchResolveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OCXPBatchResolveResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/bulk/read": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Read Content",
        "description": "Bulk read content.",
        "operationId": "bulkReadContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkReadRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkReadResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/bulk/write": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Write Content",
        "description": "Bulk write content with metadata sidecar and KB auto-indexing support.",
        "operationId": "bulkWriteContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkWriteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkWriteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/bulk/delete": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Delete Content",
        "description": "Bulk delete content with KB auto-removal support.",
        "operationId": "bulkDeleteContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkDeleteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkDeleteResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/bulk/move": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Move Content",
        "description": "Bulk move (copy + delete) content.\n\nPerforms batch copy followed by batch delete for efficiency.\nIndividual item failures are reported in results.",
        "operationId": "bulkMoveContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkMoveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkMoveResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/admin/metadata/regenerate": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Regenerate metadata for S3 documents",
        "description": "Regenerates Bedrock KB metadata sidecars for existing S3 documents.\n\n    Use cases:\n    - After schema changes (e.g., adding new metadata fields)\n    - Fixing incorrect metadata from previous versions\n    - Bulk metadata updates for a workspace or project\n\n    Background processing:\n    - If max_files is None or > 1000, job is queued for background processing\n    - Use job_id to check status via /admin/jobs/{job_id} endpoint\n\n    Dry run mode:\n    - Shows what would change without updating S3\n    - Useful for validating changes before applying",
        "operationId": "regenerateMetadata",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegenerateMetadataRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Metadata regeneration completed or queued",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegenerateMetadataResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request parameters"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/admin/health": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Health check",
        "description": "Check system health and component status",
        "operationId": "healthCheck",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthCheckResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/admin/info": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "System information",
        "description": "Get system configuration and runtime information",
        "operationId": "systemInfo",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/discover": {
      "post": {
        "tags": [
          "Context Discovery"
        ],
        "summary": "Discover Context",
        "description": "Discover relevant context using smart strategy selection.\n\nOCXP automatically selects the best retrieval strategy:\n- **Semantic search** (default): Fast vector similarity search\n- **RAG with LLM answer**: When `include_answer=True`\n- **Hybrid search**: When `search_type=HYBRID`\n\nThe response includes:\n- **results**: Ranked context snippets with scores\n- **answer**: LLM-generated answer (only if include_answer=True)\n- **strategy_used**: Which strategy was applied\n- **reranked**: Whether results were quality-reranked\n\n**Replaces:**\n- `POST /ocxp/kb/query` - Use this with default options\n- `POST /ocxp/kb/rag` - Use this with `include_answer=True`\n\n**Example Request:**\n```json\n{\n    \"query\": \"How does authentication work?\",\n    \"options\": {\n        \"content_type\": \"code\",\n        \"project\": \"brain\",\n        \"include_answer\": true,\n        \"max_results\": 5\n    }\n}\n```",
        "operationId": "discoverContext",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DiscoverRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscoverResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/validate": {
      "post": {
        "tags": [
          "Context Discovery"
        ],
        "summary": "Validate Response",
        "description": "Validate AI response against context.\n\nChecks for:\n- **Hallucination**: Claims not supported by context\n- **Outdated**: References to stale information\n- **Incomplete**: Missing key context\n- **Contradiction**: Conflicts with source context\n\nThe response includes:\n- **valid**: True if no high-severity issues found\n- **confidence**: Confidence in validation (0.0 - 1.0)\n- **quality_score**: Overall quality score (0.0 - 1.0)\n- **issues**: List of specific issues found\n- **verified_claims**: Number of claims verified against context\n- **unverified_claims**: Number of claims that couldn't be verified\n\n**Example Request:**\n```json\n{\n    \"response\": \"The authentication uses JWT tokens with a 1-hour expiry.\",\n    \"context_ids\": [\"kb-0\", \"kb-1\", \"kb-2\"],\n    \"query\": \"How does authentication work?\",\n    \"strict_mode\": false\n}\n```\n\n**Example Response:**\n```json\n{\n    \"valid\": true,\n    \"confidence\": 0.85,\n    \"quality_score\": 0.9,\n    \"issues\": [],\n    \"verified_claims\": 5,\n    \"unverified_claims\": 1\n}\n```",
        "operationId": "validateResponse",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/ingest": {
      "post": {
        "tags": [
          "Context Discovery"
        ],
        "summary": "Ingest Documents",
        "description": "Ingest documents directly into Bedrock KB.\n\nTriggers immediate indexing of specific documents that already exist in S3.\nDocuments are batched (max 25 per API call) for efficiency.\n\n**Prerequisites:**\n- Documents must already be written to S3 via OCXP content API\n- Each document should have a `.metadata.json` sidecar for filtering\n\n**Use Case:**\nCalled from Obsidian plugin when user clicks \"Index Now\" button\nto immediately index pending files instead of waiting for 5-min sync.\n\n**Example Request:**\n```json\n{\n    \"documents\": [\n        {\"path\": \"project/uuid/auth.md\"},\n        {\"path\": \"project/uuid/flows/login.md\"}\n    ]\n}\n```\n\n**Example Response:**\n```json\n{\n    \"indexed\": 2,\n    \"failed\": 0,\n    \"skipped\": 0,\n    \"results\": [\n        {\"path\": \"project/uuid/auth.md\", \"status\": \"indexed\"},\n        {\"path\": \"project/uuid/flows/login.md\", \"status\": \"indexed\"}\n    ]\n}\n```",
        "operationId": "ingestDocuments",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IngestRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IngestResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/visual/analyse": {
      "post": {
        "tags": [
          "Visual Analysis"
        ],
        "summary": "Analyse Visual Content",
        "description": "Analyze visual content using direct vision model (Claude 3 Sonnet).\n\nTwo modes:\n1. **Direct paths**: Provide `image_paths` to analyze specific images\n2. **Search + analyze**: Provide `search_query` to find relevant images first\n\nThe endpoint:\n- Loads images from S3 (contexthub-visual bucket)\n- Sends them to Claude 3 Sonnet vision model\n- Returns AI analysis based on actual image content\n\n**Why Two Stages?**\n\nThe Visual KB uses text embeddings (Titan Text V2), NOT image embeddings.\nThis means KB search can only find images by metadata (descriptions, tags, filenames),\nnot by visual similarity or content. This endpoint provides the second stage:\nonce you have image paths (from discover_visual or directly), analyze the actual pixels.\n\n**Example Request (direct paths):**\n```json\n{\n    \"question\": \"What UI patterns are shown in these screenshots?\",\n    \"image_paths\": [\n        \"screenshots/mission-123/login.png\",\n        \"screenshots/mission-123/dashboard.png\"\n    ],\n    \"max_images\": 5\n}\n```\n\n**Example Request (search + analyze):**\n```json\n{\n    \"question\": \"What authentication methods are visible?\",\n    \"search_query\": \"login authentication forms\",\n    \"max_images\": 5,\n    \"mission_id\": \"abc-123\"\n}\n```\n\n**Example Response:**\n```json\n{\n    \"answer\": \"The screenshots show a login page with email/password fields and a 'Remember me' checkbox. The dashboard includes a navigation sidebar with user profile section...\",\n    \"images_analyzed\": [\n        {\n            \"s3_path\": \"workspaces/prod/visual/screenshots/mission-123/login.png\",\n            \"ocxp_link\": \"ocxp://prod/visual/screenshots/mission-123/login.png\",\n            \"analyzed\": true\n        },\n        {\n            \"s3_path\": \"workspaces/prod/visual/screenshots/mission-123/dashboard.png\",\n            \"ocxp_link\": \"ocxp://prod/visual/screenshots/mission-123/dashboard.png\",\n            \"analyzed\": true\n        }\n    ],\n    \"total_images\": 2,\n    \"model_used\": \"anthropic.claude-3-sonnet-20240229-v1:0\",\n    \"mission_id\": \"abc-123\"\n}\n```\n\n**Image Path Formats:**\n- Relative: `screenshots/mission-123/login.png` -> auto-prefixed with workspace\n- Visual prefix: `visual/screenshots/...` -> auto-prefixed with workspace\n- Full S3 key: `workspaces/prod/visual/screenshots/...` -> used as-is\n\n**Supported Image Formats:**\n- PNG, JPEG, GIF, WebP\n- Auto-detected from file extension or magic bytes",
        "operationId": "analyseVisualContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VisualAnalyseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VisualAnalyseResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/list": {
      "get": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "List Prototype Chats",
        "description": "List all accessible prototype chats.\n\nReturns a list of chats that are accessible with the configured API key.\nUse this to discover which chats can be linked to missions.\n\n**Query Parameters:**\n- `provider`: Provider name (v0, lovable, bolt) - default: v0\n\n**Example Response:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chats\": [\n        {\n            \"id\": \"qFPCm5zzimu\",\n            \"name\": \"Mission Dashboard\",\n            \"web_url\": \"https://v0.app/chat/qFPCm5zzimu\",\n            \"privacy\": \"team\",\n            \"latest_preview_url\": \"https://demo-xxx.vusercontent.net\"\n        }\n    ],\n    \"total\": 5\n}\n```",
        "operationId": "listPrototypeChats",
        "parameters": [
          {
            "name": "provider",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "v0",
              "title": "Provider"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/preview": {
      "post": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Preview Prototype Chat",
        "description": "Preview a prototype chat before linking.\n\nFetches chat metadata and version list without storing anything.\nUse this to show available versions in Obsidian UI before the user\nselects which version to link to a mission.\n\n**Example Request:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_url\": \"https://v0.dev/chat/abc123\"\n}\n```\n\n**Example Response:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"abc123\",\n    \"web_url\": \"https://v0.dev/chat/abc123\",\n    \"messages_count\": 15,\n    \"versions\": [\n        {\"id\": \"v1\", \"preview_url\": \"https://abc123.vercel.app\", \"files\": [\"page.tsx\", \"layout.tsx\"]},\n        {\"id\": \"v2\", \"preview_url\": \"https://abc123-v2.vercel.app\", \"files\": [\"page.tsx\", \"layout.tsx\", \"sidebar.tsx\"]}\n    ],\n    \"latest_preview_url\": \"https://abc123-v2.vercel.app\",\n    \"can_download_files\": true\n}\n```",
        "operationId": "previewPrototypeChat",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrototypeChatPreviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatPreviewResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/link": {
      "post": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Link Prototype Chat",
        "description": "Link a prototype chat to a mission.\n\nFetches the full conversation history and optionally downloads version files\nfrom the prototype provider (v0, Lovable, Bolt). Stores everything in OCXP\nand optionally screenshots the preview.\n\n**Workflow for Obsidian:**\n1. User enters chat URL in mission creation form\n2. Obsidian calls `/preview` to get available versions\n3. User selects a version\n4. Obsidian calls `/link` with version_id to download files\n\n**What gets stored:**\n- `conversation.md` - Full chat history as searchable markdown (KB indexed)\n- `metadata.json` - Structured metadata for programmatic access\n- `versions/{version_id}/*.tsx` - Actual code files from selected version\n- `screenshots/preview.png` - Screenshot of the preview URL\n\n**Example Request:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_url\": \"https://v0.dev/chat/abc123\",\n    \"version_id\": \"v2\",\n    \"mission_id\": \"mission-xyz\",\n    \"download_files\": true,\n    \"screenshot_preview\": true\n}\n```\n\n**Example Response:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"abc123\",\n    \"web_url\": \"https://v0.dev/chat/abc123\",\n    \"mission_id\": \"mission-xyz\",\n    \"messages_count\": 15,\n    \"versions_count\": 2,\n    \"latest_preview_url\": \"https://abc123-v2.vercel.app\",\n    \"screenshot_link\": \"ocxp://prod/visual/prototype-chats/mission-xyz/v0/abc123/screenshots/preview.png\",\n    \"content_links\": [\n        \"ocxp://prod/visual/prototype-chats/mission-xyz/v0/abc123/conversation.md\",\n        \"ocxp://prod/visual/prototype-chats/mission-xyz/v0/abc123/versions/v2/page.tsx\"\n    ],\n    \"indexed\": true\n}\n```",
        "operationId": "linkPrototypeChat",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrototypeChatLinkRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatLinkResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/sync": {
      "post": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Sync Prototype Chat",
        "description": "Sync/refresh a linked prototype chat with latest changes.\n\nRe-fetches the conversation and version data from the provider\nand updates the stored content in OCXP.\n\n**Example Request:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"abc123\",\n    \"mission_id\": \"mission-xyz\"\n}\n```",
        "operationId": "syncPrototypeChat",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrototypeChatSyncRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatSyncResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/{provider}/{chat_id}/stored-versions": {
      "get": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Get Stored Versions",
        "description": "Get stored version IDs from DynamoDB (fast, no S3/API calls).\n\nThis is a lightweight endpoint optimized for sub-100ms response times.\nUse this to quickly check which versions are already downloaded without\ntriggering a full sync operation.\n\n**Path Parameters:**\n- `provider`: Provider name (v0, lovable, bolt)\n- `chat_id`: Chat ID\n\n**Query Parameters:**\n- `include_details`: If true, returns full version metadata (files, pages, screenshots)\n\n**Use Cases:**\n- Determine \"Download\" vs \"Reload\" button state for each version\n- Check if \"Sync Latest\" button should be disabled (latest already stored)\n- Get full version details for Files/Pages tabs (when include_details=true)\n\n**Example Response (include_details=false):**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"YivecgytPyg\",\n    \"stored_versions\": [\"aVVgJPrZiiE\", \"8xP0kUQqTxe\", \"cTeBCcjCGbM\"],\n    \"latest_version_id\": \"cTeBCcjCGbM\",\n    \"version_details\": []\n}\n```\n\n**Example Response (include_details=true):**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"YivecgytPyg\",\n    \"stored_versions\": [\"aVVgJPrZiiE\"],\n    \"latest_version_id\": \"cTeBCcjCGbM\",\n    \"version_details\": [\n        {\n            \"id\": \"aVVgJPrZiiE\",\n            \"preview_url\": \"https://demo.vusercontent.net/...\",\n            \"screenshot_link\": \"ocxp://...\",\n            \"files\": [\"app/page.tsx\", \"app/layout.tsx\"],\n            \"pages\": [{\"route\": \"/\", \"file\": \"app/page.tsx\", \"screenshot_link\": \"ocxp://...\"}],\n            \"created_at\": \"2024-01-15T10:30:00Z\",\n            \"synced_at\": \"2024-01-15T10:35:00Z\"\n        }\n    ]\n}\n```",
        "operationId": "getStoredVersions",
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Provider"
            }
          },
          {
            "name": "chat_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Chat Id"
            }
          },
          {
            "name": "include_details",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Details"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeStoredVersionsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/{provider}/{chat_id}": {
      "get": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Get Prototype Chat",
        "description": "Get stored prototype chat data from OCXP.\n\nReturns the stored conversation, versions, and file links for a\npreviously linked prototype chat.\n\n**Path Parameters:**\n- `provider`: Provider name (v0, lovable, bolt)\n- `chat_id`: Chat ID\n\n**Query Parameters:**\n- `project_id`: Project ID (use \"no-project\" if chat has no project)\n- `version_id`: Version ID to retrieve\n\n**Example Response:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"abc123\",\n    \"web_url\": \"https://v0.dev/chat/abc123\",\n    \"mission_id\": \"mission-xyz\",\n    \"messages\": [...],\n    \"versions\": [...],\n    \"conversation_link\": \"ocxp://prod/prototype/FQV1NSmpVqk/abc123/aVVgJPrZiiE/docs/conversation.md\",\n    \"file_links\": [\n        \"ocxp://prod/prototype/FQV1NSmpVqk/abc123/aVVgJPrZiiE/code/page.tsx\"\n    ]\n}\n```",
        "operationId": "getPrototypeChat",
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Provider"
            }
          },
          {
            "name": "chat_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Chat Id"
            }
          },
          {
            "name": "project_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Project Id"
            }
          },
          {
            "name": "version_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Version Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatGetResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/sync-async": {
      "post": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Sync Prototype Chat Async",
        "description": "Start an async prototype chat sync job (202 Accepted).\n\nCreates a job and queues it for background processing. Returns immediately\nwith a job_id that can be used to poll for status or receive WebSocket updates.\n\n**Benefits:**\n- Immediate response (no timeout on long syncs)\n- Real-time progress updates via WebSocket\n- Resumable on failure (job tracked in DynamoDB)\n- Better suited for large chats with many files/screenshots\n\n**Frontend Integration:**\n\nOption 1: Polling\n```javascript\nconst { job_id } = await fetch('/ocxp/prototype/chat/sync-async', {\n  method: 'POST',\n  body: JSON.stringify({ chat_id: 'xxx', mission_id: 'yyy' })\n}).then(r => r.json());\n\n// Poll every second\nwhile (status !== 'complete' && status !== 'failed') {\n  await sleep(1000);\n  const job = await fetch(`/ocxp/prototype/chat/sync-status/${job_id}`).then(r => r.json());\n  updateProgressBar(job.progress);\n}\n```\n\nOption 2: WebSocket\n```javascript\nws.onmessage = (msg) => {\n  if (msg.type === 'prototype_sync_progress') {\n    updateProgressBar(msg.progress, msg.current_step);\n  }\n  if (msg.type === 'prototype_sync_complete') {\n    handleComplete(msg.content_links);\n  }\n};\n```\n\n**Example Request:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"YivecgytPyg\",\n    \"mission_id\": \"mission-xyz\",\n    \"download_files\": true,\n    \"download_screenshots\": true\n}\n```\n\n**Example Response (202 Accepted):**\n```json\n{\n    \"job_id\": \"job-a1b2c3d4e5f6\",\n    \"status\": \"queued\",\n    \"message\": \"Job queued for processing\"\n}\n```",
        "operationId": "syncPrototypeChatAsync",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrototypeChatSyncAsyncRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatSyncAsyncResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/sync-status/{job_id}": {
      "get": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Get Sync Status",
        "description": "Get the current status of an async sync job.\n\nUse this endpoint to poll for progress updates on a sync job.\nFor real-time updates, prefer WebSocket subscription instead.\n\n**Path Parameters:**\n- `job_id`: Job identifier from sync-async response\n\n**Example Response (in progress):**\n```json\n{\n    \"job_id\": \"job-a1b2c3d4e5f6\",\n    \"status\": \"downloading\",\n    \"progress\": 35,\n    \"current_step\": \"Downloading files for version 2/5...\",\n    \"files_processed\": 12,\n    \"files_total\": 34,\n    \"screenshots_processed\": 1,\n    \"screenshots_total\": 5,\n    \"content_links\": [],\n    \"error\": null,\n    \"created_at\": \"2024-01-15T10:30:00Z\",\n    \"updated_at\": \"2024-01-15T10:30:15Z\"\n}\n```\n\n**Example Response (complete):**\n```json\n{\n    \"job_id\": \"job-a1b2c3d4e5f6\",\n    \"status\": \"complete\",\n    \"progress\": 100,\n    \"current_step\": \"Complete\",\n    \"files_processed\": 34,\n    \"files_total\": 34,\n    \"screenshots_processed\": 5,\n    \"screenshots_total\": 5,\n    \"content_links\": [\n        \"ocxp://prod/prototype/FQV1NSmpVqk/chat123/v1/docs/conversation.md\",\n        \"ocxp://prod/prototype/FQV1NSmpVqk/chat123/v1/code/page.tsx\"\n    ],\n    \"error\": null,\n    \"created_at\": \"2024-01-15T10:30:00Z\",\n    \"updated_at\": \"2024-01-15T10:31:00Z\"\n}\n```",
        "operationId": "getSyncStatus",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeSyncJobStatusResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session": {
      "get": {
        "tags": [
          "Session"
        ],
        "summary": "List all sessions",
        "description": "Returns sessions for the workspace filtered by status. Uses AgentCore Memory when available for fast retrieval. Ordered by most recently updated.",
        "operationId": "listSessions",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of sessions to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum number of sessions to return"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Filter by status: active, archived",
              "default": "active",
              "title": "Status"
            },
            "description": "Filter by status: active, archived"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of sessions returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Create session",
        "description": "Creates a new session linked to a mission in DynamoDB. Used by Brain to establish session-mission relationship.",
        "operationId": "createSession",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSessionRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Session created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionResponse"
                }
              }
            }
          },
          "409": {
            "description": "Session already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/messages": {
      "get": {
        "tags": [
          "Session"
        ],
        "summary": "Get session messages",
        "description": "Loads message history for a session from S3 storage.",
        "operationId": "getSessionMessages",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum number of messages to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of messages to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Messages returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionMessagesResponse"
                }
              }
            }
          },
          "404": {
            "description": "Session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/metadata": {
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Update session metadata",
        "description": "Updates session title and message count. Creates session if it does not exist.",
        "operationId": "updateSessionMetadata",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SessionMetadataUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session metadata updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/fork": {
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Fork session",
        "description": "Creates a new session branched from an existing one at a specified message point.",
        "operationId": "forkSession",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForkRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Session forked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionForkResponse"
                }
              }
            }
          },
          "404": {
            "description": "Parent session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/archive": {
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Archive session",
        "description": "Soft deletes a session by changing its status to archived.",
        "operationId": "archiveSession",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session archived successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Session not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/missions/{mission_id}/checkpoints": {
      "get": {
        "tags": [
          "Checkpoint"
        ],
        "summary": "List mission checkpoints",
        "description": "Returns all checkpoints for a mission from AgentCore Memory, optionally filtered by branch",
        "operationId": "listMissionCheckpoints",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "branch",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by branch name",
              "title": "Branch"
            },
            "description": "Filter by branch name"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of checkpoints returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CheckpointListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/checkpoints/{checkpoint_id}": {
      "get": {
        "tags": [
          "Checkpoint"
        ],
        "summary": "Get checkpoint details",
        "description": "Returns detailed checkpoint information including metadata",
        "operationId": "getCheckpoint",
        "parameters": [
          {
            "name": "checkpoint_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Checkpoint ID",
              "title": "Checkpoint Id"
            },
            "description": "Checkpoint ID"
          },
          {
            "name": "mission_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Checkpoint details returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CheckpointResponse"
                }
              }
            }
          },
          "404": {
            "description": "Checkpoint not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/missions/{mission_id}/checkpoints/branches": {
      "get": {
        "tags": [
          "Checkpoint"
        ],
        "summary": "List checkpoint branches",
        "description": "Returns all branches for a mission",
        "operationId": "listMissionBranches",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of branch names returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BranchListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/checkpoints/{checkpoint_id}/export": {
      "post": {
        "tags": [
          "Checkpoint"
        ],
        "summary": "Export checkpoint as SOP markdown",
        "description": "Export checkpoint data as a Standard Operating Procedure .md file",
        "operationId": "exportCheckpointAsSop",
        "parameters": [
          {
            "name": "checkpoint_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Checkpoint event ID",
              "title": "Checkpoint Id"
            },
            "description": "Checkpoint event ID"
          },
          {
            "name": "mission_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Markdown file generated successfully",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Checkpoint not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/checkpoints/{checkpoint_id}/promote": {
      "post": {
        "tags": [
          "Checkpoint"
        ],
        "summary": "Promote checkpoint to long-term memory",
        "description": "Convert checkpoint event to long-term memory record for permanent storage",
        "operationId": "promoteCheckpointToLongterm",
        "parameters": [
          {
            "name": "checkpoint_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Checkpoint event ID",
              "title": "Checkpoint Id"
            },
            "description": "Checkpoint event ID"
          },
          {
            "name": "mission_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Checkpoint promoted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Checkpoint not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "List all projects",
        "description": "Returns all projects in the workspace with their linked repos and missions.",
        "operationId": "listProjects",
        "parameters": [
          {
            "name": "project_ids",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by specific project IDs",
              "title": "Project Ids"
            },
            "description": "Filter by specific project IDs"
          },
          {
            "name": "include_metadata",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include full metadata (description, repos, databases)",
              "default": false,
              "title": "Include Metadata"
            },
            "description": "Include full metadata (description, repos, databases)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of projects to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of projects to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of projects returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Create a new project",
        "description": "Creates a project with auto-generated UUID. Projects link repos, missions, and sessions for context scoping.",
        "operationId": "createProject",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Project created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/list": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "List all projects (alias)",
        "description": "Alias for GET /ocxp/project. Returns all projects in the workspace.",
        "operationId": "listProjectsAlias",
        "parameters": [
          {
            "name": "project_ids",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by specific project IDs",
              "title": "Project Ids"
            },
            "description": "Filter by specific project IDs"
          },
          {
            "name": "include_metadata",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include full metadata (description, repos, databases)",
              "default": false,
              "title": "Include Metadata"
            },
            "description": "Include full metadata (description, repos, databases)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of projects to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of projects to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of projects returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get project details",
        "description": "Returns full project details including linked repos, missions, and metadata.",
        "operationId": "getProject",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Project found and returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Project"
        ],
        "summary": "Update project",
        "description": "Updates project name and/or description. Only provided fields are updated.",
        "operationId": "updateProject",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Project updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Delete project",
        "description": "Permanently deletes a project and its metadata. Linked repos are not deleted.",
        "operationId": "deleteProject",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Project deleted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/repos": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Link repository to project",
        "description": "Links a repository to the project with category, priority, and auto-include settings for KB queries.",
        "operationId": "addLinkedRepo",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddRepoRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Repository linked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/repos/{repo_id}": {
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Unlink repository from project",
        "description": "Removes a repository link from the project. The repository itself is not deleted.",
        "operationId": "removeLinkedRepo",
        "parameters": [
          {
            "name": "repo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Repo Id"
            }
          },
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Repository unlinked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/default-repo": {
      "put": {
        "tags": [
          "Project"
        ],
        "summary": "Set default repository",
        "description": "Sets the default repository for the project. Used for integration and primary context.",
        "operationId": "setDefaultRepo",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetDefaultRepoRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Default repository set successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/context-repos": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get context repositories",
        "description": "Returns all repositories marked for auto-include in KB queries.",
        "operationId": "getContextRepos",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Context repositories returned",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/missions": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Add mission to project",
        "description": "Associates a mission with the project for context grouping.",
        "operationId": "addMission",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddMissionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mission added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/missions/{mission_id}": {
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Remove mission from project",
        "description": "Removes the mission association from the project. The mission itself is not deleted.",
        "operationId": "removeMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mission removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/databases": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Link database to project",
        "description": "Links a database configuration to the project for agent context.",
        "operationId": "addDatabase",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddDatabaseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Database linked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get project databases",
        "description": "Returns all databases linked to the project.",
        "operationId": "getProjectDatabases",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database list returned",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/databases/{database_id}": {
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Unlink database from project",
        "description": "Removes a database link from the project. The database config is not deleted.",
        "operationId": "removeDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database unlinked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/default-database": {
      "put": {
        "tags": [
          "Project"
        ],
        "summary": "Set default database",
        "description": "Sets the default database for the project. Used when no specific database_id is provided.",
        "operationId": "setDefaultDatabase",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetDefaultDatabaseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Default database set successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission": {
      "get": {
        "tags": [
          "Mission"
        ],
        "summary": "List all missions",
        "description": "Returns all missions in the workspace, optionally filtered by project or mission IDs.",
        "operationId": "listMissions",
        "parameters": [
          {
            "name": "project_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by project ID",
              "title": "Project Id"
            },
            "description": "Filter by project ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "mission_ids",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by specific mission IDs",
              "title": "Mission Ids"
            },
            "description": "Filter by specific mission IDs"
          },
          {
            "name": "include_metadata",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include full metadata (description, notes, goals)",
              "default": false,
              "title": "Include Metadata"
            },
            "description": "Include full metadata (description, notes, goals)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of missions to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of missions to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of missions returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Mission"
        ],
        "summary": "Create a new mission",
        "description": "Creates a mission with auto-generated UUID and context folder.",
        "operationId": "createMission",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mission created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}": {
      "get": {
        "tags": [
          "Mission"
        ],
        "summary": "Get mission details",
        "description": "Returns full mission details including status, progress, and linked sessions.",
        "operationId": "getMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mission found and returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Mission"
        ],
        "summary": "Update mission",
        "description": "Updates mission metadata. Only provided fields are updated.",
        "operationId": "updateMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mission updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Mission"
        ],
        "summary": "Delete mission",
        "description": "Permanently deletes a mission and its metadata.",
        "operationId": "deleteMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mission deleted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/sessions": {
      "post": {
        "tags": [
          "Mission"
        ],
        "summary": "Add session to mission",
        "description": "Associates a session with the mission.",
        "operationId": "addSession",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddSessionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/sessions/{session_id}": {
      "delete": {
        "tags": [
          "Mission"
        ],
        "summary": "Remove session from mission",
        "description": "Removes the session association from the mission. The session itself is not deleted.",
        "operationId": "removeSession",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/regenerate": {
      "post": {
        "tags": [
          "Mission"
        ],
        "summary": "Regenerate mission",
        "description": "Archives old generated docs and triggers AgentCore regeneration with updated ticket info.",
        "operationId": "regenerateMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegenerateMissionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Regeneration started successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegenerateMissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "500": {
            "description": "Archive or regeneration failed"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/download": {
      "get": {
        "tags": [
          "Mission",
          "mission"
        ],
        "summary": "Download mission pack as ZIP",
        "description": "Download complete mission as ZIP file.\n\nIncludes:\n- All mission files (PHASES.md, TASKS.md, README.md, documents/)\n- Mission metadata JSON\n- Preserves folder structure\n- Excludes archive/ folders",
        "operationId": "downloadMissionPack",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/kb/query": {
      "post": {
        "tags": [
          "KB"
        ],
        "summary": "Query Knowledge Base",
        "description": "DEPRECATED: Use POST /ocxp/context/discover instead.\n\nThis endpoint will be removed in v2.0. Migrate to the new unified interface.\n\nSemantic search with optional project scoping and external docs fallback.",
        "operationId": "queryKnowledgeBase",
        "deprecated": true,
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KBQueryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KBQueryResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/kb/rag": {
      "post": {
        "tags": [
          "KB"
        ],
        "summary": "Rag Knowledge Base",
        "description": "DEPRECATED: Use POST /ocxp/context/discover with include_answer=true instead.\n\nThis endpoint will be removed in v2.0. Migrate to the new unified interface.\n\nRAG query with LLM response and citations.",
        "operationId": "ragKnowledgeBase",
        "deprecated": true,
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RAGRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KBRagResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Create memo",
        "description": "Create a new memo (general or security finding).",
        "operationId": "createMemo",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMemoRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Memo created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Memo"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "get": {
        "tags": [
          "Security Memos"
        ],
        "summary": "List memos",
        "description": "List memos for the workspace with optional filters.",
        "operationId": "listMemos",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/MemoStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status (open, acknowledged, resolved, ignored)",
              "title": "Status"
            },
            "description": "Filter by status (open, acknowledged, resolved, ignored)"
          },
          {
            "name": "source_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/SourceType"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by source type (repo, project, mission, doc)",
              "title": "Source Type"
            },
            "description": "Filter by source type (repo, project, mission, doc)"
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/MemoCategory"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by category",
              "title": "Category"
            },
            "description": "Filter by category"
          },
          {
            "name": "severity",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/MemoSeverity"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by minimum severity",
              "title": "Severity"
            },
            "description": "Filter by minimum severity"
          },
          {
            "name": "mission_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by mission ID (extracts from mission source_id)",
              "title": "Mission Id"
            },
            "description": "Filter by mission ID (extracts from mission source_id)"
          },
          {
            "name": "project_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by project ID (matches project source_id)",
              "title": "Project Id"
            },
            "description": "Filter by project ID (matches project source_id)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum results",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of memos returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/{memo_id}": {
      "get": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Get memo by ID",
        "description": "Get a specific memo by its ID.",
        "operationId": "getMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memo returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Memo"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Delete memo",
        "description": "Delete a memo permanently.",
        "operationId": "deleteMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memo deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/source/{source_type}/{source_id}": {
      "get": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Get memo for source",
        "description": "Get memo for a specific source entity (repo, project, mission, doc).",
        "operationId": "getMemoForSource",
        "parameters": [
          {
            "name": "source_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Source type (repo, project, mission, doc)",
              "title": "Source Type"
            },
            "description": "Source type (repo, project, mission, doc)"
          },
          {
            "name": "source_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Source entity ID",
              "title": "Source Id"
            },
            "description": "Source entity ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memo returned or null if none exists",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/Memo"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "title": "Response Getmemoforsource"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/{memo_id}/resolve": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Resolve memo",
        "description": "Mark a memo as resolved. Sets TTL for auto-deletion.",
        "operationId": "resolveMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MemoResolveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Memo resolved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/{memo_id}/acknowledge": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Acknowledge memo",
        "description": "Mark a memo as acknowledged (developer has seen it).",
        "operationId": "acknowledgeMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memo acknowledged successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/{memo_id}/ignore": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Ignore memo",
        "description": "Mark a memo as ignored (false positive or accepted risk).",
        "operationId": "ignoreMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memo ignored successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/download": {
      "post": {
        "tags": [
          "Repo"
        ],
        "summary": "Start repository download",
        "description": "Initiates an async download of a Git repository. Returns a job ID for status tracking. If the repository already exists (deduplicated), returns immediately with status='linked'.",
        "operationId": "downloadRepository",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DownloadRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Download job started or linked to existing",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoDownloadResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid repository URL"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/status/{job_id}": {
      "get": {
        "tags": [
          "Repo"
        ],
        "summary": "Get download status",
        "description": "Returns the current status and progress of a repository download job.",
        "operationId": "getRepoDownloadStatus",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job status returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoStatusResponse"
                }
              }
            }
          },
          "404": {
            "description": "Job not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/list": {
      "get": {
        "tags": [
          "Repo"
        ],
        "summary": "List downloaded repositories",
        "description": "Returns all repositories that have been downloaded for the workspace.",
        "operationId": "listDownloadedRepos",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of repositories returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/{repo_id}": {
      "delete": {
        "tags": [
          "Repo"
        ],
        "summary": "Delete repository",
        "description": "Permanently deletes a downloaded repository. Uses repo_id (owner/repo format).",
        "operationId": "delete_repo",
        "parameters": [
          {
            "name": "repo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Repo Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Repository deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoDeleteResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/github/check-access": {
      "post": {
        "tags": [
          "GitHub"
        ],
        "summary": "Github Check Access",
        "description": "Check GitHub repository access.\n\nUses the user's stored GitHub token for private repository access.\nPublic repositories are accessible without a token.",
        "operationId": "githubCheckAccess",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CheckAccessRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/github/branches": {
      "post": {
        "tags": [
          "GitHub"
        ],
        "summary": "Github List Branches",
        "description": "List repository branches.\n\nUses the user's stored GitHub token for private repository access.",
        "operationId": "githubListBranches",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ListBranchesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/github/contents": {
      "post": {
        "tags": [
          "GitHub"
        ],
        "summary": "Github Get Contents",
        "description": "Get repository contents.\n\nUses the user's stored GitHub token for private repository access.",
        "operationId": "githubGetContents",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetContentsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "List all database configurations",
        "description": "Returns all database configurations in the workspace.",
        "operationId": "listDatabases",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of databases to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of databases to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of databases returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Create a new database configuration",
        "description": "Creates a database configuration with auto-generated UUID. Use postgres_lambda for Lambda-proxied connections.",
        "operationId": "createDatabase",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DatabaseCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Database created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseConfigResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database/list": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "List all database configurations (alias)",
        "description": "Alias for GET /ocxp/database. Returns all databases in the workspace.",
        "operationId": "listDatabasesAlias",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of databases to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of databases to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of databases returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database/{database_id}": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "Get database configuration details",
        "description": "Returns full database configuration including connection settings and allowed tables.",
        "operationId": "getDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database found and returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseConfigResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Database"
        ],
        "summary": "Update database configuration",
        "description": "Updates database configuration. Only provided fields are updated.",
        "operationId": "updateDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DatabaseUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Database updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseConfigResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Database"
        ],
        "summary": "Delete database configuration",
        "description": "Permanently deletes a database configuration.",
        "operationId": "deleteDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database deleted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database/{database_id}/test": {
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Test database connection",
        "description": "Tests the database connection and returns status.",
        "operationId": "testDatabaseConnection",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Connection test completed",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/schema": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "Get database schema",
        "description": "Returns database schema information including tables and their metadata.",
        "operationId": "getSchema",
        "parameters": [
          {
            "name": "pattern",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter tables by name pattern",
              "title": "Pattern"
            },
            "description": "Filter tables by name pattern"
          },
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Schema returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseSchemaResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/sample/{table_name}": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "Get sample data from table",
        "description": "Returns sample rows from a specified table.",
        "operationId": "getSample",
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of sample rows",
              "default": 5,
              "title": "Limit"
            },
            "description": "Number of sample rows"
          },
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sample data returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseSampleResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid table name"
          },
          "404": {
            "description": "Database or table not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/tables": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "List available tables",
        "description": "Returns list of tables available in the database. Supports caching.",
        "operationId": "listTables",
        "parameters": [
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "cache_ttl",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 3600,
              "minimum": 0,
              "description": "Cache TTL in seconds (0=no cache)",
              "default": 300,
              "title": "Cache Ttl"
            },
            "description": "Cache TTL in seconds (0=no cache)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Table list returned successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/databases": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "List configured databases",
        "description": "Returns list of database configurations available in the workspace.",
        "operationId": "listContextDatabases",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database list returned successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/overview": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "Get complete database overview",
        "description": "Returns complete database structure with tables, columns, and foreign keys in a single call. Supports caching.",
        "operationId": "getDatabaseOverview",
        "parameters": [
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "cache_ttl",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 3600,
              "minimum": 0,
              "description": "Cache TTL in seconds (0=no cache)",
              "default": 300,
              "title": "Cache Ttl"
            },
            "description": "Cache TTL in seconds (0=no cache)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database overview returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseOverviewResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/types": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Get content types",
        "description": "Returns all available content types (mission, context, repo, etc.) with optional item counts.",
        "operationId": "getContentTypes",
        "parameters": [
          {
            "name": "counts",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include item counts per type",
              "default": false,
              "title": "Counts"
            },
            "description": "Include item counts per type"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of content types returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentTypesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/list": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "List content",
        "description": "Lists all content items of a specific type, optionally filtered by path.",
        "operationId": "listContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by path prefix",
              "title": "Path"
            },
            "description": "Filter by path prefix"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum items to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum items to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Content list returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid content type"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/query": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Query content",
        "description": "Advanced query with filters on name, path, size, etc. Supports eq, ne, contains, startsWith, gt, lt operators.",
        "operationId": "queryContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QueryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Query results returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid filter or content type"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/search": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Search content",
        "description": "Full-text search in content names and paths. Case-insensitive.",
        "operationId": "searchContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Search query string",
              "title": "Q"
            },
            "description": "Search query string"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum results to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Search results returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/tree": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Get content tree",
        "description": "Returns hierarchical tree structure of content with configurable depth.",
        "operationId": "getContentTree",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Root path for tree",
              "title": "Path"
            },
            "description": "Root path for tree"
          },
          {
            "name": "depth",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 10,
              "minimum": 1,
              "description": "Maximum tree depth",
              "default": 3,
              "title": "Depth"
            },
            "description": "Maximum tree depth"
          },
          {
            "name": "includeVersions",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include S3 version IDs for files",
              "default": false,
              "title": "Includeversions"
            },
            "description": "Include S3 version IDs for files"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tree structure returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentTreeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/stats": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Get content statistics",
        "description": "Returns file counts and sizes grouped by extension for a content path.",
        "operationId": "getContentStats",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Path to analyze",
              "title": "Path"
            },
            "description": "Path to analyze"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Statistics returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentStatsResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/{content_id}/versions": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "List file versions",
        "description": "Lists all versions of a file. S3 versioning must be enabled on the bucket.",
        "operationId": "listVersions",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "max_versions",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum versions to return",
              "default": 100,
              "title": "Max Versions"
            },
            "description": "Maximum versions to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Version list returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VersionListResponse"
                }
              }
            }
          },
          "404": {
            "description": "Content not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/{content_id}": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Read content",
        "description": "Reads content by type and path. Binary files are base64-encoded. Use versionId param to read a specific version.",
        "operationId": "readContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "versionId",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "S3 version ID to read a specific version",
              "title": "Versionid"
            },
            "description": "S3 version ID to read a specific version"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Content returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentReadResponse"
                }
              }
            }
          },
          "404": {
            "description": "Content not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Write content",
        "description": "Writes content to storage. Supports ETag for optimistic locking and ifNotExists for creation-only.",
        "operationId": "writeContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WriteRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Content written successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentWriteResponse"
                }
              }
            }
          },
          "409": {
            "description": "Content already exists or ETag mismatch"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Context"
        ],
        "summary": "Delete content",
        "description": "Deletes content. Use recursive=true with confirm=true to delete directories.",
        "operationId": "deleteContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "recursive",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Delete directory recursively",
              "default": false,
              "title": "Recursive"
            },
            "description": "Delete directory recursively"
          },
          {
            "name": "confirm",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Confirm recursive deletion",
              "default": false,
              "title": "Confirm"
            },
            "description": "Confirm recursive deletion"
          },
          {
            "name": "manage_metadata",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Also delete .metadata.json sidecars",
              "default": true,
              "title": "Manage Metadata"
            },
            "description": "Also delete .metadata.json sidecars"
          },
          {
            "name": "auto_index",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Auto-remove from KB (None = use content_type default)",
              "title": "Auto Index"
            },
            "description": "Auto-remove from KB (None = use content_type default)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Content deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentDeleteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Recursive delete requires confirmation"
          },
          "404": {
            "description": "Content not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/folder/{folder_path}": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Create folder",
        "description": "Creates a folder with metadata.json for Bedrock KB indexing. The metadata.json serves as a folder marker (S3 doesn't have real folders) and provides KB-filterable attributes.",
        "operationId": "createFolder",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "folder_path",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Folder Path"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFolderRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Folder created with metadata.json",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentWriteResponse"
                }
              }
            }
          },
          "409": {
            "description": "Folder already exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/move": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Move content",
        "description": "Moves content from source to destination path. Use overwrite=true to replace existing.",
        "operationId": "moveContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MoveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Content moved successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Source not found"
          },
          "409": {
            "description": "Destination exists"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/lock": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Lock content",
        "description": "Acquires an exclusive lock on content for the specified TTL (seconds). Stub endpoint for SDK compatibility.",
        "operationId": "lockContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LockRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lock acquired",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/unlock": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Unlock content",
        "description": "Releases an exclusive lock on content. Stub endpoint for SDK compatibility.",
        "operationId": "unlockContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LockRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lock released",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/mission/create": {
      "post": {
        "tags": [
          "Tools"
        ],
        "summary": "Create a new mission",
        "description": "Creates a mission with optional project association and goals list.",
        "operationId": "toolCreateMission",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mission created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionCreateResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/mission/{mission_id}/update": {
      "post": {
        "tags": [
          "Tools"
        ],
        "summary": "Update mission status",
        "description": "Updates mission status, progress percentage, and/or notes.",
        "operationId": "toolUpdateMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mission updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionUpdateResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/mission/{mission_id}/context": {
      "get": {
        "tags": [
          "Tools"
        ],
        "summary": "Get mission context",
        "description": "Returns mission context data optimized for AI consumption.",
        "operationId": "getMissionContext",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Context returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionContextResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/token": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login For Access Token",
        "description": "OAuth2 compatible login endpoint for Swagger UI.\n\nAuthenticates with Cognito using username/password and returns JWT tokens.\nUse this endpoint to get a token for testing other endpoints in Swagger.\nReturns snake_case fields per OAuth2 spec for Swagger compatibility.",
        "operationId": "loginForAccessToken",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_loginForAccessToken"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OAuth2TokenResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login",
        "description": "JSON login endpoint for programmatic clients.\n\nAuthenticates with Cognito using username/password and returns JWT tokens.\nUse /auth/token for OAuth2 form-based login (Swagger UI).",
        "operationId": "login",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/refresh": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Refresh Tokens",
        "description": "Refresh access token using refresh token.\n\nReturns new access and ID tokens. The refresh token remains valid\nuntil it expires (configured in Cognito).",
        "operationId": "refreshTokens",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/config": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get Auth Config",
        "description": "Get public configuration for clients.\n\nReturns the API endpoint, Brain ARN, WebSocket endpoint, and default workspace.\nUsed by Obsidian plugin and CLI to configure themselves.",
        "operationId": "getAuthConfig",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthConfig"
                }
              }
            }
          }
        }
      }
    },
    "/auth/me": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get Current User",
        "description": "Get current authenticated user info.",
        "operationId": "getCurrentUser",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/workspaces": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "List Workspaces",
        "description": "List workspaces for authenticated user.",
        "operationId": "listWorkspaces",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkspacesResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/github-token": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get Github Token Status",
        "description": "Check if user has a GitHub token configured.\n\nReturns whether a token is stored and the associated GitHub username,\nbut never returns the actual token value.",
        "operationId": "getGithubTokenStatus",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GitHubTokenStatusResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Auth"
        ],
        "summary": "Set Github Token",
        "description": "Save user's GitHub token for server-side repository operations.\n\nThe token is stored securely in DynamoDB linked to the user's Cognito identity.\nThis enables GitHub operations without transmitting the token on every request.",
        "operationId": "setGithubToken",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GitHubTokenRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GitHubTokenSuccessResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Auth"
        ],
        "summary": "Delete Github Token",
        "description": "Remove user's stored GitHub token.\n\nDeletes the GitHub token from DynamoDB. The user will need to\nreconfigure their token for future GitHub operations.",
        "operationId": "deleteGithubToken",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GitHubTokenSuccessResponse"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "operationId": "healthCheck",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AddDatabaseRequest": {
        "properties": {
          "database_id": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Database Id",
            "description": "Database config ID (UUID or 'amc-default')"
          },
          "priority": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Priority",
            "description": "Priority weight for database selection",
            "default": 50
          },
          "auto_include": {
            "type": "boolean",
            "title": "Auto Include",
            "description": "Automatically include in agent context",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "database_id"
        ],
        "title": "AddDatabaseRequest"
      },
      "AddMissionRequest": {
        "properties": {
          "mission_id": {
            "type": "string",
            "minLength": 1,
            "title": "Mission Id"
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "AddMissionRequest"
      },
      "AddRepoRequest": {
        "properties": {
          "repo_id": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Repo Id"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "project|framework|tool|reference",
            "default": "project"
          },
          "priority": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Priority",
            "default": 50
          },
          "auto_include": {
            "type": "boolean",
            "title": "Auto Include",
            "default": true
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "default": "main"
          }
        },
        "type": "object",
        "required": [
          "repo_id"
        ],
        "title": "AddRepoRequest"
      },
      "AddSessionRequest": {
        "properties": {
          "session_id": {
            "type": "string",
            "minLength": 1,
            "title": "Session Id"
          }
        },
        "type": "object",
        "required": [
          "session_id"
        ],
        "title": "AddSessionRequest"
      },
      "AuthConfig": {
        "properties": {
          "region": {
            "type": "string",
            "title": "Region"
          },
          "apiEndpoint": {
            "type": "string",
            "title": "Apiendpoint"
          },
          "brainArn": {
            "type": "string",
            "title": "Brainarn"
          },
          "workspaceId": {
            "type": "string",
            "title": "Workspaceid",
            "default": "prod"
          },
          "websocketEndpoint": {
            "type": "string",
            "title": "Websocketendpoint",
            "default": ""
          }
        },
        "type": "object",
        "required": [
          "region",
          "apiEndpoint",
          "brainArn"
        ],
        "title": "AuthConfig",
        "description": "Public auth configuration for clients."
      },
      "Body_loginForAccessToken": {
        "properties": {
          "grant_type": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^password$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grant Type"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "format": "password",
            "title": "Password"
          },
          "scope": {
            "type": "string",
            "title": "Scope",
            "default": ""
          },
          "client_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Id"
          },
          "client_secret": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "format": "password",
            "title": "Client Secret"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "Body_loginForAccessToken"
      },
      "BranchListResponse": {
        "properties": {
          "branches": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Branches",
            "examples": [
              [
                "main",
                "alternative-research-path"
              ]
            ]
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "branches",
          "count"
        ],
        "title": "BranchListResponse",
        "description": "Response for GET /ocxp/missions/{id}/checkpoints/branches."
      },
      "BulkDeleteRequest": {
        "properties": {
          "ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Ids"
          },
          "manage_metadata": {
            "type": "boolean",
            "title": "Manage Metadata",
            "default": true
          },
          "auto_index": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Index"
          }
        },
        "type": "object",
        "required": [
          "ids"
        ],
        "title": "BulkDeleteRequest"
      },
      "BulkDeleteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkDeleteResponse",
        "description": "Response for POST /ocxp/{type}/bulk/delete."
      },
      "BulkItemResult": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "id",
          "success"
        ],
        "title": "BulkItemResult",
        "description": "Result for a single item in bulk operation."
      },
      "BulkMoveItem": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "dest_id": {
            "type": "string",
            "title": "Dest Id"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "dest_id"
        ],
        "title": "BulkMoveItem"
      },
      "BulkMoveItemResult": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "dest_id": {
            "type": "string",
            "title": "Dest Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "dest_id",
          "success"
        ],
        "title": "BulkMoveItemResult",
        "description": "Result for a single move operation in bulk move."
      },
      "BulkMoveRequest": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/BulkMoveItem"
            },
            "type": "array",
            "title": "Items"
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "BulkMoveRequest"
      },
      "BulkMoveResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkMoveItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkMoveResponse",
        "description": "Response for POST /ocxp/{type}/bulk/move."
      },
      "BulkReadRequest": {
        "properties": {
          "ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Ids"
          }
        },
        "type": "object",
        "required": [
          "ids"
        ],
        "title": "BulkReadRequest"
      },
      "BulkReadResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkReadResponse",
        "description": "Response for POST /ocxp/{type}/bulk/read."
      },
      "BulkWriteItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "content": {
            "type": "string",
            "title": "Content"
          }
        },
        "type": "object",
        "required": [
          "id",
          "content"
        ],
        "title": "BulkWriteItem"
      },
      "BulkWriteRequest": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/BulkWriteItem"
            },
            "type": "array",
            "title": "Items"
          },
          "manage_metadata": {
            "type": "boolean",
            "title": "Manage Metadata",
            "default": true
          },
          "auto_index": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Index"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id"
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "BulkWriteRequest"
      },
      "BulkWriteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkWriteResponse",
        "description": "Response for POST /ocxp/{type}/bulk/write."
      },
      "CheckAccessRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "CheckAccessRequest"
      },
      "CheckpointListResponse": {
        "properties": {
          "checkpoints": {
            "items": {
              "$ref": "#/components/schemas/CheckpointResponse"
            },
            "type": "array",
            "title": "Checkpoints"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "checkpoints",
          "count"
        ],
        "title": "CheckpointListResponse",
        "description": "Response for GET /ocxp/missions/{id}/checkpoints."
      },
      "CheckpointResponse": {
        "properties": {
          "checkpoint_id": {
            "type": "string",
            "title": "Checkpoint Id",
            "examples": [
              "checkpoint-research-research_complete"
            ]
          },
          "checkpoint_name": {
            "type": "string",
            "title": "Checkpoint Name",
            "examples": [
              "research_complete"
            ]
          },
          "phase": {
            "type": "string",
            "title": "Phase",
            "description": "Mission phase (research, sme_analysis, synthesis)",
            "examples": [
              "research"
            ]
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "examples": [
              "mission-001"
            ]
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "branch": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Branch",
            "description": "Branch name for forked execution paths",
            "examples": [
              "main",
              "alternative-research-path"
            ]
          },
          "findings_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Findings Count",
            "examples": [
              47
            ]
          },
          "confidence_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence Score",
            "examples": [
              0.85
            ]
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata"
          }
        },
        "type": "object",
        "required": [
          "checkpoint_id",
          "checkpoint_name",
          "phase",
          "mission_id",
          "timestamp"
        ],
        "title": "CheckpointResponse",
        "description": "Single checkpoint response."
      },
      "ColumnOverview": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "type": {
            "type": "string",
            "title": "Type"
          },
          "nullable": {
            "type": "boolean",
            "title": "Nullable"
          },
          "default": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": ""
          }
        },
        "type": "object",
        "required": [
          "name",
          "type",
          "nullable"
        ],
        "title": "ColumnOverview",
        "description": "Column information for database overview."
      },
      "ContentDeleteResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path"
          },
          "deleted": {
            "type": "boolean",
            "title": "Deleted",
            "default": true
          },
          "files_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Files Count"
          }
        },
        "type": "object",
        "required": [
          "path"
        ],
        "title": "ContentDeleteResponse",
        "description": "Response for DELETE /ocxp/{type}/{id}."
      },
      "ContentEntry": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "README.md"
            ]
          },
          "type": {
            "type": "string",
            "title": "Type",
            "description": "file or directory",
            "examples": [
              "file"
            ]
          },
          "path": {
            "type": "string",
            "title": "Path",
            "examples": [
              "docs/README.md"
            ]
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size",
            "examples": [
              1024
            ]
          },
          "mtime": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mtime",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          }
        },
        "type": "object",
        "required": [
          "name",
          "type",
          "path"
        ],
        "title": "ContentEntry",
        "description": "Single entry in a content listing."
      },
      "ContentListResponse": {
        "properties": {
          "entries": {
            "items": {
              "$ref": "#/components/schemas/ContentEntry"
            },
            "type": "array",
            "title": "Entries"
          },
          "cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cursor"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "default": false
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "entries",
          "total"
        ],
        "title": "ContentListResponse",
        "description": "Response for GET /ocxp/{type}/list."
      },
      "ContentReadResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path",
            "examples": [
              "mission/current.md"
            ]
          },
          "content": {
            "type": "string",
            "title": "Content",
            "examples": [
              "# Mission\n\nImplement feature X..."
            ]
          },
          "encoding": {
            "type": "string",
            "title": "Encoding",
            "default": "utf-8",
            "examples": [
              "utf-8",
              "base64"
            ]
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size",
            "examples": [
              256
            ]
          },
          "mtime": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mtime",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id",
            "description": "S3 version ID",
            "examples": [
              "abc123def456"
            ]
          },
          "is_latest": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Latest",
            "description": "Whether this is the latest version",
            "examples": [
              true
            ]
          }
        },
        "type": "object",
        "required": [
          "path",
          "content"
        ],
        "title": "ContentReadResponse",
        "description": "Response for GET /ocxp/{type}/{id}."
      },
      "ContentStatsResponse": {
        "properties": {
          "total_files": {
            "type": "integer",
            "title": "Total Files"
          },
          "total_size": {
            "type": "integer",
            "title": "Total Size"
          },
          "by_extension": {
            "additionalProperties": {
              "additionalProperties": {
                "type": "integer"
              },
              "type": "object"
            },
            "type": "object",
            "title": "By Extension"
          }
        },
        "type": "object",
        "required": [
          "total_files",
          "total_size",
          "by_extension"
        ],
        "title": "ContentStatsResponse",
        "description": "Response for GET /ocxp/{type}/stats."
      },
      "ContentTreeNode": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "path": {
            "type": "string",
            "title": "Path"
          },
          "type": {
            "type": "string",
            "title": "Type"
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id"
          },
          "children": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ContentTreeNode"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Children"
          },
          "truncated": {
            "type": "boolean",
            "title": "Truncated",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "name",
          "path",
          "type"
        ],
        "title": "ContentTreeNode",
        "description": "Tree node for hierarchical content view."
      },
      "ContentTreeResponse": {
        "properties": {
          "tree": {
            "$ref": "#/components/schemas/ContentTreeNode"
          }
        },
        "type": "object",
        "required": [
          "tree"
        ],
        "title": "ContentTreeResponse",
        "description": "Response for GET /ocxp/{type}/tree."
      },
      "ContentTypeInfo": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "mission"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "examples": [
              "Mission content"
            ]
          }
        },
        "type": "object",
        "required": [
          "name",
          "description"
        ],
        "title": "ContentTypeInfo",
        "description": "Content type metadata."
      },
      "ContentTypesResponse": {
        "properties": {
          "types": {
            "items": {
              "$ref": "#/components/schemas/ContentTypeInfo"
            },
            "type": "array",
            "title": "Types"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "types",
          "total"
        ],
        "title": "ContentTypesResponse",
        "description": "Response for GET /ocxp/types."
      },
      "ContentWriteResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path"
          },
          "type": {
            "type": "string",
            "title": "Type",
            "default": "file"
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size"
          },
          "etag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Etag"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id",
            "description": "S3 version ID of the written object",
            "examples": [
              "abc123def456"
            ]
          }
        },
        "type": "object",
        "required": [
          "path"
        ],
        "title": "ContentWriteResponse",
        "description": "Response for POST /ocxp/{type}/{id}."
      },
      "ContextResult": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique identifier for this result"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Content snippet (may be truncated)"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "Type of content: code, docs, mission, etc.",
            "examples": [
              "code",
              "docs"
            ]
          },
          "location": {
            "type": "string",
            "title": "Location",
            "description": "Source location (file path, URL, etc.)",
            "examples": [
              "src/auth/login.py:45"
            ]
          },
          "score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Score",
            "description": "Relevance score (0.0 - 1.0)"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type",
            "description": "Source type: kb, context7, aws_docs",
            "default": "kb",
            "examples": [
              "kb",
              "context7",
              "aws_docs"
            ]
          },
          "kb_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kb Source",
            "description": "Which KB returned this: code or docs",
            "examples": [
              "code",
              "docs"
            ]
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata",
            "description": "Additional metadata"
          }
        },
        "type": "object",
        "required": [
          "id",
          "content",
          "content_type",
          "location",
          "score"
        ],
        "title": "ContextResult",
        "description": "Single context result from discovery.\n\nContains content snippet, relevance score, and source metadata."
      },
      "CreateFolderRequest": {
        "properties": {
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": ""
          }
        },
        "type": "object",
        "title": "CreateFolderRequest",
        "description": "Request body for folder creation."
      },
      "CreateMemoRequest": {
        "properties": {
          "source_type": {
            "$ref": "#/components/schemas/SourceType"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id",
            "description": "Format: {mission_id}:v{version}:{file_path} for missions"
          },
          "workspace": {
            "type": "string",
            "title": "Workspace"
          },
          "content": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "category": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MemoCategory"
              },
              {
                "type": "null"
              }
            ]
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata"
          },
          "findings": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/SecurityFinding"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Findings"
          },
          "severity": {
            "$ref": "#/components/schemas/MemoSeverity",
            "default": "medium"
          }
        },
        "type": "object",
        "required": [
          "source_type",
          "source_id",
          "workspace"
        ],
        "title": "CreateMemoRequest",
        "description": "Request body for creating a new memo.",
        "example": {
          "category": "agent_warning",
          "content": "Consider adding rate limiting to the auth endpoint",
          "metadata": {
            "line_number": 42,
            "suggested_fix": "Add @rate_limit decorator"
          },
          "severity": "medium",
          "source_id": "proj-auth-system:v02:docs/architecture.md",
          "source_type": "mission",
          "workspace": "prod"
        }
      },
      "CreateSessionRequest": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "active"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "mission_id"
        ],
        "title": "CreateSessionRequest",
        "description": "Request body for POST /ocxp/session - create new session linked to mission."
      },
      "DatabaseConfigResponse": {
        "properties": {
          "database_id": {
            "type": "string",
            "title": "Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "Production DB"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": "",
            "examples": [
              "Main PostgreSQL database"
            ]
          },
          "db_type": {
            "type": "string",
            "title": "Db Type",
            "description": "postgres|postgres_lambda|mysql|mariadb",
            "examples": [
              "postgres_lambda"
            ]
          },
          "lambda_function_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Function Name",
            "examples": [
              "query_database"
            ]
          },
          "lambda_region": {
            "type": "string",
            "title": "Lambda Region",
            "default": "us-west-2",
            "examples": [
              "us-west-2"
            ]
          },
          "host": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Host",
            "examples": [
              "db.example.com"
            ]
          },
          "port": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Port",
            "examples": [
              5432
            ]
          },
          "database_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Name",
            "examples": [
              "myapp_prod"
            ]
          },
          "allowed_tables": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Allowed Tables",
            "examples": [
              [
                "users",
                "orders",
                "products"
              ]
            ]
          },
          "read_only": {
            "type": "boolean",
            "title": "Read Only",
            "default": true,
            "examples": [
              true
            ]
          },
          "max_rows": {
            "type": "integer",
            "maximum": 10000.0,
            "minimum": 1.0,
            "title": "Max Rows",
            "default": 100,
            "examples": [
              100
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "active|inactive|error",
            "default": "active",
            "examples": [
              "active"
            ]
          },
          "last_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "examples": [
              "Connection timeout"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          }
        },
        "type": "object",
        "required": [
          "database_id",
          "workspace",
          "name",
          "db_type"
        ],
        "title": "DatabaseConfigResponse",
        "description": "Full database configuration response."
      },
      "DatabaseCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name"
          },
          "description": {
            "type": "string",
            "maxLength": 2000,
            "title": "Description",
            "default": ""
          },
          "db_type": {
            "type": "string",
            "title": "Db Type",
            "description": "postgres|postgres_lambda|supabase|mysql|mariadb",
            "default": "postgres_lambda"
          },
          "lambda_function_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Function Name",
            "description": "Lambda function name for postgres_lambda type"
          },
          "lambda_region": {
            "type": "string",
            "title": "Lambda Region",
            "default": "us-west-2"
          },
          "secret_arn": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secret Arn",
            "description": "AWS Secrets Manager ARN for credentials"
          },
          "allowed_tables": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Allowed Tables"
          },
          "read_only": {
            "type": "boolean",
            "title": "Read Only",
            "default": true
          },
          "max_rows": {
            "type": "integer",
            "maximum": 10000.0,
            "minimum": 1.0,
            "title": "Max Rows",
            "default": 100
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "DatabaseCreate",
        "description": "Request body for creating a database config."
      },
      "DatabaseListResponse": {
        "properties": {
          "databases": {
            "items": {
              "$ref": "#/components/schemas/DatabaseConfigResponse"
            },
            "type": "array",
            "title": "Databases"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "databases",
          "count"
        ],
        "title": "DatabaseListResponse",
        "description": "Response for GET /ocxp/database."
      },
      "DatabaseOverviewResponse": {
        "properties": {
          "database_id": {
            "type": "string",
            "title": "Database Id"
          },
          "database_name": {
            "type": "string",
            "title": "Database Name"
          },
          "table_count": {
            "type": "integer",
            "title": "Table Count"
          },
          "tables": {
            "items": {
              "$ref": "#/components/schemas/TableOverview"
            },
            "type": "array",
            "title": "Tables"
          },
          "cached": {
            "type": "boolean",
            "title": "Cached",
            "default": false
          },
          "cache_expires_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cache Expires At"
          },
          "generated_at": {
            "type": "string",
            "title": "Generated At"
          },
          "query_time_ms": {
            "type": "number",
            "title": "Query Time Ms"
          }
        },
        "type": "object",
        "required": [
          "database_id",
          "database_name",
          "table_count",
          "tables",
          "generated_at",
          "query_time_ms"
        ],
        "title": "DatabaseOverviewResponse",
        "description": "Complete database overview with schema and metadata."
      },
      "DatabaseSampleResponse": {
        "properties": {
          "table_name": {
            "type": "string",
            "title": "Table Name",
            "examples": [
              "users"
            ]
          },
          "rows": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Rows"
          },
          "columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Columns"
          },
          "row_count": {
            "type": "integer",
            "title": "Row Count",
            "default": 0,
            "examples": [
              5
            ]
          },
          "database_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          }
        },
        "type": "object",
        "required": [
          "table_name"
        ],
        "title": "DatabaseSampleResponse",
        "description": "Response for GET /ocxp/context/database/sample/{table}."
      },
      "DatabaseSchemaResponse": {
        "properties": {
          "tables": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Tables"
          },
          "table_count": {
            "type": "integer",
            "title": "Table Count",
            "default": 0,
            "examples": [
              15
            ]
          },
          "database_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          }
        },
        "type": "object",
        "title": "DatabaseSchemaResponse",
        "description": "Response for GET /ocxp/context/database/schema."
      },
      "DatabaseUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "lambda_function_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Function Name"
          },
          "lambda_region": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Region"
          },
          "secret_arn": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secret Arn",
            "description": "AWS Secrets Manager ARN for credentials"
          },
          "allowed_tables": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allowed Tables"
          },
          "read_only": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Read Only"
          },
          "max_rows": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 10000.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Rows"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "active|inactive|error"
          }
        },
        "type": "object",
        "title": "DatabaseUpdate",
        "description": "Request body for updating a database config."
      },
      "DiscoverOptions": {
        "properties": {
          "content_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Type",
            "description": "Filter by type: code, docs, mission, etc.",
            "examples": [
              "code",
              "docs",
              "all"
            ]
          },
          "project": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project",
            "description": "Scope to project ID",
            "examples": [
              "my-project"
            ]
          },
          "mission": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission",
            "description": "Scope to mission ID",
            "examples": [
              "mission-abc123"
            ]
          },
          "session": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session",
            "description": "Scope to session ID",
            "examples": [
              "sess-xyz789"
            ]
          },
          "repos": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repos",
            "description": "Filter to specific repo IDs",
            "examples": [
              [
                "owner/repo1",
                "owner/repo2"
              ]
            ]
          },
          "doc_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Doc Id",
            "description": "Filter to specific document ID",
            "examples": [
              "strands-agents"
            ]
          },
          "include_answer": {
            "type": "boolean",
            "title": "Include Answer",
            "description": "If true, include RAG-generated answer using LLM",
            "default": false
          },
          "enable_fallback": {
            "type": "boolean",
            "title": "Enable Fallback",
            "description": "Enable external docs fallback when KB has no/low results",
            "default": true
          },
          "max_results": {
            "type": "integer",
            "maximum": 20.0,
            "minimum": 1.0,
            "title": "Max Results",
            "description": "Maximum results to return",
            "default": 5
          },
          "min_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Min Score",
            "description": "Minimum relevance score threshold",
            "default": 0.3
          },
          "search_type": {
            "type": "string",
            "pattern": "^(SEMANTIC|HYBRID)$",
            "title": "Search Type",
            "description": "Search type: SEMANTIC or HYBRID",
            "default": "SEMANTIC"
          },
          "enable_query_decomposition": {
            "type": "boolean",
            "title": "Enable Query Decomposition",
            "description": "Enable query decomposition for complex queries (improves recall)",
            "default": true
          }
        },
        "type": "object",
        "title": "DiscoverOptions",
        "description": "Options for context discovery.\n\nControls filtering, scoping, and behavior of the discover endpoint."
      },
      "DiscoverRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Query",
            "description": "Search query",
            "examples": [
              "How does authentication work?"
            ]
          },
          "options": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DiscoverOptions"
              },
              {
                "type": "null"
              }
            ],
            "description": "Discovery options for filtering and behavior"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "DiscoverRequest",
        "description": "Request for POST /ocxp/context/discover.\n\nUnified interface replacing /ocxp/kb/query and /ocxp/kb/rag.\nOCXP automatically selects the best strategy based on options."
      },
      "DiscoverResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/ContextResult"
            },
            "type": "array",
            "title": "Results",
            "description": "List of context results"
          },
          "answer": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Answer",
            "description": "RAG-generated answer (only if include_answer=True)"
          },
          "strategy_used": {
            "type": "string",
            "enum": [
              "semantic",
              "rag",
              "hybrid",
              "multi-kb-rag"
            ],
            "title": "Strategy Used",
            "description": "Strategy that was used for discovery"
          },
          "total_found": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Found",
            "description": "Total number of results found"
          },
          "reranked": {
            "type": "boolean",
            "title": "Reranked",
            "description": "Whether results were reranked for quality",
            "default": false
          },
          "fallback_triggered": {
            "type": "boolean",
            "title": "Fallback Triggered",
            "description": "Whether external docs fallback was triggered",
            "default": false
          },
          "fallback_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Source",
            "description": "External source used for fallback",
            "examples": [
              "context7",
              "aws_docs"
            ]
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session ID for RAG conversation continuity"
          },
          "citations": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Citations",
            "description": "Citations for RAG answer"
          }
        },
        "type": "object",
        "required": [
          "results",
          "strategy_used",
          "total_found"
        ],
        "title": "DiscoverResponse",
        "description": "Response from POST /ocxp/context/discover.\n\nContains search results and optional RAG-generated answer."
      },
      "DownloadRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          },
          "branch": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Branch"
          },
          "mode": {
            "type": "string",
            "title": "Mode",
            "default": "full"
          },
          "path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Path"
          },
          "repo_type": {
            "type": "string",
            "title": "Repo Type",
            "default": "auto"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "DownloadRequest"
      },
      "ForeignKeyInfo": {
        "properties": {
          "column": {
            "type": "string",
            "title": "Column"
          },
          "foreign_table": {
            "type": "string",
            "title": "Foreign Table"
          },
          "foreign_column": {
            "type": "string",
            "title": "Foreign Column"
          }
        },
        "type": "object",
        "required": [
          "column",
          "foreign_table",
          "foreign_column"
        ],
        "title": "ForeignKeyInfo",
        "description": "Foreign key relationship information."
      },
      "ForkRequest": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "fork_point": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fork Point"
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "ForkRequest"
      },
      "GetContentsRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          },
          "path": {
            "type": "string",
            "title": "Path",
            "default": ""
          },
          "ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ref"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "GetContentsRequest"
      },
      "GitHubTokenRequest": {
        "properties": {
          "github_token": {
            "type": "string",
            "minLength": 1,
            "title": "Github Token"
          }
        },
        "type": "object",
        "required": [
          "github_token"
        ],
        "title": "GitHubTokenRequest",
        "description": "Request to save GitHub token."
      },
      "GitHubTokenStatusResponse": {
        "properties": {
          "configured": {
            "type": "boolean",
            "title": "Configured"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "scopes": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scopes"
          }
        },
        "type": "object",
        "required": [
          "configured"
        ],
        "title": "GitHubTokenStatusResponse",
        "description": "GitHub token status response."
      },
      "GitHubTokenSuccessResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "GitHubTokenSuccessResponse",
        "description": "Success response for GitHub token operations."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthCheckResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Health status: healthy, degraded, unhealthy"
          },
          "checks": {
            "additionalProperties": true,
            "type": "object",
            "title": "Checks",
            "description": "Individual health checks"
          }
        },
        "type": "object",
        "required": [
          "status",
          "checks"
        ],
        "title": "HealthCheckResponse",
        "description": "Health check response."
      },
      "IngestDocument": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path",
            "description": "Content path, e.g., 'project/uuid/file.md'",
            "examples": [
              "project/1c3952a0-58a0-41b5-85aa-7a33496b96ab/auth.md"
            ]
          }
        },
        "type": "object",
        "required": [
          "path"
        ],
        "title": "IngestDocument",
        "description": "Single document to ingest into Bedrock KB."
      },
      "IngestRequest": {
        "properties": {
          "documents": {
            "items": {
              "$ref": "#/components/schemas/IngestDocument"
            },
            "type": "array",
            "maxItems": 100,
            "minItems": 1,
            "title": "Documents",
            "description": "List of documents to ingest (max 100, batched internally)"
          }
        },
        "type": "object",
        "required": [
          "documents"
        ],
        "title": "IngestRequest",
        "description": "Request for POST /ocxp/context/ingest.\n\nTriggers direct ingestion of specific documents into Bedrock KB.\nDocuments must already exist in S3 (written via OCXP content API)."
      },
      "IngestResponse": {
        "properties": {
          "indexed": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Indexed",
            "description": "Number of documents successfully indexed"
          },
          "failed": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Failed",
            "description": "Number of documents that failed to index",
            "default": 0
          },
          "skipped": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Skipped",
            "description": "Number of documents skipped",
            "default": 0
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/IngestResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-document results"
          }
        },
        "type": "object",
        "required": [
          "indexed"
        ],
        "title": "IngestResponse",
        "description": "Response from POST /ocxp/context/ingest.\n\nContains summary of ingestion results."
      },
      "IngestResult": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path",
            "description": "Document path"
          },
          "status": {
            "type": "string",
            "enum": [
              "indexed",
              "failed",
              "skipped"
            ],
            "title": "Status",
            "description": "Ingestion status"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if failed"
          }
        },
        "type": "object",
        "required": [
          "path",
          "status"
        ],
        "title": "IngestResult",
        "description": "Result for a single document ingestion."
      },
      "KBQueryRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Query"
          },
          "max_results": {
            "type": "integer",
            "maximum": 20.0,
            "minimum": 1.0,
            "title": "Max Results",
            "default": 5
          },
          "search_type": {
            "type": "string",
            "pattern": "^(SEMANTIC|HYBRID)$",
            "title": "Search Type",
            "default": "SEMANTIC"
          },
          "content_type": {
            "type": "string",
            "pattern": "^(code|docs|all)$",
            "title": "Content Type",
            "description": "Knowledge base to query: 'code' for source files, 'docs' for documentation, 'all' for both (merged by score)",
            "default": "docs"
          },
          "doc_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Doc Id",
            "description": "Filter to specific doc_id"
          },
          "repo_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Ids",
            "description": "Filter to specific repo IDs"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Filter to specific project"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "description": "Filter to specific mission"
          },
          "enable_fallback": {
            "type": "boolean",
            "title": "Enable Fallback",
            "description": "Enable external docs fallback when KB has no/low results",
            "default": true
          },
          "fallback_threshold": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Fallback Threshold",
            "description": "Score threshold below which fallback triggers",
            "default": 0.5
          },
          "persist_external_docs": {
            "type": "boolean",
            "title": "Persist External Docs",
            "description": "Save external docs to S3 for future KB queries",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "KBQueryRequest"
      },
      "KBQueryResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/KBResultItem"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          },
          "fallback_triggered": {
            "type": "boolean",
            "title": "Fallback Triggered",
            "description": "Whether external docs fallback was triggered",
            "default": false
          },
          "fallback_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Source",
            "description": "External source used for fallback",
            "examples": [
              "context7",
              "aws_docs"
            ]
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "KBQueryResponse",
        "description": "Response for POST /ocxp/kb/query."
      },
      "KBRagResponse": {
        "properties": {
          "answer": {
            "type": "string",
            "title": "Answer"
          },
          "citations": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Citations"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id"
          }
        },
        "type": "object",
        "required": [
          "answer"
        ],
        "title": "KBRagResponse",
        "description": "Response for POST /ocxp/kb/rag."
      },
      "KBResultItem": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content"
          },
          "score": {
            "type": "number",
            "title": "Score"
          },
          "source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type",
            "description": "Source type: kb, context7, aws_docs",
            "default": "kb",
            "examples": [
              "kb",
              "context7",
              "aws_docs"
            ]
          },
          "kb_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kb Source",
            "description": "Which KB returned this result: 'code' or 'docs'",
            "examples": [
              "code",
              "docs"
            ]
          }
        },
        "type": "object",
        "required": [
          "content",
          "score"
        ],
        "title": "KBResultItem",
        "description": "Single KB search result."
      },
      "LinkedRepoResponse": {
        "properties": {
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "examples": [
              "my-app"
            ]
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "project|framework|tool|reference",
            "examples": [
              "project"
            ]
          },
          "priority": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Priority",
            "examples": [
              50
            ]
          },
          "auto_include": {
            "type": "boolean",
            "title": "Auto Include",
            "examples": [
              true
            ]
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "examples": [
              "main"
            ]
          }
        },
        "type": "object",
        "required": [
          "repo_id",
          "category",
          "priority",
          "auto_include",
          "branch"
        ],
        "title": "LinkedRepoResponse",
        "description": "Linked repository in a project."
      },
      "ListBranchesRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "ListBranchesRequest"
      },
      "LockRequest": {
        "properties": {
          "content_type": {
            "type": "string",
            "title": "Content Type"
          },
          "content_id": {
            "type": "string",
            "title": "Content Id"
          },
          "ttl": {
            "type": "integer",
            "title": "Ttl",
            "default": 300
          }
        },
        "type": "object",
        "required": [
          "content_type",
          "content_id"
        ],
        "title": "LockRequest"
      },
      "LoginRequest": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "title": "Password"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "LoginRequest",
        "description": "JSON login request for programmatic clients."
      },
      "Memo": {
        "properties": {
          "memo_id": {
            "type": "string",
            "title": "Memo Id",
            "description": "Unique memo identifier"
          },
          "source_type": {
            "$ref": "#/components/schemas/SourceType",
            "description": "Type of source entity"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id",
            "description": "ID of the source entity (mission format: {mission_id}:v{version}:{file_path})"
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "description": "Workspace this memo belongs to"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content",
            "description": "Free-form memo content (for general memos)"
          },
          "category": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MemoCategory"
              },
              {
                "type": "null"
              }
            ],
            "description": "Category of memo (optional for security findings)"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Flexible metadata (line numbers, suggested fixes, etc.)"
          },
          "findings": {
            "items": {
              "$ref": "#/components/schemas/SecurityFinding"
            },
            "type": "array",
            "title": "Findings",
            "description": "List of security findings"
          },
          "total_findings": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Findings",
            "description": "Total number of findings",
            "default": 0
          },
          "highest_severity": {
            "$ref": "#/components/schemas/MemoSeverity",
            "description": "Highest severity among all findings",
            "default": "low"
          },
          "status": {
            "$ref": "#/components/schemas/MemoStatus",
            "description": "Current status of the memo",
            "default": "open"
          },
          "resolved_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved By",
            "description": "User who resolved the memo"
          },
          "resolved_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved At",
            "description": "When the memo was resolved"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "When the memo was created"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At",
            "description": "When the memo was last updated"
          },
          "ttl": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ttl",
            "description": "TTL for DynamoDB auto-expiration"
          }
        },
        "type": "object",
        "required": [
          "source_type",
          "source_id",
          "workspace"
        ],
        "title": "Memo",
        "description": "Memo linked to a source entity.\n\nMemos aggregate findings for a specific source (repo, project, mission)\nand track their resolution status."
      },
      "MemoActionResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Action result message"
          },
          "memo": {
            "$ref": "#/components/schemas/Memo"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "memo"
        ],
        "title": "MemoActionResponse",
        "description": "Response from memo action endpoints."
      },
      "MemoCategory": {
        "type": "string",
        "enum": [
          "agent_error",
          "agent_warning",
          "agent_hitl",
          "user_comment",
          "user_edit",
          "user_delete",
          "security_finding"
        ],
        "title": "MemoCategory",
        "description": "Category of memo feedback."
      },
      "MemoListResponse": {
        "properties": {
          "memos": {
            "items": {
              "$ref": "#/components/schemas/Memo"
            },
            "type": "array",
            "title": "Memos"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "memos",
          "count"
        ],
        "title": "MemoListResponse",
        "description": "Response for memo list."
      },
      "MemoResolveRequest": {
        "properties": {
          "resolved_by": {
            "type": "string",
            "title": "Resolved By",
            "description": "User resolving the memo"
          },
          "ttl_days": {
            "type": "integer",
            "maximum": 365.0,
            "minimum": 1.0,
            "title": "Ttl Days",
            "default": 30
          }
        },
        "type": "object",
        "required": [
          "resolved_by"
        ],
        "title": "MemoResolveRequest",
        "description": "Request to resolve a memo."
      },
      "MemoSeverity": {
        "type": "string",
        "enum": [
          "low",
          "medium",
          "high",
          "critical"
        ],
        "title": "MemoSeverity",
        "description": "Severity levels for security findings."
      },
      "MemoStatus": {
        "type": "string",
        "enum": [
          "open",
          "acknowledged",
          "resolved",
          "ignored"
        ],
        "title": "MemoStatus",
        "description": "Status of a memo."
      },
      "MessageResponse": {
        "properties": {
          "message_id": {
            "type": "integer",
            "title": "Message Id",
            "examples": [
              1
            ]
          },
          "role": {
            "type": "string",
            "title": "Role",
            "description": "user|assistant|system",
            "examples": [
              "user"
            ]
          },
          "content": {
            "type": "string",
            "title": "Content",
            "examples": [
              "How do I implement feature X?"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          }
        },
        "type": "object",
        "required": [
          "message_id",
          "role",
          "content"
        ],
        "title": "MessageResponse",
        "description": "Single message in a session."
      },
      "MissionContextResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "context": {
            "additionalProperties": true,
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "context"
        ],
        "title": "MissionContextResponse",
        "description": "Response for GET /tools/mission/{id}/context."
      },
      "MissionCreate": {
        "properties": {
          "title": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Title"
          },
          "description": {
            "type": "string",
            "maxLength": 5000,
            "title": "Description",
            "default": ""
          },
          "ticket_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Id",
            "description": "External ticket ID (e.g., AMC-556)"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "goals": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Goals"
          }
        },
        "type": "object",
        "required": [
          "title"
        ],
        "title": "MissionCreate"
      },
      "MissionCreateRequest": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "goals": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Goals"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "MissionCreateRequest"
      },
      "MissionCreateResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "examples": [
              "mission-abc123"
            ]
          },
          "path": {
            "type": "string",
            "title": "Path",
            "examples": [
              "mission/mission-abc123.md"
            ]
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "path"
        ],
        "title": "MissionCreateResponse",
        "description": "Response for POST /tools/mission/create."
      },
      "MissionListResponse": {
        "properties": {
          "missions": {
            "items": {
              "$ref": "#/components/schemas/MissionResponse"
            },
            "type": "array",
            "title": "Missions"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "missions",
          "count"
        ],
        "title": "MissionListResponse",
        "description": "Response for GET /ocxp/mission."
      },
      "MissionResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "ticket_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Id",
            "description": "External ticket ID (e.g., JIRA ticket)",
            "examples": [
              "AMC-556"
            ]
          },
          "title": {
            "type": "string",
            "title": "Title",
            "examples": [
              "Implement user authentication"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": "",
            "examples": [
              "Add OAuth2 login flow"
            ]
          },
          "context_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Path",
            "examples": [
              "workspaces/acme-corp/mission/550e8400-e29b-41d4-a716-446655440000/"
            ]
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Project UUID this mission belongs to",
            "examples": [
              "1c3952a0-58a0-41b5-85aa-7a33496b96ab"
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "draft|active|completed|archived",
            "default": "draft",
            "examples": [
              "draft"
            ]
          },
          "progress": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Progress",
            "default": 0,
            "examples": [
              50
            ]
          },
          "goals": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Goals",
            "examples": [
              [
                "Implement login",
                "Add OAuth providers"
              ]
            ]
          },
          "notes": {
            "type": "string",
            "title": "Notes",
            "default": "",
            "examples": [
              "Consider using Auth0 for OAuth"
            ]
          },
          "session_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Session Ids",
            "examples": [
              [
                "sess-001",
                "sess-002"
              ]
            ]
          },
          "version": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Version",
            "description": "Regeneration version number",
            "default": 0,
            "examples": [
              1
            ]
          },
          "last_regenerated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Regenerated At",
            "description": "ISO timestamp of last regeneration",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "examples": [
              "user@example.com"
            ]
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "workspace",
          "title"
        ],
        "title": "MissionResponse",
        "description": "Full mission response."
      },
      "MissionUpdate": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 5000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "ticket_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Id",
            "description": "External ticket ID (e.g., AMC-556)"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "draft|active|completed|archived"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 10000
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "title": "MissionUpdate"
      },
      "MissionUpdateRequest": {
        "properties": {
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "title": "MissionUpdateRequest"
      },
      "MissionUpdateResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "MissionUpdateResponse",
        "description": "Response for POST /tools/mission/{id}/update."
      },
      "MoveRequest": {
        "properties": {
          "source": {
            "type": "string",
            "title": "Source"
          },
          "destination": {
            "type": "string",
            "title": "Destination"
          },
          "overwrite": {
            "type": "boolean",
            "title": "Overwrite",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "source",
          "destination"
        ],
        "title": "MoveRequest"
      },
      "OAuth2TokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "default": 3600
          },
          "id_token": {
            "type": "string",
            "title": "Id Token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "id_token",
          "refresh_token"
        ],
        "title": "OAuth2TokenResponse",
        "description": "OAuth2 standard token response for Swagger UI compatibility (snake_case)."
      },
      "OCXPBatchResolveRequest": {
        "properties": {
          "uris": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 50,
            "title": "Uris",
            "description": "List of OCXP URIs to resolve"
          },
          "resolution_mode": {
            "type": "string",
            "enum": [
              "s3",
              "local",
              "url",
              "all"
            ],
            "title": "Resolution Mode",
            "default": "all"
          },
          "vault_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vault Path"
          }
        },
        "type": "object",
        "required": [
          "uris"
        ],
        "title": "OCXPBatchResolveRequest",
        "description": "Request model for batch OCXP URI resolution."
      },
      "OCXPBatchResolveResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/OCXPResolution"
            },
            "type": "array",
            "title": "Results"
          },
          "errors": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Errors",
            "description": "Map of URI -> error message for failed resolutions"
          }
        },
        "type": "object",
        "required": [
          "results"
        ],
        "title": "OCXPBatchResolveResponse",
        "description": "Response model for batch OCXP URI resolution."
      },
      "OCXPResolution": {
        "properties": {
          "uri": {
            "type": "string",
            "title": "Uri",
            "description": "Original OCXP URI"
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "description": "Workspace extracted from URI"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "Content type extracted from URI"
          },
          "path": {
            "type": "string",
            "title": "Path",
            "description": "File path extracted from URI"
          },
          "resolved": {
            "additionalProperties": true,
            "type": "object",
            "title": "Resolved",
            "description": "Resolved URIs/paths by mode"
          },
          "exists": {
            "type": "boolean",
            "title": "Exists",
            "description": "Whether the resource exists (S3 check)"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Additional metadata if available"
          }
        },
        "type": "object",
        "required": [
          "uri",
          "workspace",
          "content_type",
          "path",
          "resolved",
          "exists"
        ],
        "title": "OCXPResolution",
        "description": "Response model for OCXP URI resolution."
      },
      "OCXPResolveRequest": {
        "properties": {
          "uri": {
            "type": "string",
            "title": "Uri",
            "description": "OCXP URI to resolve (e.g., ocxp://prod/code/sonic-web-dev/amc/handlers/auth.ts)"
          },
          "resolution_mode": {
            "type": "string",
            "enum": [
              "s3",
              "local",
              "url",
              "all"
            ],
            "title": "Resolution Mode",
            "description": "Resolution mode: s3 (S3 URI), local (filesystem path), url (obsidian://), all (all modes)",
            "default": "all"
          },
          "vault_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vault Path",
            "description": "Base vault path for local resolution (e.g., /Users/user/vault)"
          }
        },
        "type": "object",
        "required": [
          "uri"
        ],
        "title": "OCXPResolveRequest",
        "description": "Request model for OCXP URI resolution."
      },
      "OCXPValidateRequest": {
        "properties": {
          "uri": {
            "type": "string",
            "title": "Uri",
            "description": "OCXP URI to validate"
          }
        },
        "type": "object",
        "required": [
          "uri"
        ],
        "title": "OCXPValidateRequest",
        "description": "Request model for OCXP URI validation."
      },
      "OCXPValidateResponse": {
        "properties": {
          "uri": {
            "type": "string",
            "title": "Uri"
          },
          "valid": {
            "type": "boolean",
            "title": "Valid"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "parsed": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parsed"
          }
        },
        "type": "object",
        "required": [
          "uri",
          "valid"
        ],
        "title": "OCXPValidateResponse",
        "description": "Response model for OCXP URI validation."
      },
      "ProjectCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name"
          },
          "description": {
            "type": "string",
            "maxLength": 2000,
            "title": "Description",
            "default": ""
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "ProjectCreate"
      },
      "ProjectListResponse": {
        "properties": {
          "projects": {
            "items": {
              "$ref": "#/components/schemas/ProjectResponse"
            },
            "type": "array",
            "title": "Projects"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "projects",
          "count"
        ],
        "title": "ProjectListResponse",
        "description": "Response for GET /ocxp/project."
      },
      "ProjectResponse": {
        "properties": {
          "project_id": {
            "type": "string",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
            "title": "Project Id",
            "description": "Project UUID identifier",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "My Project"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "examples": [
              "A sample project for development"
            ]
          },
          "context_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Path",
            "examples": [
              "workspaces/acme-corp/project/550e8400-e29b-41d4-a716-446655440000/"
            ]
          },
          "linked_repos": {
            "items": {
              "$ref": "#/components/schemas/LinkedRepoResponse"
            },
            "type": "array",
            "title": "Linked Repos"
          },
          "mission_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Mission Ids",
            "examples": [
              [
                "mission-001",
                "mission-002"
              ]
            ]
          },
          "default_repo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Repo Id",
            "examples": [
              "my-app"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "examples": [
              "user@example.com"
            ]
          }
        },
        "type": "object",
        "required": [
          "project_id",
          "workspace",
          "name",
          "description"
        ],
        "title": "ProjectResponse",
        "description": "Full project response."
      },
      "ProjectUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "title": "ProjectUpdate"
      },
      "PrototypeChatGetResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id"
          },
          "web_url": {
            "type": "string",
            "title": "Web Url"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/PrototypeChatMessage"
            },
            "type": "array",
            "title": "Messages"
          },
          "versions": {
            "items": {
              "$ref": "#/components/schemas/PrototypeChatVersion"
            },
            "type": "array",
            "title": "Versions"
          },
          "latest_preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Preview Url"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link"
          },
          "conversation_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Link"
          },
          "file_links": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "File Links"
          },
          "synced_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Synced At"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id",
          "web_url",
          "mission_id"
        ],
        "title": "PrototypeChatGetResponse",
        "description": "Response from getting a stored prototype chat."
      },
      "PrototypeChatLinkRequest": {
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "v0",
              "lovable",
              "bolt"
            ],
            "title": "Provider",
            "description": "Prototype provider",
            "default": "v0"
          },
          "chat_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chat Id",
            "description": "Chat ID from provider (extracted from URL if not provided)"
          },
          "chat_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chat Url",
            "description": "Chat URL (alternative to chat_id)"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id",
            "description": "Specific version ID to download files from (default: latest)"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "description": "Mission to link this chat to"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Optional project scope"
          },
          "sync_versions": {
            "type": "boolean",
            "title": "Sync Versions",
            "description": "Also sync version information (metadata)",
            "default": true
          },
          "download_files": {
            "type": "boolean",
            "title": "Download Files",
            "description": "Download version files to OCXP for use as context",
            "default": true
          },
          "screenshot_preview": {
            "type": "boolean",
            "title": "Screenshot Preview",
            "description": "Screenshot the latest preview URL",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "PrototypeChatLinkRequest",
        "description": "Request to link a prototype chat to a mission."
      },
      "PrototypeChatLinkResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id"
          },
          "chat_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chat Name"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "project_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Name"
          },
          "web_url": {
            "type": "string",
            "title": "Web Url"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "messages_count": {
            "type": "integer",
            "title": "Messages Count"
          },
          "versions_count": {
            "type": "integer",
            "title": "Versions Count"
          },
          "latest_preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Preview Url"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link"
          },
          "content_links": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Content Links"
          },
          "indexed": {
            "type": "boolean",
            "title": "Indexed",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id",
          "web_url",
          "mission_id",
          "messages_count",
          "versions_count"
        ],
        "title": "PrototypeChatLinkResponse",
        "description": "Response from linking a prototype chat.\n\nField naming aligned with v0's hierarchy: Project > Chat > Version\n- chat_name: The chat's name from v0 (not title - v0 only has name)\n- project_id: v0 project ID if chat belongs to a project\n- project_name: v0 project name (fetched from projects API)"
      },
      "PrototypeChatListItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "chat_name": {
            "type": "string",
            "title": "Chat Name"
          },
          "web_url": {
            "type": "string",
            "title": "Web Url"
          },
          "privacy": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Privacy"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "latest_preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Preview Url"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "project_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Name"
          }
        },
        "type": "object",
        "required": [
          "id",
          "chat_name",
          "web_url"
        ],
        "title": "PrototypeChatListItem",
        "description": "Individual chat in list response.\n\nField naming aligned with v0's hierarchy: Project > Chat > Version\n- chat_name: The chat's name from v0 (v0 only has 'name', not 'title')\n- project_id: v0 project ID if chat belongs to a project\n- project_name: v0 project name (joined from projects list)"
      },
      "PrototypeChatListResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "chats": {
            "items": {
              "$ref": "#/components/schemas/PrototypeChatListItem"
            },
            "type": "array",
            "title": "Chats"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "provider"
        ],
        "title": "PrototypeChatListResponse",
        "description": "Response from listing available chats."
      },
      "PrototypeChatMessage": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "role": {
            "type": "string",
            "enum": [
              "user",
              "assistant"
            ],
            "title": "Role"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "role",
          "content"
        ],
        "title": "PrototypeChatMessage",
        "description": "Individual chat message from a prototype conversation."
      },
      "PrototypeChatPreviewRequest": {
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "v0",
              "lovable",
              "bolt"
            ],
            "title": "Provider",
            "default": "v0"
          },
          "chat_url": {
            "type": "string",
            "title": "Chat Url",
            "description": "Chat URL to preview"
          }
        },
        "type": "object",
        "required": [
          "chat_url"
        ],
        "title": "PrototypeChatPreviewRequest",
        "description": "Request to preview a chat before linking (fetch metadata only)."
      },
      "PrototypeChatPreviewResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id"
          },
          "web_url": {
            "type": "string",
            "title": "Web Url"
          },
          "messages_count": {
            "type": "integer",
            "title": "Messages Count"
          },
          "versions": {
            "items": {
              "$ref": "#/components/schemas/PrototypeChatVersion"
            },
            "type": "array",
            "title": "Versions"
          },
          "latest_preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Preview Url"
          },
          "can_download_files": {
            "type": "boolean",
            "title": "Can Download Files",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id",
          "web_url",
          "messages_count"
        ],
        "title": "PrototypeChatPreviewResponse",
        "description": "Response from previewing a chat (no files stored yet)."
      },
      "PrototypeChatSyncAsyncRequest": {
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "v0",
              "lovable",
              "bolt"
            ],
            "title": "Provider",
            "description": "Prototype provider",
            "default": "v0"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id",
            "description": "Chat ID to sync"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "description": "Mission context"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id",
            "description": "Specific version ID to sync (default: sync all new versions)"
          },
          "download_files": {
            "type": "boolean",
            "title": "Download Files",
            "description": "Download version files to OCXP",
            "default": true
          },
          "download_screenshots": {
            "type": "boolean",
            "title": "Download Screenshots",
            "description": "Download v0's built-in screenshot for each version",
            "default": true
          },
          "screenshot_all_pages": {
            "type": "boolean",
            "title": "Screenshot All Pages",
            "description": "Capture screenshots of all detected pages/routes",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "chat_id",
          "mission_id"
        ],
        "title": "PrototypeChatSyncAsyncRequest",
        "description": "Request to start an async prototype chat sync."
      },
      "PrototypeChatSyncAsyncResponse": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id",
            "description": "Job ID for tracking progress"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Initial job status",
            "default": "queued"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable status message",
            "default": "Job queued for processing"
          }
        },
        "type": "object",
        "required": [
          "job_id"
        ],
        "title": "PrototypeChatSyncAsyncResponse",
        "description": "Response from starting an async sync job."
      },
      "PrototypeChatSyncRequest": {
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "v0",
              "lovable",
              "bolt"
            ],
            "title": "Provider",
            "default": "v0"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id",
            "description": "Chat ID to sync"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "description": "Mission context (optional - can sync without mission)"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id",
            "description": "Specific version ID to sync files from (default: sync all new versions)"
          },
          "download_files": {
            "type": "boolean",
            "title": "Download Files",
            "description": "Download version files to OCXP (if False, only syncs messages/metadata)",
            "default": true
          },
          "download_screenshots": {
            "type": "boolean",
            "title": "Download Screenshots",
            "description": "Download v0's built-in screenshot for each version",
            "default": true
          },
          "screenshot_all_pages": {
            "type": "boolean",
            "title": "Screenshot All Pages",
            "description": "Capture screenshots of all detected pages/routes (not just root)",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "chat_id"
        ],
        "title": "PrototypeChatSyncRequest",
        "description": "Request to sync/refresh a linked chat.\n\nSupports:\n- Incremental sync: Only downloads new versions (skips already-stored ones)\n- Specific version: Downloads a specific version by ID\n- Metadata-only: Syncs messages/metadata without downloading files\n- Screenshot all pages: Capture screenshots of all detected routes"
      },
      "PrototypeChatSyncResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id"
          },
          "synced": {
            "type": "boolean",
            "title": "Synced"
          },
          "new_messages_count": {
            "type": "integer",
            "title": "New Messages Count",
            "default": 0
          },
          "new_versions_count": {
            "type": "integer",
            "title": "New Versions Count",
            "default": 0
          },
          "content_links": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Content Links"
          },
          "newly_synced_versions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Newly Synced Versions",
            "description": "Version IDs downloaded during this sync"
          },
          "stored_versions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Stored Versions",
            "description": "All version IDs currently stored in S3"
          },
          "latest_version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Version Id",
            "description": "Latest version ID available from the provider"
          },
          "versions": {
            "items": {
              "$ref": "#/components/schemas/PrototypeChatVersion"
            },
            "type": "array",
            "title": "Versions",
            "description": "Full version details including detected pages and screenshots"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id",
          "synced"
        ],
        "title": "PrototypeChatSyncResponse",
        "description": "Response from syncing a prototype chat.\n\nVersion tracking fields:\n- newly_synced_versions: Versions downloaded during this sync operation\n- stored_versions: All versions currently stored in S3\n- latest_version_id: Latest version available from the provider\n- versions: Full version details including pages and screenshots"
      },
      "PrototypeChatVersion": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preview Url"
          },
          "screenshot_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Url",
            "description": "v0's built-in screenshot URL for this version"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link",
            "description": "OCXP link to downloaded screenshot"
          },
          "files": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Files"
          },
          "pages": {
            "items": {
              "$ref": "#/components/schemas/PrototypePageInfo"
            },
            "type": "array",
            "title": "Pages",
            "description": "Detected pages/routes in this version"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "PrototypeChatVersion",
        "description": "Chat version/iteration with preview and files."
      },
      "PrototypePageInfo": {
        "properties": {
          "route": {
            "type": "string",
            "title": "Route",
            "description": "URL route path (e.g., '/', '/dashboard')"
          },
          "file": {
            "type": "string",
            "title": "File",
            "description": "Source file path (e.g., 'app/page.tsx')"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link",
            "description": "OCXP link to screenshot of this page"
          }
        },
        "type": "object",
        "required": [
          "route",
          "file"
        ],
        "title": "PrototypePageInfo",
        "description": "Information about a detected page/route in the prototype."
      },
      "PrototypeStoredVersionsResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider",
            "description": "Provider name (v0, lovable, bolt)"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id",
            "description": "Chat ID"
          },
          "stored_versions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Stored Versions",
            "description": "Version IDs already downloaded to S3"
          },
          "latest_version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Version Id",
            "description": "Latest version ID available from the provider (cached)"
          },
          "version_details": {
            "items": {
              "$ref": "#/components/schemas/PrototypeVersionDetail"
            },
            "type": "array",
            "title": "Version Details",
            "description": "Full version details when include_details=true (from DynamoDB)"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id"
        ],
        "title": "PrototypeStoredVersionsResponse",
        "description": "Fast response for stored version state (DynamoDB query, no S3/API calls).\n\nUsed by the frontend to quickly determine button states without\ntriggering a full sync operation that makes multiple S3 HEAD requests.\n\nWhen include_details=true is requested, also returns full version metadata\nincluding files, pages, and screenshot links from DynamoDB."
      },
      "PrototypeSyncJobStatusResponse": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "progress": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Progress"
          },
          "current_step": {
            "type": "string",
            "title": "Current Step"
          },
          "files_processed": {
            "type": "integer",
            "title": "Files Processed"
          },
          "files_total": {
            "type": "integer",
            "title": "Files Total"
          },
          "screenshots_processed": {
            "type": "integer",
            "title": "Screenshots Processed"
          },
          "screenshots_total": {
            "type": "integer",
            "title": "Screenshots Total"
          },
          "content_links": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Content Links"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "status",
          "progress",
          "current_step",
          "files_processed",
          "files_total",
          "screenshots_processed",
          "screenshots_total"
        ],
        "title": "PrototypeSyncJobStatusResponse",
        "description": "Response for job status polling endpoint."
      },
      "PrototypeVersionDetail": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Version ID"
          },
          "preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preview Url",
            "description": "Demo/preview URL for this version"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link",
            "description": "OCXP link to root screenshot"
          },
          "files": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Files",
            "description": "List of file paths in this version"
          },
          "pages": {
            "items": {
              "$ref": "#/components/schemas/PrototypePageInfo"
            },
            "type": "array",
            "title": "Pages",
            "description": "Detected pages/routes with their screenshot links"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "description": "Version creation timestamp"
          },
          "synced_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Synced At",
            "description": "When this version was synced to OCXP"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "PrototypeVersionDetail",
        "description": "Full version detail from DynamoDB storage.\n\nContains all metadata for a stored version including files, pages,\nand screenshot links. Used when include_details=true is requested."
      },
      "QueryFilter": {
        "properties": {
          "field": {
            "type": "string",
            "title": "Field"
          },
          "operator": {
            "type": "string",
            "title": "Operator",
            "default": "eq"
          },
          "value": {
            "title": "Value"
          }
        },
        "type": "object",
        "required": [
          "field",
          "value"
        ],
        "title": "QueryFilter"
      },
      "QueryRequest": {
        "properties": {
          "filters": {
            "items": {
              "$ref": "#/components/schemas/QueryFilter"
            },
            "type": "array",
            "title": "Filters",
            "default": []
          },
          "limit": {
            "type": "integer",
            "maximum": 1000.0,
            "minimum": 1.0,
            "title": "Limit",
            "default": 100
          }
        },
        "type": "object",
        "title": "QueryRequest"
      },
      "RAGRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Query"
          },
          "content_type": {
            "type": "string",
            "pattern": "^(code|docs|all)$",
            "title": "Content Type",
            "description": "Knowledge base to query: 'code' for source files, 'docs' for documentation, 'all' for both",
            "default": "docs"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session ID for conversation"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "RAGRequest"
      },
      "RefreshRequest": {
        "properties": {
          "refreshToken": {
            "type": "string",
            "title": "Refreshtoken"
          }
        },
        "type": "object",
        "required": [
          "refreshToken"
        ],
        "title": "RefreshRequest",
        "description": "Token refresh request - accepts both camelCase and snake_case."
      },
      "RefreshResponse": {
        "properties": {
          "accessToken": {
            "type": "string",
            "title": "Accesstoken"
          },
          "tokenType": {
            "type": "string",
            "title": "Tokentype",
            "default": "bearer"
          },
          "expiresIn": {
            "type": "integer",
            "title": "Expiresin",
            "default": 3600
          },
          "idToken": {
            "type": "string",
            "title": "Idtoken"
          }
        },
        "type": "object",
        "required": [
          "accessToken",
          "idToken"
        ],
        "title": "RefreshResponse",
        "description": "Token refresh response with camelCase output (no new refresh_token)."
      },
      "RegenerateMetadataRequest": {
        "properties": {
          "prefix": {
            "type": "string",
            "title": "Prefix",
            "description": "S3 prefix to scan (e.g., 'workspaces/prod/mission/'). Empty = workspace root",
            "default": ""
          },
          "max_files": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Files",
            "description": "Maximum files to process (None = unlimited)"
          },
          "dry_run": {
            "type": "boolean",
            "title": "Dry Run",
            "description": "Show what would change without updating S3",
            "default": false
          },
          "trigger_sync": {
            "type": "boolean",
            "title": "Trigger Sync",
            "description": "Trigger Bedrock KB sync after regeneration",
            "default": false
          }
        },
        "type": "object",
        "title": "RegenerateMetadataRequest",
        "description": "Request to regenerate metadata for S3 documents."
      },
      "RegenerateMetadataResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Job status: completed, queued, or error"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable message"
          },
          "stats": {
            "additionalProperties": true,
            "type": "object",
            "title": "Stats",
            "description": "Statistics: scanned, updated, skipped, errors"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id",
            "description": "Job ID if queued for background processing"
          }
        },
        "type": "object",
        "required": [
          "status",
          "message"
        ],
        "title": "RegenerateMetadataResponse",
        "description": "Response from metadata regeneration."
      },
      "RegenerateMissionRequest": {
        "properties": {
          "ticket_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Id",
            "description": "Updated ticket ID"
          },
          "ticket_summary": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Summary",
            "description": "Updated ticket summary"
          },
          "ticket_description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 5000
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Description",
            "description": "Updated ticket description"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Project ID to preserve/set"
          },
          "archive_old_docs": {
            "type": "boolean",
            "title": "Archive Old Docs",
            "description": "Archive old docs before regenerating",
            "default": true
          },
          "auto_increment_version": {
            "type": "boolean",
            "title": "Auto Increment Version",
            "description": "Auto-increment archive version",
            "default": true
          }
        },
        "type": "object",
        "title": "RegenerateMissionRequest",
        "description": "Request body for mission regeneration."
      },
      "RegenerateMissionResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id"
          },
          "archive_version": {
            "type": "integer",
            "title": "Archive Version"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "started|completed|failed"
          },
          "archived_files": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Archived Files"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success",
          "archive_version",
          "status"
        ],
        "title": "RegenerateMissionResponse",
        "description": "Response for mission regeneration."
      },
      "RepoDeleteResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Deleted repository UUID",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "description": "Deleted repository identifier (owner/repo)",
            "examples": [
              "owner/my-app"
            ]
          },
          "deleted": {
            "type": "boolean",
            "title": "Deleted",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "id",
          "repo_id"
        ],
        "title": "RepoDeleteResponse",
        "description": "Response for DELETE /ocxp/repo/{id}."
      },
      "RepoDownloadResponse": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id",
            "description": "Unique UUID for API operations (available when linked or complete)",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "job_id": {
            "type": "string",
            "title": "Job Id",
            "examples": [
              "job-abc123"
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "started|linked|downloading|indexing|complete|failed",
            "examples": [
              "started"
            ]
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "examples": [
              "Download initiated"
            ]
          },
          "deduplicated": {
            "type": "boolean",
            "title": "Deduplicated",
            "description": "True if repo already exists and was linked instead of downloaded",
            "default": false
          },
          "s3_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "S3 Path",
            "description": "S3 storage path",
            "examples": [
              "workspaces/public/repo/owner/repo/"
            ]
          },
          "detected_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detected Type",
            "description": "Auto-detected repo content type (code, docs, or mixed)",
            "examples": [
              "code",
              "docs",
              "mixed"
            ]
          },
          "detection_method": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detection Method",
            "description": "How repo type was detected: path_heuristic (from folder name) or github_api (from language analysis)",
            "examples": [
              "path_heuristic",
              "github_api"
            ]
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "status"
        ],
        "title": "RepoDownloadResponse",
        "description": "Response for POST /ocxp/repo/download."
      },
      "RepoInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique UUID for API operations",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "description": "Repository identifier (owner/repo) for display",
            "examples": [
              "owner/my-app"
            ]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "my-app"
            ]
          },
          "url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Url",
            "examples": [
              "https://github.com/org/my-app"
            ]
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "description": "Git branch",
            "default": "main",
            "examples": [
              "main"
            ]
          },
          "path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Path",
            "description": "Subpath within repository (if partial download)",
            "examples": [
              "src/components"
            ]
          },
          "visibility": {
            "type": "string",
            "title": "Visibility",
            "description": "Repository visibility: public or private",
            "default": "public",
            "examples": [
              "public",
              "private"
            ]
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "pending|downloading|indexed|failed",
            "examples": [
              "indexed"
            ]
          },
          "last_synced": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Synced",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "files_count": {
            "type": "integer",
            "title": "Files Count",
            "description": "Number of files indexed",
            "default": 0,
            "examples": [
              42
            ]
          },
          "total_size_bytes": {
            "type": "integer",
            "title": "Total Size Bytes",
            "description": "Total storage size in bytes",
            "default": 0,
            "examples": [
              1048576
            ]
          },
          "s3_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "S3 Path",
            "description": "S3 storage location",
            "examples": [
              "workspaces/prod/repo/owner/my-app/"
            ]
          },
          "repo_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Type",
            "description": "Content type: code, docs, or mixed",
            "examples": [
              "code",
              "docs",
              "mixed"
            ]
          }
        },
        "type": "object",
        "required": [
          "id",
          "repo_id",
          "name"
        ],
        "title": "RepoInfo",
        "description": "Repository information."
      },
      "RepoListResponse": {
        "properties": {
          "repos": {
            "items": {
              "$ref": "#/components/schemas/RepoInfo"
            },
            "type": "array",
            "title": "Repos"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "repos",
          "count"
        ],
        "title": "RepoListResponse",
        "description": "Response for GET /ocxp/repo/list."
      },
      "RepoStatusResponse": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "repo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Id"
          },
          "files_processed": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Files Processed"
          },
          "total_files": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Files"
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "status"
        ],
        "title": "RepoStatusResponse",
        "description": "Response for GET /ocxp/repo/status/{job_id}."
      },
      "SecurityFinding": {
        "properties": {
          "pattern_type": {
            "type": "string",
            "title": "Pattern Type",
            "description": "Type of pattern detected: password, api_key, aws_secret, etc."
          },
          "severity": {
            "$ref": "#/components/schemas/MemoSeverity",
            "description": "Severity level of this finding"
          },
          "location": {
            "type": "string",
            "title": "Location",
            "description": "File path where finding was detected"
          },
          "match_count": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Match Count",
            "description": "Number of matches found",
            "default": 1
          },
          "first_detected": {
            "type": "string",
            "title": "First Detected",
            "description": "When this finding was first detected"
          }
        },
        "type": "object",
        "required": [
          "pattern_type",
          "severity",
          "location"
        ],
        "title": "SecurityFinding",
        "description": "Single sensitive data finding within a memo."
      },
      "SessionForkResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "parent_session_id": {
            "type": "string",
            "title": "Parent Session Id"
          },
          "fork_depth": {
            "type": "integer",
            "title": "Fork Depth"
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "parent_session_id",
          "fork_depth",
          "message_count"
        ],
        "title": "SessionForkResponse",
        "description": "Response for POST /ocxp/session/{id}/fork."
      },
      "SessionListResponse": {
        "properties": {
          "sessions": {
            "items": {
              "$ref": "#/components/schemas/SessionResponse"
            },
            "type": "array",
            "title": "Sessions"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "sessions",
          "count"
        ],
        "title": "SessionListResponse",
        "description": "Response for GET /ocxp/session."
      },
      "SessionMessagesResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/MessageResponse"
            },
            "type": "array",
            "title": "Messages"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "messages",
          "count"
        ],
        "title": "SessionMessagesResponse",
        "description": "Response for GET /ocxp/session/{id}/messages."
      },
      "SessionMetadataUpdate": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "message_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message Count"
          }
        },
        "type": "object",
        "title": "SessionMetadataUpdate"
      },
      "SessionResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id",
            "examples": [
              "sess-abc123"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "examples": [
              "Feature implementation discussion"
            ]
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count",
            "default": 0,
            "examples": [
              15
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "examples": [
              "user@example.com"
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "active|archived",
            "default": "active",
            "examples": [
              "active"
            ]
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "examples": [
              "mission-001"
            ]
          },
          "parent_session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Session Id",
            "examples": [
              "sess-parent123"
            ]
          },
          "fork_depth": {
            "type": "integer",
            "title": "Fork Depth",
            "default": 0,
            "examples": [
              0
            ]
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "workspace"
        ],
        "title": "SessionResponse",
        "description": "Session metadata response."
      },
      "SetDefaultDatabaseRequest": {
        "properties": {
          "database_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Id",
            "description": "Database ID to set as default (None to clear)"
          }
        },
        "type": "object",
        "title": "SetDefaultDatabaseRequest"
      },
      "SetDefaultRepoRequest": {
        "properties": {
          "repo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Id"
          }
        },
        "type": "object",
        "title": "SetDefaultRepoRequest"
      },
      "SourceType": {
        "type": "string",
        "enum": [
          "repo",
          "project",
          "mission",
          "doc"
        ],
        "title": "SourceType",
        "description": "Type of entity the memo is associated with."
      },
      "TableOverview": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": ""
          },
          "column_count": {
            "type": "integer",
            "title": "Column Count"
          },
          "columns": {
            "items": {
              "$ref": "#/components/schemas/ColumnOverview"
            },
            "type": "array",
            "title": "Columns"
          },
          "foreign_keys": {
            "items": {
              "$ref": "#/components/schemas/ForeignKeyInfo"
            },
            "type": "array",
            "title": "Foreign Keys",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "name",
          "column_count",
          "columns"
        ],
        "title": "TableOverview",
        "description": "Table information with columns and foreign keys."
      },
      "TokenResponse": {
        "properties": {
          "accessToken": {
            "type": "string",
            "title": "Accesstoken"
          },
          "tokenType": {
            "type": "string",
            "title": "Tokentype",
            "default": "bearer"
          },
          "expiresIn": {
            "type": "integer",
            "title": "Expiresin",
            "default": 3600
          },
          "idToken": {
            "type": "string",
            "title": "Idtoken"
          },
          "refreshToken": {
            "type": "string",
            "title": "Refreshtoken"
          }
        },
        "type": "object",
        "required": [
          "accessToken",
          "idToken",
          "refreshToken"
        ],
        "title": "TokenResponse",
        "description": "Token response with camelCase output for plugin compatibility."
      },
      "UserResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "username": {
            "type": "string",
            "title": "Username"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "username"
        ],
        "title": "UserResponse",
        "description": "User info response."
      },
      "ValidateRequest": {
        "properties": {
          "response": {
            "type": "string",
            "maxLength": 50000,
            "minLength": 1,
            "title": "Response",
            "description": "AI response to validate"
          },
          "context_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Ids",
            "description": "Context IDs that were used to generate response"
          },
          "query": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Query",
            "description": "Original query for relevance checking"
          },
          "strict_mode": {
            "type": "boolean",
            "title": "Strict Mode",
            "description": "If true, require all claims to be verifiable",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "response"
        ],
        "title": "ValidateRequest",
        "description": "Request for POST /ocxp/context/validate.\n\nValidates AI-generated responses against source context."
      },
      "ValidateResponse": {
        "properties": {
          "valid": {
            "type": "boolean",
            "title": "Valid",
            "description": "True if no high-severity issues found"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Confidence in validation result (0.0 - 1.0)"
          },
          "quality_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Quality Score",
            "description": "Overall quality score (0.0 - 1.0)"
          },
          "issues": {
            "items": {
              "$ref": "#/components/schemas/ValidationIssue"
            },
            "type": "array",
            "title": "Issues",
            "description": "List of issues found"
          },
          "verified_claims": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Verified Claims",
            "description": "Number of claims that were verified",
            "default": 0
          },
          "unverified_claims": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Unverified Claims",
            "description": "Number of claims that could not be verified",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "valid",
          "confidence",
          "quality_score"
        ],
        "title": "ValidateResponse",
        "description": "Response from POST /ocxp/context/validate.\n\nContains validation results with quality scores and issues."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "ValidationIssue": {
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "hallucination",
              "outdated",
              "incomplete",
              "contradiction"
            ],
            "title": "Type",
            "description": "Type of issue found"
          },
          "severity": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high"
            ],
            "title": "Severity",
            "description": "Severity of the issue"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Human-readable description of the issue"
          },
          "location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Location",
            "description": "Location in response where issue was found"
          },
          "suggestion": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggestion",
            "description": "Suggested correction"
          }
        },
        "type": "object",
        "required": [
          "type",
          "severity",
          "description"
        ],
        "title": "ValidationIssue",
        "description": "Single validation issue found in AI response."
      },
      "VersionInfoResponse": {
        "properties": {
          "version_id": {
            "type": "string",
            "title": "Version Id",
            "description": "S3 version ID",
            "examples": [
              "abc123def456"
            ]
          },
          "is_latest": {
            "type": "boolean",
            "title": "Is Latest",
            "description": "Whether this is the latest version",
            "examples": [
              true
            ]
          },
          "last_modified": {
            "type": "string",
            "title": "Last Modified",
            "description": "ISO timestamp of last modification",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "size": {
            "type": "integer",
            "title": "Size",
            "description": "Content size in bytes",
            "examples": [
              1024
            ]
          },
          "etag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Etag",
            "description": "ETag of the content",
            "examples": [
              "d41d8cd98f00b204"
            ]
          }
        },
        "type": "object",
        "required": [
          "version_id",
          "is_latest",
          "last_modified",
          "size"
        ],
        "title": "VersionInfoResponse",
        "description": "Version information for a single file version."
      },
      "VersionListResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path",
            "description": "File path",
            "examples": [
              "mission/current.md"
            ]
          },
          "versions": {
            "items": {
              "$ref": "#/components/schemas/VersionInfoResponse"
            },
            "type": "array",
            "title": "Versions",
            "description": "List of file versions"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of versions",
            "examples": [
              5
            ]
          }
        },
        "type": "object",
        "required": [
          "path",
          "versions",
          "total"
        ],
        "title": "VersionListResponse",
        "description": "Response for GET /ocxp/{type}/{id}/versions."
      },
      "VisualAnalyseRequest": {
        "properties": {
          "question": {
            "type": "string",
            "title": "Question",
            "description": "Question about image content"
          },
          "image_paths": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Paths",
            "description": "S3 paths to analyze (e.g., ['workspaces/prod/visual/screenshots/...'])"
          },
          "search_query": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Search Query",
            "description": "Alternative: search metadata first, then analyze top results"
          },
          "max_images": {
            "type": "integer",
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Max Images",
            "description": "Max images to analyze",
            "default": 5
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "description": "Optional mission scope filter"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Optional project scope filter"
          }
        },
        "type": "object",
        "required": [
          "question"
        ],
        "title": "VisualAnalyseRequest",
        "description": "Request for POST /ocxp/context/visual/analyse."
      },
      "VisualAnalyseResponse": {
        "properties": {
          "answer": {
            "type": "string",
            "title": "Answer",
            "description": "AI analysis of image content"
          },
          "images_analyzed": {
            "items": {
              "$ref": "#/components/schemas/VisualAnalyseResult"
            },
            "type": "array",
            "title": "Images Analyzed"
          },
          "total_images": {
            "type": "integer",
            "title": "Total Images",
            "description": "Number of images analyzed",
            "default": 0
          },
          "model_used": {
            "type": "string",
            "title": "Model Used",
            "default": "anthropic.claude-3-sonnet-20240229-v1:0"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          }
        },
        "type": "object",
        "required": [
          "answer"
        ],
        "title": "VisualAnalyseResponse",
        "description": "Response from POST /ocxp/context/visual/analyse."
      },
      "VisualAnalyseResult": {
        "properties": {
          "s3_path": {
            "type": "string",
            "title": "S3 Path"
          },
          "ocxp_link": {
            "type": "string",
            "title": "Ocxp Link"
          },
          "analyzed": {
            "type": "boolean",
            "title": "Analyzed"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "s3_path",
          "ocxp_link",
          "analyzed"
        ],
        "title": "VisualAnalyseResult",
        "description": "Individual image analysis result."
      },
      "WorkspaceItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name"
        ],
        "title": "WorkspaceItem",
        "description": "Workspace item."
      },
      "WorkspacesResponse": {
        "properties": {
          "workspaces": {
            "items": {
              "$ref": "#/components/schemas/WorkspaceItem"
            },
            "type": "array",
            "title": "Workspaces"
          }
        },
        "type": "object",
        "required": [
          "workspaces"
        ],
        "title": "WorkspacesResponse",
        "description": "Workspaces list response."
      },
      "WriteRequest": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content"
          },
          "encoding": {
            "type": "string",
            "title": "Encoding",
            "default": "utf-8"
          },
          "etag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Etag"
          },
          "ifNotExists": {
            "type": "boolean",
            "title": "Ifnotexists",
            "default": false
          },
          "manage_metadata": {
            "type": "boolean",
            "title": "Manage Metadata",
            "default": true
          },
          "auto_index": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Index"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id"
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "WriteRequest"
      }
    },
    "securitySchemes": {
      "OAuth2PasswordBearer": {
        "type": "oauth2",
        "description": "Login with your Cognito credentials",
        "flows": {
          "password": {
            "tokenUrl": "/auth/token",
            "scopes": {}
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "https://ix8b43sg3j.execute-api.us-west-2.amazonaws.com"
    }
  ]
}
