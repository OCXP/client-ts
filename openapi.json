{
  "openapi": "3.1.0",
  "info": {
    "title": "OCXP - Open Context Exchange Protocol",
    "description": "\n## Context Operations (Recommended)\n\n- `POST /ocxp/context/discover` - Smart context discovery (replaces /kb/query and /kb/rag)\n- `POST /ocxp/context/validate` - Validate AI responses against context\n- `GET /ocxp/context/{type}/{id}` - Load content by ID\n- `POST /ocxp/context/{type}/bulk/*` - Bulk operations (read/write/delete)\n\n## Deprecated Endpoints\n\nThe following endpoints are deprecated and will be removed in v2.0:\n\n- `POST /ocxp/kb/query` - Use `/ocxp/context/discover` instead\n- `POST /ocxp/kb/rag` - Use `/ocxp/context/discover` with `include_answer=true`\n\n## Migration Guide\n\n**Before (deprecated):**\n```json\nPOST /ocxp/kb/query\n{\"query\": \"How does auth work?\", \"max_results\": 5}\n```\n\n**After (recommended):**\n```json\nPOST /ocxp/context/discover\n{\"query\": \"How does auth work?\", \"options\": {\"max_results\": 5}}\n```\n\nFor RAG with LLM answers, add `\"include_answer\": true` to options.\n",
    "version": "2.0.0"
  },
  "paths": {
    "/ocxp/resolution/resolve": {
      "post": {
        "tags": [
          "OCXP Resolution",
          "OCXP Resolution"
        ],
        "summary": "Resolve Ocxp Uri",
        "description": "Resolve OCXP URI to actual file locations.\n\nConverts ocxp://workspace/content_type/path to:\n- S3 URI (s3://bucket/path)\n- Local filesystem path (/vault/path)\n- Obsidian URI (obsidian://open?vault=...&file=...)\n\nArgs:\n    request: Resolution request with URI and mode\n    workspace: Current workspace from auth context\n\nReturns:\n    OCXPResolution with resolved paths and existence check\n\nRaises:\n    HTTPException: If URI format is invalid or content type is unknown",
        "operationId": "resolveOcxpUri",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OCXPResolveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OCXPResolution"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/resolution/validate": {
      "post": {
        "tags": [
          "OCXP Resolution",
          "OCXP Resolution"
        ],
        "summary": "Validate Ocxp Uri",
        "description": "Validate OCXP URI format and content type.\n\nArgs:\n    request: Validation request with URI\n\nReturns:\n    OCXPValidateResponse with validation result",
        "operationId": "validateOcxpUri",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OCXPValidateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OCXPValidateResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/resolution/batch": {
      "post": {
        "tags": [
          "OCXP Resolution",
          "OCXP Resolution"
        ],
        "summary": "Batch Resolve Ocxp Uris",
        "description": "Batch resolve multiple OCXP URIs in a single request.\n\nArgs:\n    request: Batch resolution request with list of URIs\n    workspace: Current workspace from auth context\n\nReturns:\n    OCXPBatchResolveResponse with results and errors",
        "operationId": "batchResolveOcxpUris",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/OCXPBatchResolveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OCXPBatchResolveResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/bulk/read": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Read Content",
        "description": "Bulk read content.",
        "operationId": "bulkReadContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkReadRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkReadResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/bulk/write": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Write Content",
        "description": "Bulk write content with metadata sidecar and KB auto-indexing support.",
        "operationId": "bulkWriteContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkWriteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkWriteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/bulk/delete": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Delete Content",
        "description": "Bulk delete content with KB auto-removal support.",
        "operationId": "bulkDeleteContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/app__routers__bulk__BulkDeleteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkDeleteResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/bulk/move": {
      "post": {
        "tags": [
          "Bulk"
        ],
        "summary": "Bulk Move Content",
        "description": "Bulk move (copy + delete) content.\n\nPerforms batch copy followed by batch delete for efficiency.\nIndividual item failures are reported in results.",
        "operationId": "bulkMoveContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkMoveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkMoveResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/admin/metadata/regenerate": {
      "post": {
        "tags": [
          "Admin"
        ],
        "summary": "Regenerate metadata for S3 documents",
        "description": "Regenerates Bedrock KB metadata sidecars for existing S3 documents.\n\n    Use cases:\n    - After schema changes (e.g., adding new metadata fields)\n    - Fixing incorrect metadata from previous versions\n    - Bulk metadata updates for a workspace or project\n\n    Background processing:\n    - If max_files is None or > 1000, job is queued for background processing\n    - Use job_id to check status via /admin/jobs/{job_id} endpoint\n\n    Dry run mode:\n    - Shows what would change without updating S3\n    - Useful for validating changes before applying",
        "operationId": "regenerateMetadata",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegenerateMetadataRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Metadata regeneration completed or queued",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegenerateMetadataResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request parameters"
          },
          "403": {
            "description": "Insufficient permissions"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/admin/health": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "Health check",
        "description": "Check system health and component status",
        "operationId": "healthCheck",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthCheckResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/admin/info": {
      "get": {
        "tags": [
          "Admin"
        ],
        "summary": "System information",
        "description": "Get system configuration and runtime information",
        "operationId": "systemInfo",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/discover": {
      "post": {
        "tags": [
          "Context Discovery"
        ],
        "summary": "Discover Context",
        "description": "Discover relevant context using smart strategy selection.\n\nOCXP automatically selects the best retrieval strategy:\n- **Semantic search** (default): Fast vector similarity search\n- **RAG with LLM answer**: When `include_answer=True`\n- **Hybrid search**: When `search_type=HYBRID`\n\nThe response includes:\n- **results**: Ranked context snippets with scores\n- **answer**: LLM-generated answer (only if include_answer=True)\n- **strategy_used**: Which strategy was applied\n- **reranked**: Whether results were quality-reranked\n\n**Replaces:**\n- `POST /ocxp/kb/query` - Use this with default options\n- `POST /ocxp/kb/rag` - Use this with `include_answer=True`\n\n**Example Request:**\n```json\n{\n    \"query\": \"How does authentication work?\",\n    \"options\": {\n        \"content_type\": \"code\",\n        \"project\": \"brain\",\n        \"include_answer\": true,\n        \"max_results\": 5\n    }\n}\n```",
        "operationId": "discoverContext",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DiscoverRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DiscoverResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/validate": {
      "post": {
        "tags": [
          "Context Discovery"
        ],
        "summary": "Validate Response",
        "description": "Validate AI response against context.\n\nChecks for:\n- **Hallucination**: Claims not supported by context\n- **Outdated**: References to stale information\n- **Incomplete**: Missing key context\n- **Contradiction**: Conflicts with source context\n\nThe response includes:\n- **valid**: True if no high-severity issues found\n- **confidence**: Confidence in validation (0.0 - 1.0)\n- **quality_score**: Overall quality score (0.0 - 1.0)\n- **issues**: List of specific issues found\n- **verified_claims**: Number of claims verified against context\n- **unverified_claims**: Number of claims that couldn't be verified\n\n**Example Request:**\n```json\n{\n    \"response\": \"The authentication uses JWT tokens with a 1-hour expiry.\",\n    \"context_ids\": [\"kb-0\", \"kb-1\", \"kb-2\"],\n    \"query\": \"How does authentication work?\",\n    \"strict_mode\": false\n}\n```\n\n**Example Response:**\n```json\n{\n    \"valid\": true,\n    \"confidence\": 0.85,\n    \"quality_score\": 0.9,\n    \"issues\": [],\n    \"verified_claims\": 5,\n    \"unverified_claims\": 1\n}\n```",
        "operationId": "validateResponse",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidateResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/ingest": {
      "post": {
        "tags": [
          "Context Discovery"
        ],
        "summary": "Ingest Documents",
        "description": "Ingest documents directly into Bedrock KB.\n\nTriggers immediate indexing of specific documents that already exist in S3.\nDocuments are batched (max 25 per API call) for efficiency.\n\n**Prerequisites:**\n- Documents must already be written to S3 via OCXP content API\n- Each document should have a `.metadata.json` sidecar for filtering\n\n**Use Case:**\nCalled from Obsidian plugin when user clicks \"Index Now\" button\nto immediately index pending files instead of waiting for 5-min sync.\n\n**Example Request:**\n```json\n{\n    \"documents\": [\n        {\"path\": \"project/uuid/auth.md\"},\n        {\"path\": \"project/uuid/flows/login.md\"}\n    ]\n}\n```\n\n**Example Response:**\n```json\n{\n    \"indexed\": 2,\n    \"failed\": 0,\n    \"skipped\": 0,\n    \"results\": [\n        {\"path\": \"project/uuid/auth.md\", \"status\": \"indexed\"},\n        {\"path\": \"project/uuid/flows/login.md\", \"status\": \"indexed\"}\n    ]\n}\n```",
        "operationId": "ingestDocuments",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IngestRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IngestResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/visual/analyse": {
      "post": {
        "tags": [
          "Visual Analysis"
        ],
        "summary": "Analyse Visual Content",
        "description": "Analyze visual content using direct vision model (Claude 3 Sonnet).\n\nTwo modes:\n1. **Direct paths**: Provide `image_paths` to analyze specific images\n2. **Search + analyze**: Provide `search_query` to find relevant images first\n\nThe endpoint:\n- Loads images from S3 (contexthub-visual bucket)\n- Sends them to Claude 3 Sonnet vision model\n- Returns AI analysis based on actual image content\n\n**Why Two Stages?**\n\nThe Visual KB uses text embeddings (Titan Text V2), NOT image embeddings.\nThis means KB search can only find images by metadata (descriptions, tags, filenames),\nnot by visual similarity or content. This endpoint provides the second stage:\nonce you have image paths (from discover_visual or directly), analyze the actual pixels.\n\n**Example Request (direct paths):**\n```json\n{\n    \"question\": \"What UI patterns are shown in these screenshots?\",\n    \"image_paths\": [\n        \"screenshots/mission-123/login.png\",\n        \"screenshots/mission-123/dashboard.png\"\n    ],\n    \"max_images\": 5\n}\n```\n\n**Example Request (search + analyze):**\n```json\n{\n    \"question\": \"What authentication methods are visible?\",\n    \"search_query\": \"login authentication forms\",\n    \"max_images\": 5,\n    \"mission_id\": \"abc-123\"\n}\n```\n\n**Example Response:**\n```json\n{\n    \"answer\": \"The screenshots show a login page with email/password fields and a 'Remember me' checkbox. The dashboard includes a navigation sidebar with user profile section...\",\n    \"images_analyzed\": [\n        {\n            \"s3_path\": \"workspaces/prod/visual/screenshots/mission-123/login.png\",\n            \"ocxp_link\": \"ocxp://prod/visual/screenshots/mission-123/login.png\",\n            \"analyzed\": true\n        },\n        {\n            \"s3_path\": \"workspaces/prod/visual/screenshots/mission-123/dashboard.png\",\n            \"ocxp_link\": \"ocxp://prod/visual/screenshots/mission-123/dashboard.png\",\n            \"analyzed\": true\n        }\n    ],\n    \"total_images\": 2,\n    \"model_used\": \"anthropic.claude-3-sonnet-20240229-v1:0\",\n    \"mission_id\": \"abc-123\"\n}\n```\n\n**Image Path Formats:**\n- Relative: `screenshots/mission-123/login.png` -> auto-prefixed with workspace\n- Visual prefix: `visual/screenshots/...` -> auto-prefixed with workspace\n- Full S3 key: `workspaces/prod/visual/screenshots/...` -> used as-is\n\n**Supported Image Formats:**\n- PNG, JPEG, GIF, WebP\n- Auto-detected from file extension or magic bytes",
        "operationId": "analyseVisualContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VisualAnalyseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VisualAnalyseResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/visual/screenshot": {
      "post": {
        "tags": [
          "Visual Browse"
        ],
        "summary": "Capture Screenshot",
        "description": "Capture a screenshot of a webpage.\n\nUses browser automation to navigate to URL and capture screenshot.\nScreenshot is stored in OCXP visual storage.\n\nIn mock mode (BROWSER_MOCK_MODE=true), returns a placeholder screenshot\nfor stress testing without requiring Lambda/AgentCore.",
        "operationId": "captureScreenshot",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ScreenshotRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScreenshotResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/visual/browse": {
      "post": {
        "tags": [
          "Visual Browse"
        ],
        "summary": "Browse Page",
        "description": "Browse a webpage with optional interactions.\n\nNavigates to URL, performs actions (fill forms, click buttons),\nand optionally extracts content and captures screenshot.\n\nIn mock mode (BROWSER_MOCK_MODE=true), returns placeholder responses\nfor stress testing without requiring Lambda/AgentCore.",
        "operationId": "browsePage",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BrowseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BrowseResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/visual/extract": {
      "post": {
        "tags": [
          "Visual Browse"
        ],
        "summary": "Extract Elements",
        "description": "Extract elements from a webpage.\n\nNavigates to URL and extracts specified element types\n(links, forms, buttons, images, headings, or all).\n\nIn mock mode (BROWSER_MOCK_MODE=true), returns placeholder elements\nfor stress testing without requiring Lambda/AgentCore.",
        "operationId": "extractElements",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExtractRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExtractResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/visual/compare": {
      "post": {
        "tags": [
          "Visual Browse"
        ],
        "summary": "Compare Pages",
        "description": "Compare two webpages.\n\nCaptures both pages and compares them based on compare_type:\n- visual: Screenshot similarity\n- structure: DOM structure comparison\n- content: Text content comparison\n\nIn mock mode (BROWSER_MOCK_MODE=true), returns placeholder comparison\nfor stress testing without requiring Lambda/AgentCore.",
        "operationId": "comparePages",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CompareRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CompareResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/list": {
      "get": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "List Prototype Chats",
        "description": "List all accessible prototype chats.\n\nReturns a list of chats that are accessible with the configured API key.\nUse this to discover which chats can be linked to missions.\n\n**Query Parameters:**\n- `provider`: Provider name (v0, lovable, bolt) - default: v0\n\n**Example Response:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chats\": [\n        {\n            \"id\": \"qFPCm5zzimu\",\n            \"name\": \"Mission Dashboard\",\n            \"web_url\": \"https://v0.app/chat/qFPCm5zzimu\",\n            \"privacy\": \"team\",\n            \"latest_preview_url\": \"https://demo-xxx.vusercontent.net\"\n        }\n    ],\n    \"total\": 5\n}\n```",
        "operationId": "listPrototypeChats",
        "parameters": [
          {
            "name": "provider",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "v0",
              "title": "Provider"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/preview": {
      "post": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Preview Prototype Chat",
        "description": "Preview a prototype chat before linking.\n\nFetches chat metadata and version list without storing anything.\nUse this to show available versions in Obsidian UI before the user\nselects which version to link to a mission.\n\n**Example Request:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_url\": \"https://v0.dev/chat/abc123\"\n}\n```\n\n**Example Response:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"abc123\",\n    \"web_url\": \"https://v0.dev/chat/abc123\",\n    \"messages_count\": 15,\n    \"versions\": [\n        {\"id\": \"v1\", \"preview_url\": \"https://abc123.vercel.app\", \"files\": [\"page.tsx\", \"layout.tsx\"]},\n        {\"id\": \"v2\", \"preview_url\": \"https://abc123-v2.vercel.app\", \"files\": [\"page.tsx\", \"layout.tsx\", \"sidebar.tsx\"]}\n    ],\n    \"latest_preview_url\": \"https://abc123-v2.vercel.app\",\n    \"can_download_files\": true\n}\n```",
        "operationId": "previewPrototypeChat",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrototypeChatPreviewRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatPreviewResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/link": {
      "post": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Link Prototype Chat",
        "description": "Link a prototype chat to a mission.\n\nFetches the full conversation history and optionally downloads version files\nfrom the prototype provider (v0, Lovable, Bolt). Stores everything in OCXP\nand optionally screenshots the preview.\n\n**Workflow for Obsidian:**\n1. User enters chat URL in mission creation form\n2. Obsidian calls `/preview` to get available versions\n3. User selects a version\n4. Obsidian calls `/link` with version_id to download files\n\n**What gets stored:**\n- `conversation.md` - Full chat history as searchable markdown (KB indexed)\n- `metadata.json` - Structured metadata for programmatic access\n- `versions/{version_id}/*.tsx` - Actual code files from selected version\n- `screenshots/preview.png` - Screenshot of the preview URL\n\n**Example Request:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_url\": \"https://v0.dev/chat/abc123\",\n    \"version_id\": \"v2\",\n    \"mission_id\": \"mission-xyz\",\n    \"download_files\": true,\n    \"screenshot_preview\": true\n}\n```\n\n**Example Response:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"abc123\",\n    \"web_url\": \"https://v0.dev/chat/abc123\",\n    \"mission_id\": \"mission-xyz\",\n    \"messages_count\": 15,\n    \"versions_count\": 2,\n    \"latest_preview_url\": \"https://abc123-v2.vercel.app\",\n    \"screenshot_link\": \"ocxp://prod/visual/prototype-chats/mission-xyz/v0/abc123/screenshots/preview.png\",\n    \"content_links\": [\n        \"ocxp://prod/visual/prototype-chats/mission-xyz/v0/abc123/conversation.md\",\n        \"ocxp://prod/visual/prototype-chats/mission-xyz/v0/abc123/versions/v2/page.tsx\"\n    ],\n    \"indexed\": true\n}\n```",
        "operationId": "linkPrototypeChat",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrototypeChatLinkRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatLinkResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/sync": {
      "post": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Sync Prototype Chat",
        "description": "Sync/refresh a linked prototype chat with latest changes.\n\nRe-fetches the conversation and version data from the provider\nand updates the stored content in OCXP.\n\n**Example Request:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"abc123\",\n    \"mission_id\": \"mission-xyz\"\n}\n```",
        "operationId": "syncPrototypeChat",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrototypeChatSyncRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatSyncResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/{provider}/{chat_id}/stored-versions": {
      "get": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Get Stored Versions",
        "description": "Get stored version IDs from DynamoDB (fast, no S3/API calls).\n\nThis is a lightweight endpoint optimized for sub-100ms response times.\nUse this to quickly check which versions are already downloaded without\ntriggering a full sync operation.\n\n**Path Parameters:**\n- `provider`: Provider name (v0, lovable, bolt)\n- `chat_id`: Chat ID\n\n**Query Parameters:**\n- `include_details`: If true, returns full version metadata (files, pages, screenshots)\n\n**Use Cases:**\n- Determine \"Download\" vs \"Reload\" button state for each version\n- Check if \"Sync Latest\" button should be disabled (latest already stored)\n- Get full version details for Files/Pages tabs (when include_details=true)\n\n**Example Response (include_details=false):**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"YivecgytPyg\",\n    \"stored_versions\": [\"aVVgJPrZiiE\", \"8xP0kUQqTxe\", \"cTeBCcjCGbM\"],\n    \"latest_version_id\": \"cTeBCcjCGbM\",\n    \"version_details\": []\n}\n```\n\n**Example Response (include_details=true):**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"YivecgytPyg\",\n    \"stored_versions\": [\"aVVgJPrZiiE\"],\n    \"latest_version_id\": \"cTeBCcjCGbM\",\n    \"version_details\": [\n        {\n            \"id\": \"aVVgJPrZiiE\",\n            \"preview_url\": \"https://demo.vusercontent.net/...\",\n            \"screenshot_link\": \"ocxp://...\",\n            \"files\": [\"app/page.tsx\", \"app/layout.tsx\"],\n            \"pages\": [{\"route\": \"/\", \"file\": \"app/page.tsx\", \"screenshot_link\": \"ocxp://...\"}],\n            \"created_at\": \"2024-01-15T10:30:00Z\",\n            \"synced_at\": \"2024-01-15T10:35:00Z\"\n        }\n    ]\n}\n```",
        "operationId": "getStoredVersions",
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Provider"
            }
          },
          {
            "name": "chat_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Chat Id"
            }
          },
          {
            "name": "include_details",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Details"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeStoredVersionsResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/{provider}/{chat_id}/screenshots": {
      "post": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Capture Page Screenshots",
        "description": "Capture screenshots for specific pages of a prototype version.\n\nUse this endpoint to capture screenshots for auto-discovered pages without\ntriggering a full sync. This is useful when pages are detected from file\nstructure but screenshots haven't been captured yet.\n\n**Path Parameters:**\n- `provider`: Provider name (v0, lovable, bolt)\n- `chat_id`: Chat ID\n\n**Request Body:**\n- `version_id`: Version ID to capture screenshots for\n- `routes`: List of routes to screenshot (e.g., ['/', '/dashboard', '/settings'])\n\n**Use Cases:**\n- Capture screenshots for newly discovered pages after file sync\n- Re-capture screenshots after preview URL changes\n- Capture screenshots for specific routes without full resync\n\n**Example Request:**\n```json\n{\n    \"version_id\": \"aVVgJPrZiiE\",\n    \"routes\": [\"/\", \"/dashboard\", \"/settings\"]\n}\n```\n\n**Example Response:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"YivecgytPyg\",\n    \"version_id\": \"aVVgJPrZiiE\",\n    \"screenshots\": {\n        \"/\": \"ocxp://prod/prototype/FQV1NSmpVqk/YivecgytPyg/aVVgJPrZiiE/visual/screenshots/root.png\",\n        \"/dashboard\": \"ocxp://prod/prototype/FQV1NSmpVqk/YivecgytPyg/aVVgJPrZiiE/visual/screenshots/dashboard.png\",\n        \"/settings\": \"ocxp://prod/prototype/FQV1NSmpVqk/YivecgytPyg/aVVgJPrZiiE/visual/screenshots/settings.png\"\n    },\n    \"captured_count\": 3,\n    \"failed_routes\": []\n}\n```",
        "operationId": "capturePageScreenshots",
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Provider"
            }
          },
          {
            "name": "chat_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Chat Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CapturePageScreenshotsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CapturePageScreenshotsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/{provider}/{chat_id}": {
      "get": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Get Prototype Chat",
        "description": "Get stored prototype chat data from OCXP.\n\nReturns the stored conversation, versions, and file links for a\npreviously linked prototype chat.\n\n**Path Parameters:**\n- `provider`: Provider name (v0, lovable, bolt)\n- `chat_id`: Chat ID\n\n**Query Parameters:**\n- `project_id`: Project ID (use \"no-project\" if chat has no project)\n- `version_id`: Version ID to retrieve\n\n**Example Response:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"abc123\",\n    \"web_url\": \"https://v0.dev/chat/abc123\",\n    \"mission_id\": \"mission-xyz\",\n    \"messages\": [...],\n    \"versions\": [...],\n    \"conversation_link\": \"ocxp://prod/prototype/FQV1NSmpVqk/abc123/aVVgJPrZiiE/docs/conversation.md\",\n    \"file_links\": [\n        \"ocxp://prod/prototype/FQV1NSmpVqk/abc123/aVVgJPrZiiE/code/page.tsx\"\n    ]\n}\n```",
        "operationId": "getPrototypeChat",
        "parameters": [
          {
            "name": "provider",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Provider"
            }
          },
          {
            "name": "chat_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Chat Id"
            }
          },
          {
            "name": "project_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Project Id"
            }
          },
          {
            "name": "version_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Version Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Chat data returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatGetResponse"
                }
              }
            }
          },
          "404": {
            "description": "Chat not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/sync-async": {
      "post": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Sync Prototype Chat Async",
        "description": "Start an async prototype chat sync job (202 Accepted).\n\nCreates a job and queues it for background processing. Returns immediately\nwith a job_id that can be used to poll for status or receive WebSocket updates.\n\n**Benefits:**\n- Immediate response (no timeout on long syncs)\n- Real-time progress updates via WebSocket\n- Resumable on failure (job tracked in DynamoDB)\n- Better suited for large chats with many files/screenshots\n\n**Frontend Integration:**\n\nOption 1: Polling\n```javascript\nconst { job_id } = await fetch('/ocxp/prototype/chat/sync-async', {\n  method: 'POST',\n  body: JSON.stringify({ chat_id: 'xxx', mission_id: 'yyy' })\n}).then(r => r.json());\n\n// Poll every second\nwhile (status !== 'complete' && status !== 'failed') {\n  await sleep(1000);\n  const job = await fetch(`/ocxp/prototype/chat/sync-status/${job_id}`).then(r => r.json());\n  updateProgressBar(job.progress);\n}\n```\n\nOption 2: WebSocket\n```javascript\nws.onmessage = (msg) => {\n  if (msg.type === 'prototype_sync_progress') {\n    updateProgressBar(msg.progress, msg.current_step);\n  }\n  if (msg.type === 'prototype_sync_complete') {\n    handleComplete(msg.content_links);\n  }\n};\n```\n\n**Example Request:**\n```json\n{\n    \"provider\": \"v0\",\n    \"chat_id\": \"YivecgytPyg\",\n    \"mission_id\": \"mission-xyz\",\n    \"download_files\": true,\n    \"download_screenshots\": true\n}\n```\n\n**Example Response (202 Accepted):**\n```json\n{\n    \"job_id\": \"job-a1b2c3d4e5f6\",\n    \"status\": \"queued\",\n    \"message\": \"Job queued for processing\"\n}\n```",
        "operationId": "syncPrototypeChatAsync",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrototypeChatSyncAsyncRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeChatSyncAsyncResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/prototype/chat/sync-status/{job_id}": {
      "get": {
        "tags": [
          "Prototype Chat"
        ],
        "summary": "Get Sync Status",
        "description": "Get the current status of an async sync job.\n\nUse this endpoint to poll for progress updates on a sync job.\nFor real-time updates, prefer WebSocket subscription instead.\n\n**Path Parameters:**\n- `job_id`: Job identifier from sync-async response\n\n**Example Response (in progress):**\n```json\n{\n    \"job_id\": \"job-a1b2c3d4e5f6\",\n    \"status\": \"downloading\",\n    \"progress\": 35,\n    \"current_step\": \"Downloading files for version 2/5...\",\n    \"files_processed\": 12,\n    \"files_total\": 34,\n    \"screenshots_processed\": 1,\n    \"screenshots_total\": 5,\n    \"content_links\": [],\n    \"error\": null,\n    \"created_at\": \"2024-01-15T10:30:00Z\",\n    \"updated_at\": \"2024-01-15T10:30:15Z\"\n}\n```\n\n**Example Response (complete):**\n```json\n{\n    \"job_id\": \"job-a1b2c3d4e5f6\",\n    \"status\": \"complete\",\n    \"progress\": 100,\n    \"current_step\": \"Complete\",\n    \"files_processed\": 34,\n    \"files_total\": 34,\n    \"screenshots_processed\": 5,\n    \"screenshots_total\": 5,\n    \"content_links\": [\n        \"ocxp://prod/prototype/FQV1NSmpVqk/chat123/v1/docs/conversation.md\",\n        \"ocxp://prod/prototype/FQV1NSmpVqk/chat123/v1/code/page.tsx\"\n    ],\n    \"error\": null,\n    \"created_at\": \"2024-01-15T10:30:00Z\",\n    \"updated_at\": \"2024-01-15T10:31:00Z\"\n}\n```",
        "operationId": "getSyncStatus",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job status returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrototypeSyncJobStatusResponse"
                }
              }
            }
          },
          "404": {
            "description": "Job not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session": {
      "get": {
        "tags": [
          "Session"
        ],
        "summary": "List all sessions",
        "description": "Returns sessions for the workspace filtered by status. Uses AgentCore Memory when available for fast retrieval. Supports offset-based pagination.",
        "operationId": "listSessions",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of sessions to return",
              "default": 20,
              "title": "Limit"
            },
            "description": "Maximum number of sessions to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of sessions to skip (for pagination)",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of sessions to skip (for pagination)"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Filter by status: active, archived",
              "default": "active",
              "title": "Status"
            },
            "description": "Filter by status: active, archived"
          },
          {
            "name": "order_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Field to order by (created_at, updated_at)",
              "title": "Order By"
            },
            "description": "Field to order by (created_at, updated_at)"
          },
          {
            "name": "order_dir",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort direction (asc, desc)",
              "default": "desc",
              "title": "Order Dir"
            },
            "description": "Sort direction (asc, desc)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of sessions returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Create session",
        "description": "Creates a new session linked to a mission in DynamoDB. Used by Brain to establish session-mission relationship.",
        "operationId": "createSession",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSessionRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Session created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionResponse"
                }
              }
            }
          },
          "409": {
            "description": "Session already exists"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/messages": {
      "get": {
        "tags": [
          "Session"
        ],
        "summary": "Get session messages",
        "description": "Loads message history for a session from S3 storage.",
        "operationId": "getSessionMessages",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum number of messages to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum number of messages to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Messages returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionMessagesResponse"
                }
              }
            }
          },
          "404": {
            "description": "Session not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/metadata": {
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Update session metadata",
        "description": "Updates session title and message count. Creates session if it does not exist.",
        "operationId": "updateSessionMetadata",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SessionMetadataUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session metadata updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/fork": {
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Fork session",
        "description": "Creates a new session branched from an existing one at a specified message point.",
        "operationId": "forkSession",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ForkRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Session forked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SessionForkResponse"
                }
              }
            }
          },
          "404": {
            "description": "Parent session not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/session/{session_id}/archive": {
      "post": {
        "tags": [
          "Session"
        ],
        "summary": "Archive session",
        "description": "Soft deletes a session by changing its status to archived.",
        "operationId": "archiveSession",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session archived successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Session not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/missions/{mission_id}/checkpoints": {
      "get": {
        "tags": [
          "Checkpoint"
        ],
        "summary": "List mission checkpoints",
        "description": "Returns all checkpoints for a mission from AgentCore Memory, optionally filtered by branch",
        "operationId": "listMissionCheckpoints",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "branch",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by branch name",
              "title": "Branch"
            },
            "description": "Filter by branch name"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of checkpoints returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CheckpointListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/checkpoints/{checkpoint_id}": {
      "get": {
        "tags": [
          "Checkpoint"
        ],
        "summary": "Get checkpoint details",
        "description": "Returns detailed checkpoint information including metadata",
        "operationId": "getCheckpoint",
        "parameters": [
          {
            "name": "checkpoint_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Checkpoint ID",
              "title": "Checkpoint Id"
            },
            "description": "Checkpoint ID"
          },
          {
            "name": "mission_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Checkpoint details returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CheckpointResponse"
                }
              }
            }
          },
          "404": {
            "description": "Checkpoint not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/missions/{mission_id}/checkpoints/branches": {
      "get": {
        "tags": [
          "Checkpoint"
        ],
        "summary": "List checkpoint branches",
        "description": "Returns all branches for a mission",
        "operationId": "listMissionBranches",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of branch names returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BranchListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/checkpoints/{checkpoint_id}/export": {
      "post": {
        "tags": [
          "Checkpoint"
        ],
        "summary": "Export checkpoint as SOP markdown",
        "description": "Export checkpoint data as a Standard Operating Procedure .md file",
        "operationId": "exportCheckpointAsSop",
        "parameters": [
          {
            "name": "checkpoint_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Checkpoint event ID",
              "title": "Checkpoint Id"
            },
            "description": "Checkpoint event ID"
          },
          {
            "name": "mission_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Markdown file generated successfully",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Checkpoint not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/checkpoints/{checkpoint_id}/promote": {
      "post": {
        "tags": [
          "Checkpoint"
        ],
        "summary": "Promote checkpoint to long-term memory",
        "description": "Convert checkpoint event to long-term memory record for permanent storage",
        "operationId": "promoteCheckpointToLongterm",
        "parameters": [
          {
            "name": "checkpoint_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Checkpoint event ID",
              "title": "Checkpoint Id"
            },
            "description": "Checkpoint event ID"
          },
          {
            "name": "mission_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Checkpoint promoted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Checkpoint not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "List all projects",
        "description": "Returns all projects in the workspace with their linked repos and missions. Supports offset-based pagination.",
        "operationId": "listProjects",
        "parameters": [
          {
            "name": "project_ids",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by specific project IDs",
              "title": "Project Ids"
            },
            "description": "Filter by specific project IDs"
          },
          {
            "name": "include_metadata",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include full metadata (description, repos, databases)",
              "default": false,
              "title": "Include Metadata"
            },
            "description": "Include full metadata (description, repos, databases)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of projects to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of projects to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of projects to skip (for pagination)",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of projects to skip (for pagination)"
          },
          {
            "name": "order_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Field to order by (created_at, updated_at)",
              "title": "Order By"
            },
            "description": "Field to order by (created_at, updated_at)"
          },
          {
            "name": "order_dir",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort direction (asc, desc)",
              "default": "desc",
              "title": "Order Dir"
            },
            "description": "Sort direction (asc, desc)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of projects returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Create a new project",
        "description": "Creates a project with auto-generated UUID. Projects link repos, missions, and sessions for context scoping.",
        "operationId": "createProject",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Project created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/list": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "List all projects (alias)",
        "description": "Alias for GET /ocxp/project. Returns all projects in the workspace. Supports offset-based pagination.",
        "operationId": "listProjectsAlias",
        "parameters": [
          {
            "name": "project_ids",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by specific project IDs",
              "title": "Project Ids"
            },
            "description": "Filter by specific project IDs"
          },
          {
            "name": "include_metadata",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include full metadata (description, repos, databases)",
              "default": false,
              "title": "Include Metadata"
            },
            "description": "Include full metadata (description, repos, databases)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of projects to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of projects to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of projects to skip (for pagination)",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of projects to skip (for pagination)"
          },
          {
            "name": "order_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Field to order by (created_at, updated_at)",
              "title": "Order By"
            },
            "description": "Field to order by (created_at, updated_at)"
          },
          {
            "name": "order_dir",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort direction (asc, desc)",
              "default": "desc",
              "title": "Order Dir"
            },
            "description": "Sort direction (asc, desc)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of projects returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get project details",
        "description": "Returns full project details including linked repos, missions, and metadata.",
        "operationId": "getProject",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Project found and returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Project"
        ],
        "summary": "Update project",
        "description": "Updates project name and/or description. Only provided fields are updated.",
        "operationId": "updateProject",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProjectUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Project updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Delete project",
        "description": "Permanently deletes a project and its metadata. Linked repos are not deleted.",
        "operationId": "deleteProject",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Project deleted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/repos": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Link repository to project",
        "description": "Links a repository to the project with category, priority, and auto-include settings for KB queries.",
        "operationId": "addLinkedRepo",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddRepoRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Repository linked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/repos/{repo_id}": {
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Unlink repository from project",
        "description": "Removes a repository link from the project. The repository itself is not deleted.",
        "operationId": "removeLinkedRepo",
        "parameters": [
          {
            "name": "repo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Repo Id"
            }
          },
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Repository unlinked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/cleanup-dead-repos": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Remove dead repository links",
        "description": "Scans all projects in the workspace and removes links to repositories that no longer exist in the registry.",
        "operationId": "cleanupDeadRepos",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Cleanup completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CleanupDeadReposResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/default-repo": {
      "put": {
        "tags": [
          "Project"
        ],
        "summary": "Set default repository",
        "description": "Sets the default repository for the project. Used for integration and primary context.",
        "operationId": "setDefaultRepo",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetDefaultRepoRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Default repository set successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/context-repos": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get context repositories",
        "description": "Returns all repositories marked for auto-include in KB queries.",
        "operationId": "getContextRepos",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Context repositories returned",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/missions": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Add mission to project",
        "description": "Associates a mission with the project for context grouping.",
        "operationId": "addMission",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddMissionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mission added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/missions/{mission_id}": {
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Remove mission from project",
        "description": "Removes the mission association from the project. The mission itself is not deleted.",
        "operationId": "removeMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mission removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/missions/sync": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Sync project missions",
        "description": "Validates active_mission_ids against mission metadata table and removes orphaned IDs.",
        "operationId": "syncMissions",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sync completed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SyncMissionsResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/databases": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Link database to project",
        "description": "Links a database configuration to the project for agent context.",
        "operationId": "addDatabase",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddDatabaseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Database linked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get project databases",
        "description": "Returns all databases linked to the project.",
        "operationId": "getProjectDatabases",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database list returned",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/databases/{database_id}": {
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Unlink database from project",
        "description": "Removes a database link from the project. The database config is not deleted.",
        "operationId": "removeDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database unlinked successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/default-database": {
      "put": {
        "tags": [
          "Project"
        ],
        "summary": "Set default database",
        "description": "Sets the default database for the project. Used when no specific database_id is provided.",
        "operationId": "setDefaultDatabase",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetDefaultDatabaseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Default database set successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectResponse"
                }
              }
            }
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/download": {
      "get": {
        "tags": [
          "Project",
          "project"
        ],
        "summary": "Download project pack as ZIP",
        "description": "Download complete project as ZIP file.\n\nIncludes:\n- All project files (docs, configs, etc.)\n- Preserves folder structure\n- Excludes archive/ folders and .metadata.json files",
        "operationId": "downloadProjectPack",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Project ZIP file returned"
          },
          "404": {
            "description": "Project not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/credentials": {
      "get": {
        "tags": [
          "Project"
        ],
        "summary": "Get project credentials",
        "description": "Retrieve credentials for a project with decrypted password.",
        "operationId": "getCredentials",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Credentials returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CredentialGetResponse"
                }
              }
            }
          },
          "404": {
            "description": "No credentials found for project"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Save project credentials",
        "description": "Save or update credentials for a project with encrypted password.",
        "operationId": "saveCredentials",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CredentialCreate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Credentials saved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CredentialActionResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to save credentials"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "Project"
        ],
        "summary": "Update project credentials",
        "description": "Update specific fields of project credentials.",
        "operationId": "updateCredentials",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CredentialUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Credentials updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CredentialActionResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to update credentials"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Project"
        ],
        "summary": "Delete project credentials",
        "description": "Delete credentials for a project.",
        "operationId": "deleteCredentials",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Credentials deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CredentialActionResponse"
                }
              }
            }
          },
          "500": {
            "description": "Failed to delete credentials"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/project/{project_id}/credentials/test": {
      "post": {
        "tags": [
          "Project"
        ],
        "summary": "Test project credentials",
        "description": "Test credentials with actual browser-based login attempt. Returns detailed results including screenshot.",
        "operationId": "testCredentials",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "perform_browser_test",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": true,
              "title": "Perform Browser Test"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Test completed (check success field for result)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CredentialTestResponse"
                }
              }
            }
          },
          "500": {
            "description": "Test failed with error"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission": {
      "get": {
        "tags": [
          "Mission"
        ],
        "summary": "List all missions",
        "description": "Returns all missions in the workspace, optionally filtered by project or mission IDs. Supports offset-based pagination.",
        "operationId": "listMissions",
        "parameters": [
          {
            "name": "project_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by project ID",
              "title": "Project Id"
            },
            "description": "Filter by project ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "mission_ids",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by specific mission IDs",
              "title": "Mission Ids"
            },
            "description": "Filter by specific mission IDs"
          },
          {
            "name": "include_metadata",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include full metadata (description, notes, goals)",
              "default": false,
              "title": "Include Metadata"
            },
            "description": "Include full metadata (description, notes, goals)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of missions to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of missions to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of missions to skip (for pagination)",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of missions to skip (for pagination)"
          },
          {
            "name": "order_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Field to order by (created_at, updated_at)",
              "title": "Order By"
            },
            "description": "Field to order by (created_at, updated_at)"
          },
          {
            "name": "order_dir",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort direction (asc, desc)",
              "default": "desc",
              "title": "Order Dir"
            },
            "description": "Sort direction (asc, desc)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of missions returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Mission"
        ],
        "summary": "Create a new mission",
        "description": "Creates a mission with auto-generated UUID and context folder.",
        "operationId": "createMission",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mission created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/list": {
      "get": {
        "tags": [
          "Mission"
        ],
        "summary": "List all missions (alias)",
        "description": "Alias for GET /ocxp/mission. Returns all missions in the workspace with pagination support.",
        "operationId": "listMissionsAlias",
        "parameters": [
          {
            "name": "project_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by project ID",
              "title": "Project Id"
            },
            "description": "Filter by project ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "mission_ids",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by specific mission IDs",
              "title": "Mission Ids"
            },
            "description": "Filter by specific mission IDs"
          },
          {
            "name": "include_metadata",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include full metadata (description, notes, goals)",
              "default": false,
              "title": "Include Metadata"
            },
            "description": "Include full metadata (description, notes, goals)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of missions to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of missions to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of missions to skip (for pagination)",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of missions to skip (for pagination)"
          },
          {
            "name": "order_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Field to order by (created_at, updated_at)",
              "title": "Order By"
            },
            "description": "Field to order by (created_at, updated_at)"
          },
          {
            "name": "order_dir",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort direction (asc, desc)",
              "default": "desc",
              "title": "Order Dir"
            },
            "description": "Sort direction (asc, desc)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of missions returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}": {
      "get": {
        "tags": [
          "Mission"
        ],
        "summary": "Get mission details",
        "description": "Returns full mission details including status, progress, and linked sessions.",
        "operationId": "getMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mission found and returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Mission"
        ],
        "summary": "Update mission",
        "description": "Updates mission metadata. Only provided fields are updated.",
        "operationId": "updateMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mission updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Mission"
        ],
        "summary": "Delete mission",
        "description": "Permanently deletes a mission and its metadata.",
        "operationId": "deleteMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mission deleted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/sessions": {
      "post": {
        "tags": [
          "Mission"
        ],
        "summary": "Add session to mission",
        "description": "Associates a session with the mission.",
        "operationId": "addSession",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddSessionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Session added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/sessions/{session_id}": {
      "delete": {
        "tags": [
          "Mission"
        ],
        "summary": "Remove session from mission",
        "description": "Removes the session association from the mission. The session itself is not deleted.",
        "operationId": "removeSession",
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Session Id"
            }
          },
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Session removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/regenerate": {
      "post": {
        "tags": [
          "Mission"
        ],
        "summary": "Regenerate mission",
        "description": "Archives old generated docs and triggers AgentCore regeneration with updated ticket info.",
        "operationId": "regenerateMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegenerateMissionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Regeneration started successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RegenerateMissionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "500": {
            "description": "Archive or regeneration failed"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/download": {
      "get": {
        "tags": [
          "Mission",
          "mission"
        ],
        "summary": "Download mission pack as ZIP",
        "description": "Download complete mission as ZIP file.\n\nIncludes:\n- All mission files (PHASES.md, TASKS.md, README.md, documents/)\n- Mission metadata JSON\n- Preserves folder structure\n- Excludes archive/ folders",
        "operationId": "downloadMissionPack",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Mission ZIP file returned"
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/documents/create": {
      "post": {
        "tags": [
          "Mission"
        ],
        "summary": "Generate specific document types for a mission",
        "description": "Request on-demand generation of documents (e.g., PRD, implementation guide) using existing mission research and synthesis. Sends message to active agentcore session.",
        "operationId": "createMissionDocuments",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DocumentGenerationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Document generation initiated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DocumentGenerationResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission or session not found"
          },
          "422": {
            "description": "Invalid document types or request"
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/documents/status": {
      "get": {
        "tags": [
          "Mission"
        ],
        "summary": "Get document generation status",
        "description": "Check the status of document generation for a mission.",
        "operationId": "getDocumentsStatus",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/rebuild": {
      "post": {
        "tags": [
          "Rebuild"
        ],
        "summary": "Trigger smart re-execution from feedback",
        "description": "Processes user feedback memos and triggers intelligent re-execution. AI classifies feedback to determine whether new research is needed or just document regeneration. Returns proposals for user approval.",
        "operationId": "triggerRebuild",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RebuildRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Rebuild initiated, proposals ready for review",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RebuildResponse"
                }
              }
            }
          },
          "202": {
            "description": "Rebuild processing, check back later"
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/proposals": {
      "get": {
        "tags": [
          "Rebuild"
        ],
        "summary": "List pending agent proposals",
        "description": "Returns all pending agent proposals (agent_edit, agent_delete, agent_comment) for the mission that are awaiting user approval.",
        "operationId": "listProposals",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status: pending, accepted, rejected",
              "default": "pending",
              "title": "Status"
            },
            "description": "Filter by status: pending, accepted, rejected"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of pending proposals",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProposalListResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/proposals/{proposal_id}/accept": {
      "post": {
        "tags": [
          "Rebuild"
        ],
        "summary": "Accept an agent proposal",
        "description": "Accepts the proposal and applies the suggested change.",
        "operationId": "acceptProposal",
        "parameters": [
          {
            "name": "proposal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Proposal Id"
            }
          },
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Proposal accepted and applied",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Mission or proposal not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/proposals/{proposal_id}/reject": {
      "post": {
        "tags": [
          "Rebuild"
        ],
        "summary": "Reject an agent proposal",
        "description": "Rejects the proposal without applying changes.",
        "operationId": "rejectProposal",
        "parameters": [
          {
            "name": "proposal_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Proposal Id"
            }
          },
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "reason",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Optional reason for rejection",
              "title": "Reason"
            },
            "description": "Optional reason for rejection"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Proposal rejected",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Mission or proposal not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/mission/{mission_id}/provenance": {
      "get": {
        "tags": [
          "Rebuild"
        ],
        "summary": "Query task-to-document provenance",
        "description": "Returns provenance records showing which tasks generated which document sections. Can filter by document path or line number to find the source task.",
        "operationId": "getProvenance",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "document_path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by document path",
              "title": "Document Path"
            },
            "description": "Filter by document path"
          },
          {
            "name": "line_number",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Find provenance for specific line number (requires document_path)",
              "title": "Line Number"
            },
            "description": "Find provenance for specific line number (requires document_path)"
          },
          {
            "name": "task_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by task ID",
              "title": "Task Id"
            },
            "description": "Filter by task ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Provenance records returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProvenanceListResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/kb/status": {
      "get": {
        "tags": [
          "KB"
        ],
        "summary": "Get Kb Status",
        "description": "Get status of all Knowledge Bases (code, docs, visual).\n\nReturns health, repo counts, running jobs, and recent ingestion history.",
        "operationId": "getKbStatus",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KBStatusResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/kb/sync": {
      "post": {
        "tags": [
          "KB"
        ],
        "summary": "Trigger Kb Sync",
        "description": "Trigger Knowledge Base re-indexing.\n\nStarts a Bedrock ingestion job. If a job is already running, returns the existing job ID.",
        "operationId": "triggerKbSync",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TriggerSyncRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TriggerSyncResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/kb/query": {
      "post": {
        "tags": [
          "KB"
        ],
        "summary": "Query Knowledge Base",
        "description": "DEPRECATED: Use POST /ocxp/context/discover instead.\n\nThis endpoint will be removed in v2.0. Migrate to the new unified interface.\n\nSemantic search with optional project scoping and external docs fallback.",
        "operationId": "queryKnowledgeBase",
        "deprecated": true,
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/KBQueryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KBQueryResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/kb/rag": {
      "post": {
        "tags": [
          "KB"
        ],
        "summary": "Rag Knowledge Base",
        "description": "DEPRECATED: Use POST /ocxp/context/discover with include_answer=true instead.\n\nThis endpoint will be removed in v2.0. Migrate to the new unified interface.\n\nRAG query with LLM response and citations.",
        "operationId": "ragKnowledgeBase",
        "deprecated": true,
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RAGRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KBRagResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Create memo",
        "description": "Create a new memo (general or security finding).",
        "operationId": "createMemo",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMemoRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Memo created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Memo"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "get": {
        "tags": [
          "Security Memos"
        ],
        "summary": "List memos",
        "description": "List memos for the workspace with optional filters and pagination.",
        "operationId": "listMemos",
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/MemoStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status (open, acknowledged, resolved, ignored)",
              "title": "Status"
            },
            "description": "Filter by status (open, acknowledged, resolved, ignored)"
          },
          {
            "name": "source_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/SourceType"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by source type (repo, project, mission, doc)",
              "title": "Source Type"
            },
            "description": "Filter by source type (repo, project, mission, doc)"
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/MemoCategory"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by category",
              "title": "Category"
            },
            "description": "Filter by category"
          },
          {
            "name": "severity",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/MemoSeverity"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by minimum severity",
              "title": "Severity"
            },
            "description": "Filter by minimum severity"
          },
          {
            "name": "mission_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by mission ID (extracts from mission source_id)",
              "title": "Mission Id"
            },
            "description": "Filter by mission ID (extracts from mission source_id)"
          },
          {
            "name": "project_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by project ID (matches project source_id)",
              "title": "Project Id"
            },
            "description": "Filter by project ID (matches project source_id)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum results per page",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results per page"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of items to skip (for pagination)",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of items to skip (for pagination)"
          },
          {
            "name": "order_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Field to sort by (created_at, updated_at, highest_severity)",
              "default": "created_at",
              "title": "Order By"
            },
            "description": "Field to sort by (created_at, updated_at, highest_severity)"
          },
          {
            "name": "order_dir",
            "in": "query",
            "required": false,
            "schema": {
              "enum": [
                "asc",
                "desc"
              ],
              "type": "string",
              "description": "Sort direction (asc, desc)",
              "default": "desc",
              "title": "Order Dir"
            },
            "description": "Sort direction (asc, desc)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of memos returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/bulk": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Bulk create memos",
        "description": "Create multiple memos in a single request (max 25).",
        "operationId": "bulkCreateMemos",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkCreateMemoRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Memos created (check results for individual status)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkMemoResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Bulk delete memos",
        "description": "Delete multiple memos in a single request (max 25).",
        "operationId": "bulkDeleteMemos",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/domain__memo_models__BulkDeleteRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Memos deleted (check results for individual status)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkMemoResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/bulk/read": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Bulk read memos",
        "description": "Read multiple memos by IDs in a single request (max 25).",
        "operationId": "bulkReadMemos",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkMemoIdsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Memos read (check results for individual status)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkMemoReadResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/bulk/acknowledge": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Bulk acknowledge memos",
        "description": "Acknowledge multiple memos in a single request (max 25).",
        "operationId": "bulkAcknowledgeMemos",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkAcknowledgeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Memos acknowledged (check results for individual status)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkMemoResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/bulk/resolve": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Bulk resolve memos",
        "description": "Resolve multiple memos in a single request (max 25).",
        "operationId": "bulkResolveMemos",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkResolveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Memos resolved (check results for individual status)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkMemoResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/project/{project_id}": {
      "get": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Get all memos for a project",
        "description": "Load all memos for a project in a single request. This includes:\n    - Memos directly on the project (source_type=project)\n    - Memos on all missions belonging to the project (source_type=mission)\n\n    This is much more efficient than loading memos per-mission individually.\n\n    Use mission_status to filter which missions' memos to include (e.g., \"open,in_progress\"\n    to only get memos from active missions).",
        "operationId": "getProjectMemos",
        "parameters": [
          {
            "name": "project_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Project ID",
              "title": "Project Id"
            },
            "description": "Project ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/MemoStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by memo status",
              "title": "Status"
            },
            "description": "Filter by memo status"
          },
          {
            "name": "category",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/MemoCategory"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by category",
              "title": "Category"
            },
            "description": "Filter by category"
          },
          {
            "name": "mission_status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Comma-separated mission statuses to include (e.g., 'open,in_progress')",
              "title": "Mission Status"
            },
            "description": "Comma-separated mission statuses to include (e.g., 'open,in_progress')"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum results",
              "default": 500,
              "title": "Limit"
            },
            "description": "Maximum results"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "All project memos returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProjectMemosResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/{memo_id}": {
      "get": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Get memo by ID",
        "description": "Get a specific memo by its ID.",
        "operationId": "getMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memo returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Memo"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Update memo",
        "description": "Update a memo's metadata and/or content.",
        "operationId": "updateMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MemoUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Memo updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Memo"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Delete memo",
        "description": "Delete a memo permanently.",
        "operationId": "deleteMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memo deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/source/{source_type}/{source_id}": {
      "get": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Get memo for source",
        "description": "Get memo for a specific source entity (repo, project, mission, doc).",
        "operationId": "getMemoForSource",
        "parameters": [
          {
            "name": "source_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Source type (repo, project, mission, doc)",
              "title": "Source Type"
            },
            "description": "Source type (repo, project, mission, doc)"
          },
          {
            "name": "source_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Source entity ID",
              "title": "Source Id"
            },
            "description": "Source entity ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memo returned or null if none exists",
            "content": {
              "application/json": {
                "schema": {
                  "anyOf": [
                    {
                      "$ref": "#/components/schemas/Memo"
                    },
                    {
                      "type": "null"
                    }
                  ],
                  "title": "Response Getmemoforsource"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/{memo_id}/resolve": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Resolve memo",
        "description": "Mark a memo as resolved. Sets TTL for auto-deletion.",
        "operationId": "resolveMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MemoResolveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Memo resolved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/{memo_id}/acknowledge": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Acknowledge memo",
        "description": "Mark a memo as acknowledged (developer has seen it).",
        "operationId": "acknowledgeMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memo acknowledged successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/memo/{memo_id}/ignore": {
      "post": {
        "tags": [
          "Security Memos"
        ],
        "summary": "Ignore memo",
        "description": "Mark a memo as ignored (false positive or accepted risk).",
        "operationId": "ignoreMemo",
        "parameters": [
          {
            "name": "memo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Memo ID",
              "title": "Memo Id"
            },
            "description": "Memo ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Memo ignored successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MemoActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Memo not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/workflow": {
      "post": {
        "tags": [
          "Workflow"
        ],
        "summary": "Create workflow with tasks",
        "description": "Create a new workflow with optional initial tasks. Tasks are stored as memos.",
        "operationId": "createWorkflow",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkflowCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Workflow created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "get": {
        "tags": [
          "Workflow"
        ],
        "summary": "List workflows",
        "description": "List workflows for a mission with optional status filter and pagination.",
        "operationId": "listWorkflows",
        "parameters": [
          {
            "name": "mission_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Filter by mission ID",
              "title": "Mission Id"
            },
            "description": "Filter by mission ID"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/WorkflowStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by workflow status",
              "title": "Status"
            },
            "description": "Filter by workflow status"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum results per page",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results per page"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of items to skip",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of items to skip"
          },
          {
            "name": "order_by",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(created_at|updated_at|name)$",
              "description": "Field to sort by (created_at, updated_at, name)",
              "default": "created_at",
              "title": "Order By"
            },
            "description": "Field to sort by (created_at, updated_at, name)"
          },
          {
            "name": "order_dir",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "pattern": "^(asc|desc)$",
              "description": "Sort direction (asc, desc)",
              "default": "desc",
              "title": "Order Dir"
            },
            "description": "Sort direction (asc, desc)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of workflows returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/workflow/mission/{mission_id}/archive-all": {
      "post": {
        "tags": [
          "Workflow"
        ],
        "summary": "Archive all workflows for a mission",
        "description": "Archive all workflows for a mission before regeneration.",
        "operationId": "archiveWorkflowsForMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Mission ID",
              "title": "Mission Id"
            },
            "description": "Mission ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Workflows archived successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ArchiveWorkflowsResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/workflow/{workflow_id}": {
      "get": {
        "tags": [
          "Workflow"
        ],
        "summary": "Get workflow with tasks",
        "description": "Get a workflow with all its tasks in strands-compatible format.",
        "operationId": "getWorkflow",
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Workflow ID",
              "title": "Workflow Id"
            },
            "description": "Workflow ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Workflow returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowResponse"
                }
              }
            }
          },
          "404": {
            "description": "Workflow not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Workflow"
        ],
        "summary": "Delete workflow",
        "description": "Delete a workflow and all its task memos.",
        "operationId": "deleteWorkflow",
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Workflow ID",
              "title": "Workflow Id"
            },
            "description": "Workflow ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Workflow deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Workflow not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/workflow/{workflow_id}/start": {
      "post": {
        "tags": [
          "Workflow"
        ],
        "summary": "Start workflow",
        "description": "Mark workflow as running.",
        "operationId": "startWorkflow",
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Workflow ID",
              "title": "Workflow Id"
            },
            "description": "Workflow ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Workflow started successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Workflow not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/workflow/{workflow_id}/tasks": {
      "get": {
        "tags": [
          "Workflow"
        ],
        "summary": "List workflow tasks",
        "description": "List all tasks for a workflow.",
        "operationId": "listTasks",
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Workflow ID",
              "title": "Workflow Id"
            },
            "description": "Workflow ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tasks returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskListResponse"
                }
              }
            }
          },
          "404": {
            "description": "Workflow not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Workflow"
        ],
        "summary": "Add task to workflow",
        "description": "Add a new task to an existing workflow.",
        "operationId": "addTask",
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Workflow ID",
              "title": "Workflow Id"
            },
            "description": "Workflow ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WorkflowTaskCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Task added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskResponse"
                }
              }
            }
          },
          "404": {
            "description": "Workflow not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/workflow/{workflow_id}/tasks/bulk": {
      "patch": {
        "tags": [
          "Workflow"
        ],
        "summary": "Bulk update tasks",
        "description": "Update multiple task statuses in a single request for O(1) performance.",
        "operationId": "bulkUpdateTasks",
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Workflow ID",
              "title": "Workflow Id"
            },
            "description": "Workflow ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkTaskUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Tasks updated (check results for per-task status)",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkTaskUpdateResponse"
                }
              }
            }
          },
          "404": {
            "description": "Workflow not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/workflow/{workflow_id}/tasks/{task_id}": {
      "get": {
        "tags": [
          "Workflow"
        ],
        "summary": "Get task",
        "description": "Get a specific task from a workflow.",
        "operationId": "getTask",
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Workflow ID",
              "title": "Workflow Id"
            },
            "description": "Workflow ID"
          },
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Task ID",
              "title": "Task Id"
            },
            "description": "Task ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Task returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskResponse"
                }
              }
            }
          },
          "404": {
            "description": "Workflow or task not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "patch": {
        "tags": [
          "Workflow"
        ],
        "summary": "Update task",
        "description": "Update a task's status, result, or error.",
        "operationId": "updateTask",
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Workflow ID",
              "title": "Workflow Id"
            },
            "description": "Workflow ID"
          },
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Task ID",
              "title": "Task Id"
            },
            "description": "Task ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Task updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TaskResponse"
                }
              }
            }
          },
          "404": {
            "description": "Workflow or task not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Workflow"
        ],
        "summary": "Delete task",
        "description": "Delete a specific task from a workflow.",
        "operationId": "deleteTask",
        "parameters": [
          {
            "name": "workflow_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Workflow ID",
              "title": "Workflow Id"
            },
            "description": "Workflow ID"
          },
          {
            "name": "task_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Task ID",
              "title": "Task Id"
            },
            "description": "Task ID"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Task deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowActionResponse"
                }
              }
            }
          },
          "404": {
            "description": "Workflow or task not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/chat/completions": {
      "post": {
        "tags": [
          "Chat Completions"
        ],
        "summary": "OpenAI-compatible chat completions",
        "description": "Translates OpenAI Chat Completions requests to AgentCore invocations.",
        "operationId": "createChatCompletion",
        "parameters": [
          {
            "name": "X-Mission",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Mission"
            }
          },
          {
            "name": "X-Project",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Project"
            }
          },
          {
            "name": "X-Session",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-Session"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChatCompletionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Chat completion (streaming or non-streaming)",
            "content": {
              "application/json": {
                "schema": {}
              },
              "text/event-stream": {}
            }
          },
          "503": {
            "description": "AgentCore unavailable"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/agent/invoke": {
      "post": {
        "tags": [
          "Agent"
        ],
        "summary": "Invoke AgentCore through OCXP",
        "description": "Routes requests to AgentCore with mission lifecycle management.\n\nFor `process_mission` action:\n1. Creates mission record in DB if mission_id not provided\n2. Associates mission with project if project_id provided\n3. Forwards request to AgentCore\n4. Streams SSE response back to client\n\nFor other actions (retrigger_task, chat):\n1. Forwards directly to AgentCore\n2. Streams SSE response back",
        "operationId": "invokeAgent",
        "parameters": [
          {
            "name": "authorization",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Authorization"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AgentInvokeRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "SSE stream from AgentCore",
            "content": {
              "application/json": {
                "schema": {}
              },
              "text/event-stream": {}
            }
          },
          "503": {
            "description": "AgentCore unavailable",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Failed to connect to AgentCore"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/agent/health": {
      "get": {
        "tags": [
          "Agent"
        ],
        "summary": "Check agent proxy health",
        "description": "Check if OCXP agent proxy and AgentCore are healthy.",
        "operationId": "agentHealth",
        "responses": {
          "200": {
            "description": "Health status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AgentHealthResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/download": {
      "post": {
        "tags": [
          "Repo"
        ],
        "summary": "Start repository download",
        "description": "Initiates an async download of a Git repository. Returns a job ID for status tracking. If the repository already exists (deduplicated), returns immediately with status='linked'.",
        "operationId": "downloadRepository",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DownloadRequest"
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Download job started or linked to existing",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoDownloadResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid repository URL"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/status/{job_id}": {
      "get": {
        "tags": [
          "Repo"
        ],
        "summary": "Get download status",
        "description": "Returns the current status and progress of a repository download job.",
        "operationId": "getRepoDownloadStatus",
        "parameters": [
          {
            "name": "job_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Job Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Job status returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoStatusResponse"
                }
              }
            }
          },
          "404": {
            "description": "Job not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/list": {
      "get": {
        "tags": [
          "Repo"
        ],
        "summary": "List downloaded repositories",
        "description": "Returns repositories that have been downloaded for the workspace with pagination support.",
        "operationId": "listDownloadedRepos",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of repos to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of repos to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of repos to skip (for pagination)",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of repos to skip (for pagination)"
          },
          {
            "name": "order_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Field to order by (created_at, last_synced)",
              "title": "Order By"
            },
            "description": "Field to order by (created_at, last_synced)"
          },
          {
            "name": "order_dir",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort direction (asc, desc)",
              "default": "desc",
              "title": "Order Dir"
            },
            "description": "Sort direction (asc, desc)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of repositories returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/{repo_id}": {
      "delete": {
        "tags": [
          "Repo"
        ],
        "summary": "Delete repository",
        "description": "Permanently deletes a downloaded repository. Accepts UUID or owner/repo format.",
        "operationId": "delete_repo",
        "parameters": [
          {
            "name": "repo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Repo Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Repository deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoDeleteResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/sync-all": {
      "post": {
        "tags": [
          "Repo"
        ],
        "summary": "Sync all repositories",
        "description": "Checks all repositories for changes and triggers re-download for those with new commits. Use force=true to re-sync all regardless of changes.",
        "operationId": "syncAllRepos",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SyncRequest",
                "default": {
                  "force": false
                }
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Sync jobs started",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoSyncAllResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/{repo_id}/commits": {
      "get": {
        "tags": [
          "Repo"
        ],
        "summary": "Get repository commit status",
        "description": "Returns commit information comparing indexed version with latest GitHub commits. Shows how many commits behind and lists missing commits.",
        "operationId": "getRepoCommits",
        "parameters": [
          {
            "name": "repo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Repo Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Commit status returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoCommitStatusResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/{repo_id}/sync": {
      "post": {
        "tags": [
          "Repo"
        ],
        "summary": "Sync repository",
        "description": "Checks repository for changes and triggers re-download if new commits are found. Use force=true to re-sync regardless of changes.",
        "operationId": "syncRepo",
        "parameters": [
          {
            "name": "repo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Repo Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SyncRequest",
                "default": {
                  "force": false
                }
              }
            }
          }
        },
        "responses": {
          "202": {
            "description": "Sync job started or already up to date",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoSyncResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/repo/{repo_id}/pulls": {
      "get": {
        "tags": [
          "Repo"
        ],
        "summary": "Get repository pull requests",
        "description": "Returns recent pull requests for the repository from GitHub.",
        "operationId": "getRepoPulls",
        "parameters": [
          {
            "name": "repo_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Repo Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 50,
              "minimum": 1,
              "description": "Maximum number of PRs to return",
              "default": 10,
              "title": "Limit"
            },
            "description": "Maximum number of PRs to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Pull requests returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RepoPullRequestsResponse"
                }
              }
            }
          },
          "404": {
            "description": "Repository not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/github/check-access": {
      "post": {
        "tags": [
          "GitHub"
        ],
        "summary": "Github Check Access",
        "description": "Check GitHub repository access.\n\nUses the user's stored GitHub token for private repository access.\nPublic repositories are accessible without a token.",
        "operationId": "githubCheckAccess",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CheckAccessRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/github/branches": {
      "post": {
        "tags": [
          "GitHub"
        ],
        "summary": "Github List Branches",
        "description": "List repository branches.\n\nUses the user's stored GitHub token for private repository access.",
        "operationId": "githubListBranches",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ListBranchesRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/github/contents": {
      "post": {
        "tags": [
          "GitHub"
        ],
        "summary": "Github Get Contents",
        "description": "Get repository contents.\n\nUses the user's stored GitHub token for private repository access.",
        "operationId": "githubGetContents",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GetContentsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "List all database configurations",
        "description": "Returns all database configurations in the workspace. Supports offset-based pagination.",
        "operationId": "listDatabases",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of databases to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of databases to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of databases to skip (for pagination)",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of databases to skip (for pagination)"
          },
          {
            "name": "order_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Field to order by (created_at, updated_at)",
              "title": "Order By"
            },
            "description": "Field to order by (created_at, updated_at)"
          },
          {
            "name": "order_dir",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort direction (asc, desc)",
              "default": "desc",
              "title": "Order Dir"
            },
            "description": "Sort direction (asc, desc)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of databases returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Create a new database configuration",
        "description": "Creates a database configuration with auto-generated UUID. Use postgres_lambda for Lambda-proxied connections.",
        "operationId": "createDatabase",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DatabaseCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Database created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseConfigResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database/list": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "List all database configurations (alias)",
        "description": "Alias for GET /ocxp/database. Returns all databases in the workspace with pagination support.",
        "operationId": "listDatabasesAlias",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Maximum number of databases to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum number of databases to return"
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 0,
              "description": "Number of databases to skip (for pagination)",
              "default": 0,
              "title": "Offset"
            },
            "description": "Number of databases to skip (for pagination)"
          },
          {
            "name": "order_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Field to order by (created_at, updated_at)",
              "title": "Order By"
            },
            "description": "Field to order by (created_at, updated_at)"
          },
          {
            "name": "order_dir",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "description": "Sort direction (asc, desc)",
              "default": "desc",
              "title": "Order Dir"
            },
            "description": "Sort direction (asc, desc)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of databases returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseListResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database/{database_id}": {
      "get": {
        "tags": [
          "Database"
        ],
        "summary": "Get database configuration details",
        "description": "Returns full database configuration including connection settings and allowed tables.",
        "operationId": "getDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database found and returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseConfigResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Database"
        ],
        "summary": "Update database configuration",
        "description": "Updates database configuration. Only provided fields are updated.",
        "operationId": "updateDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DatabaseUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Database updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseConfigResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Database"
        ],
        "summary": "Delete database configuration",
        "description": "Permanently deletes a database configuration.",
        "operationId": "deleteDatabase",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database deleted successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/database/{database_id}/test": {
      "post": {
        "tags": [
          "Database"
        ],
        "summary": "Test database connection",
        "description": "Tests the database connection and returns status.",
        "operationId": "testDatabaseConnection",
        "parameters": [
          {
            "name": "database_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Database Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Connection test completed",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/schema": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "Get database schema",
        "description": "Returns database schema information including tables and their metadata.",
        "operationId": "getSchema",
        "parameters": [
          {
            "name": "pattern",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter tables by name pattern",
              "title": "Pattern"
            },
            "description": "Filter tables by name pattern"
          },
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Schema returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseSchemaResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/sample/{table_name}": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "Get sample data from table",
        "description": "Returns sample rows from a specified table.",
        "operationId": "getSample",
        "parameters": [
          {
            "name": "table_name",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Table Name"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Number of sample rows",
              "default": 5,
              "title": "Limit"
            },
            "description": "Number of sample rows"
          },
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Sample data returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseSampleResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid table name"
          },
          "404": {
            "description": "Database or table not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/tables": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "List available tables",
        "description": "Returns list of tables available in the database. Supports caching.",
        "operationId": "listTables",
        "parameters": [
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "cache_ttl",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 3600,
              "minimum": 0,
              "description": "Cache TTL in seconds (0=no cache)",
              "default": 300,
              "title": "Cache Ttl"
            },
            "description": "Cache TTL in seconds (0=no cache)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Table list returned successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/databases": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "List configured databases",
        "description": "Returns list of database configurations available in the workspace.",
        "operationId": "listContextDatabases",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database list returned successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/database/overview": {
      "get": {
        "tags": [
          "Database Context"
        ],
        "summary": "Get complete database overview",
        "description": "Returns complete database structure with tables, columns, and foreign keys in a single call. Supports caching.",
        "operationId": "getDatabaseOverview",
        "parameters": [
          {
            "name": "database_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Database ID (default: amc-default)",
              "title": "Database Id"
            },
            "description": "Database ID (default: amc-default)"
          },
          {
            "name": "cache_ttl",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 3600,
              "minimum": 0,
              "description": "Cache TTL in seconds (0=no cache)",
              "default": 300,
              "title": "Cache Ttl"
            },
            "description": "Cache TTL in seconds (0=no cache)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Database overview returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DatabaseOverviewResponse"
                }
              }
            }
          },
          "404": {
            "description": "Database not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/types": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Get content types",
        "description": "Returns all available content types (mission, context, repo, etc.) with optional item counts.",
        "operationId": "getContentTypes",
        "parameters": [
          {
            "name": "counts",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include item counts per type",
              "default": false,
              "title": "Counts"
            },
            "description": "Include item counts per type"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "List of content types returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentTypesResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/list": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "List content",
        "description": "Lists all content items of a specific type, optionally filtered by path.",
        "operationId": "listContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by path prefix",
              "title": "Path"
            },
            "description": "Filter by path prefix"
          },
          {
            "name": "project",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by project ID (scopes to linked repos)",
              "title": "Project"
            },
            "description": "Filter by project ID (scopes to linked repos)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum items to return",
              "default": 100,
              "title": "Limit"
            },
            "description": "Maximum items to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Content list returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/query": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Query content",
        "description": "Advanced query with filters on name, path, size, etc. Supports eq, ne, contains, startsWith, gt, lt operators.",
        "operationId": "queryContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/QueryRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Query results returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Invalid filter or content type"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/search": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Search content",
        "description": "Full-text search in content names and paths. Case-insensitive.",
        "operationId": "searchContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Search query string",
              "title": "Q"
            },
            "description": "Search query string"
          },
          {
            "name": "project",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by project ID (scopes to linked repos)",
              "title": "Project"
            },
            "description": "Filter by project ID (scopes to linked repos)"
          },
          {
            "name": "repo_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by repo ID (scopes search to specific repo)",
              "title": "Repo Id"
            },
            "description": "Filter by repo ID (scopes search to specific repo)"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Maximum results to return",
              "default": 50,
              "title": "Limit"
            },
            "description": "Maximum results to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Search results returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentListResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/tree": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Get content tree",
        "description": "Returns hierarchical tree structure of content with configurable depth.",
        "operationId": "getContentTree",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Root path for tree",
              "title": "Path"
            },
            "description": "Root path for tree"
          },
          {
            "name": "project",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by project ID (scopes to linked repos)",
              "title": "Project"
            },
            "description": "Filter by project ID (scopes to linked repos)"
          },
          {
            "name": "depth",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 10,
              "minimum": 1,
              "description": "Maximum tree depth",
              "default": 3,
              "title": "Depth"
            },
            "description": "Maximum tree depth"
          },
          {
            "name": "includeVersions",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include S3 version IDs for files",
              "default": false,
              "title": "Includeversions"
            },
            "description": "Include S3 version IDs for files"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Tree structure returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentTreeResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/stats": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Get content statistics",
        "description": "Returns file counts and sizes grouped by extension for a content path.",
        "operationId": "getContentStats",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "path",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Path to analyze",
              "title": "Path"
            },
            "description": "Path to analyze"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Statistics returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentStatsResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/{content_id}/versions": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "List file versions",
        "description": "Lists all versions of a file. S3 versioning must be enabled on the bucket.",
        "operationId": "listVersions",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "max_versions",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Maximum versions to return",
              "default": 100,
              "title": "Max Versions"
            },
            "description": "Maximum versions to return"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Version list returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VersionListResponse"
                }
              }
            }
          },
          "404": {
            "description": "Content not found"
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/{content_id}": {
      "get": {
        "tags": [
          "Context"
        ],
        "summary": "Read content",
        "description": "Reads content by type and path. Binary files are base64-encoded. Use versionId param to read a specific version.",
        "operationId": "readContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "versionId",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "S3 version ID to read a specific version",
              "title": "Versionid"
            },
            "description": "S3 version ID to read a specific version"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Content returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentReadResponse"
                }
              }
            }
          },
          "404": {
            "description": "Content not found"
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Write content",
        "description": "Writes content to storage with robust verification. Supports ETag for optimistic locking, ifNotExists for creation-only, and wait_for_index/verify_access for synchronous KB indexing verification.",
        "operationId": "writeContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "X-User-Id",
            "in": "header",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "X-User-Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/WriteRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Content written successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentWriteResponse"
                }
              }
            }
          },
          "409": {
            "description": "Content already exists or ETag mismatch"
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Context"
        ],
        "summary": "Delete content",
        "description": "Deletes content. Use recursive=true with confirm=true to delete directories.",
        "operationId": "deleteContent",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "content_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Content Id"
            }
          },
          {
            "name": "recursive",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Delete directory recursively",
              "default": false,
              "title": "Recursive"
            },
            "description": "Delete directory recursively"
          },
          {
            "name": "confirm",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Confirm recursive deletion",
              "default": false,
              "title": "Confirm"
            },
            "description": "Confirm recursive deletion"
          },
          {
            "name": "manage_metadata",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Also delete .metadata.json sidecars",
              "default": true,
              "title": "Manage Metadata"
            },
            "description": "Also delete .metadata.json sidecars"
          },
          {
            "name": "auto_index",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Auto-remove from KB (None = use content_type default)",
              "title": "Auto Index"
            },
            "description": "Auto-remove from KB (None = use content_type default)"
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Content deleted",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentDeleteResponse"
                }
              }
            }
          },
          "404": {
            "description": "Content not found"
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/{content_type}/folder/{folder_path}": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Create folder",
        "description": "Creates a folder with metadata.json for Bedrock KB indexing. The metadata.json serves as a folder marker (S3 doesn't have real folders) and provides KB-filterable attributes.",
        "operationId": "createFolder",
        "parameters": [
          {
            "name": "content_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Content type (mission, project, context, code, etc.)",
              "title": "Content Type"
            },
            "description": "Content type (mission, project, context, code, etc.)"
          },
          {
            "name": "folder_path",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Folder Path"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFolderRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Folder created with metadata.json",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ContentWriteResponse"
                }
              }
            }
          },
          "409": {
            "description": "Folder already exists"
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/move": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Move content",
        "description": "Moves content from source to destination path. Use overwrite=true to replace existing.",
        "operationId": "moveContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MoveRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Content moved successfully",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "404": {
            "description": "Source not found"
          },
          "409": {
            "description": "Destination exists"
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/lock": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Lock content",
        "description": "Acquires an exclusive lock on content for the specified TTL (seconds). Stub endpoint for SDK compatibility.",
        "operationId": "lockContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LockRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lock acquired",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/ocxp/context/unlock": {
      "post": {
        "tags": [
          "Context"
        ],
        "summary": "Unlock content",
        "description": "Releases an exclusive lock on content. Stub endpoint for SDK compatibility.",
        "operationId": "unlockContent",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LockRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Lock released",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/mission/create": {
      "post": {
        "tags": [
          "Tools"
        ],
        "summary": "Create a new mission",
        "description": "Creates a mission with optional project association and goals list.",
        "operationId": "toolCreateMission",
        "parameters": [
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionCreateRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Mission created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionCreateResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/mission/{mission_id}/update": {
      "post": {
        "tags": [
          "Tools"
        ],
        "summary": "Update mission status",
        "description": "Updates mission status, progress percentage, and/or notes.",
        "operationId": "toolUpdateMission",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MissionUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Mission updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionUpdateResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/tools/mission/{mission_id}/context": {
      "get": {
        "tags": [
          "Tools"
        ],
        "summary": "Get mission context",
        "description": "Returns mission context data optimized for AI consumption.",
        "operationId": "getMissionContext",
        "parameters": [
          {
            "name": "mission_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Mission Id"
            }
          },
          {
            "name": "X-Workspace",
            "in": "header",
            "required": false,
            "schema": {
              "type": "string",
              "title": "X-Workspace"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Context returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MissionContextResponse"
                }
              }
            }
          },
          "404": {
            "description": "Mission not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/token": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login For Access Token",
        "description": "OAuth2 compatible login endpoint for Swagger UI.\n\nAuthenticates with Cognito using username/password and returns JWT tokens.\nUse this endpoint to get a token for testing other endpoints in Swagger.\nReturns snake_case fields per OAuth2 spec for Swagger compatibility.",
        "operationId": "loginForAccessToken",
        "requestBody": {
          "content": {
            "application/x-www-form-urlencoded": {
              "schema": {
                "$ref": "#/components/schemas/Body_loginForAccessToken"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OAuth2TokenResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials or user not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login",
        "description": "JSON login endpoint for programmatic clients.\n\nAuthenticates with Cognito using username/password and returns JWT tokens.\nUse /auth/token for OAuth2 form-based login (Swagger UI).",
        "operationId": "login",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successfully authenticated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials or user not found"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/refresh": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Refresh Tokens",
        "description": "Refresh access token using refresh token.\n\nReturns new access and ID tokens. The refresh token remains valid\nuntil it expires (configured in Cognito).",
        "operationId": "refreshTokens",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Tokens refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/RefreshResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid or expired refresh token"
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/config": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get Auth Config",
        "description": "Get public configuration for clients.\n\nReturns the API endpoint, Brain ARN, WebSocket endpoint, and default workspace.\nUsed by Obsidian plugin and CLI to configure themselves.",
        "operationId": "getAuthConfig",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthConfig"
                }
              }
            }
          }
        }
      }
    },
    "/auth/me": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get Current User",
        "description": "Get current authenticated user info.",
        "operationId": "getCurrentUser",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/workspaces": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "List Workspaces",
        "description": "List workspaces for authenticated user.",
        "operationId": "listWorkspaces",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkspacesResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/auth/github-token": {
      "get": {
        "tags": [
          "Auth"
        ],
        "summary": "Get Github Token Status",
        "description": "Check if user has a GitHub token configured.\n\nReturns whether a token is stored and the associated GitHub username,\nbut never returns the actual token value.",
        "operationId": "getGithubTokenStatus",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GitHubTokenStatusResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "put": {
        "tags": [
          "Auth"
        ],
        "summary": "Set Github Token",
        "description": "Save user's GitHub token for server-side repository operations.\n\nThe token is stored securely in DynamoDB linked to the user's Cognito identity.\nThis enables GitHub operations without transmitting the token on every request.",
        "operationId": "setGithubToken",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GitHubTokenRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GitHubTokenSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Validation error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "VALIDATION_ERROR",
                    "message": "Invalid content type",
                    "retryable": false
                  }
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      },
      "delete": {
        "tags": [
          "Auth"
        ],
        "summary": "Delete Github Token",
        "description": "Remove user's stored GitHub token.\n\nDeletes the GitHub token from DynamoDB. The user will need to\nreconfigure their token for future GitHub operations.",
        "operationId": "deleteGithubToken",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GitHubTokenSuccessResponse"
                }
              }
            }
          },
          "429": {
            "description": "Rate limit exceeded",
            "content": {
              "application/json": {
                "example": {
                  "detail": "Rate limit exceeded. Please try again later.",
                  "retry_after": 60
                }
              }
            }
          }
        },
        "security": [
          {
            "OAuth2PasswordBearer": []
          }
        ]
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "operationId": "healthCheck",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AddDatabaseRequest": {
        "properties": {
          "database_id": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Database Id",
            "description": "Database config ID (UUID or 'amc-default')"
          },
          "priority": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Priority",
            "description": "Priority weight for database selection",
            "default": 50
          },
          "auto_include": {
            "type": "boolean",
            "title": "Auto Include",
            "description": "Automatically include in agent context",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "database_id"
        ],
        "title": "AddDatabaseRequest"
      },
      "AddMissionRequest": {
        "properties": {
          "mission_id": {
            "type": "string",
            "minLength": 1,
            "title": "Mission Id"
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "AddMissionRequest"
      },
      "AddRepoRequest": {
        "properties": {
          "repo_id": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Repo Id"
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "project|framework|tool|reference",
            "default": "project"
          },
          "priority": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Priority",
            "default": 50
          },
          "auto_include": {
            "type": "boolean",
            "title": "Auto Include",
            "default": true
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "default": "main"
          }
        },
        "type": "object",
        "required": [
          "repo_id"
        ],
        "title": "AddRepoRequest"
      },
      "AddSessionRequest": {
        "properties": {
          "session_id": {
            "type": "string",
            "minLength": 1,
            "title": "Session Id"
          }
        },
        "type": "object",
        "required": [
          "session_id"
        ],
        "title": "AddSessionRequest"
      },
      "AgentHealthResponse": {
        "properties": {
          "ocxp_healthy": {
            "type": "boolean",
            "title": "Ocxp Healthy"
          },
          "agentcore_healthy": {
            "type": "boolean",
            "title": "Agentcore Healthy"
          },
          "agentcore_url": {
            "type": "string",
            "title": "Agentcore Url"
          },
          "agentcore_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Agentcore Error"
          }
        },
        "type": "object",
        "required": [
          "ocxp_healthy",
          "agentcore_healthy",
          "agentcore_url"
        ],
        "title": "AgentHealthResponse",
        "description": "Response for agent health check."
      },
      "AgentInvokeRequest": {
        "properties": {
          "action": {
            "type": "string",
            "title": "Action",
            "description": "Action type: process_mission, retrigger_task, chat"
          },
          "mission": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MissionInput"
              },
              {
                "type": "null"
              }
            ],
            "description": "Mission data for process_mission action"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Project UUID to associate with (deprecated, use mission.project_id)"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content",
            "description": "Mission content or prompt (deprecated, use mission.description)"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "description": "Existing mission ID (optional, auto-created if not provided)"
          },
          "task_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Task Id",
            "description": "For retrigger_task action"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason",
            "description": "For retrigger_task action"
          },
          "cascade": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cascade",
            "description": "For retrigger_task action"
          },
          "attachments": {
            "anyOf": [
              {
                "items": {},
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Attachments",
            "description": "Optional attachments"
          },
          "requested_intake": {
            "anyOf": [
              {
                "items": {},
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Requested Intake",
            "description": "Custom intake types"
          },
          "requested_outputs": {
            "anyOf": [
              {
                "items": {},
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Requested Outputs",
            "description": "Custom output config"
          }
        },
        "additionalProperties": true,
        "type": "object",
        "required": [
          "action"
        ],
        "title": "AgentInvokeRequest",
        "description": "Request body for agent invocation.\n\nSupports multiple action types that map to AgentCore actions.\nFor process_mission, a mission is created in DB before forwarding to AgentCore."
      },
      "ArchiveWorkflowsResponse": {
        "properties": {
          "archived_count": {
            "type": "integer",
            "title": "Archived Count",
            "description": "Number of workflows archived"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "description": "Mission ID"
          }
        },
        "type": "object",
        "required": [
          "archived_count",
          "mission_id"
        ],
        "title": "ArchiveWorkflowsResponse",
        "description": "Response for archive workflows endpoint."
      },
      "AuthConfig": {
        "properties": {
          "region": {
            "type": "string",
            "title": "Region"
          },
          "apiEndpoint": {
            "type": "string",
            "title": "Apiendpoint"
          },
          "brainArn": {
            "type": "string",
            "title": "Brainarn"
          },
          "workspaceId": {
            "type": "string",
            "title": "Workspaceid",
            "default": "prod"
          },
          "websocketEndpoint": {
            "type": "string",
            "title": "Websocketendpoint",
            "default": ""
          }
        },
        "type": "object",
        "required": [
          "region",
          "apiEndpoint",
          "brainArn"
        ],
        "title": "AuthConfig",
        "description": "Public auth configuration for clients."
      },
      "Body_loginForAccessToken": {
        "properties": {
          "grant_type": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "password"
              },
              {
                "type": "null"
              }
            ],
            "title": "Grant Type"
          },
          "username": {
            "type": "string",
            "title": "Username"
          },
          "password": {
            "type": "string",
            "title": "Password"
          },
          "scope": {
            "type": "string",
            "title": "Scope",
            "default": ""
          },
          "client_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Id"
          },
          "client_secret": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Client Secret"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "Body_loginForAccessToken"
      },
      "BranchListResponse": {
        "properties": {
          "branches": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Branches",
            "examples": [
              [
                "main",
                "alternative-research-path"
              ]
            ]
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "branches",
          "count"
        ],
        "title": "BranchListResponse",
        "description": "Response for GET /ocxp/missions/{id}/checkpoints/branches."
      },
      "BrowseAction": {
        "properties": {
          "action": {
            "type": "string",
            "title": "Action",
            "description": "Action type: fill, click, wait, scroll"
          },
          "target": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Target",
            "description": "Element target (text, selector, @ref)"
          },
          "value": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Value",
            "description": "Value for fill actions"
          },
          "timeout": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Timeout",
            "description": "Timeout in milliseconds"
          }
        },
        "type": "object",
        "required": [
          "action"
        ],
        "title": "BrowseAction",
        "description": "Browser action to perform."
      },
      "BrowseRequest": {
        "properties": {
          "url": {
            "type": "string",
            "title": "Url",
            "description": "URL to browse"
          },
          "actions": {
            "items": {
              "$ref": "#/components/schemas/BrowseAction"
            },
            "type": "array",
            "title": "Actions",
            "description": "Actions to perform"
          },
          "extract_content": {
            "type": "boolean",
            "title": "Extract Content",
            "description": "Extract page content",
            "default": true
          },
          "take_screenshot": {
            "type": "boolean",
            "title": "Take Screenshot",
            "description": "Take screenshot after actions",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "url"
        ],
        "title": "BrowseRequest",
        "description": "Browse with actions request."
      },
      "BrowseResponse": {
        "properties": {
          "page_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Page Title",
            "description": "Page title"
          },
          "page_url": {
            "type": "string",
            "title": "Page Url",
            "description": "Final page URL after actions"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content",
            "description": "Extracted page content"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link",
            "description": "OCXP link to screenshot"
          },
          "action_results": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Action Results"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "page_url"
        ],
        "title": "BrowseResponse",
        "description": "Browse response."
      },
      "BulkAcknowledgeRequest": {
        "properties": {
          "memo_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 25,
            "minItems": 1,
            "title": "Memo Ids",
            "description": "List of memo IDs to acknowledge (max 25)"
          }
        },
        "type": "object",
        "required": [
          "memo_ids"
        ],
        "title": "BulkAcknowledgeRequest",
        "description": "Request for bulk acknowledge operation."
      },
      "BulkCreateMemoItem": {
        "properties": {
          "source_type": {
            "$ref": "#/components/schemas/SourceType"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id",
            "description": "Format: {mission_id}:v{version}:{file_path} for missions"
          },
          "content": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "category": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MemoCategory"
              },
              {
                "type": "null"
              }
            ]
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata"
          },
          "severity": {
            "$ref": "#/components/schemas/MemoSeverity",
            "default": "medium"
          }
        },
        "type": "object",
        "required": [
          "source_type",
          "source_id"
        ],
        "title": "BulkCreateMemoItem",
        "description": "Single item in a bulk memo create request."
      },
      "BulkCreateMemoRequest": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/BulkCreateMemoItem"
            },
            "type": "array",
            "maxItems": 25,
            "minItems": 1,
            "title": "Items",
            "description": "List of memos to create (max 25)"
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "description": "Workspace (overridden from context)",
            "default": ""
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "BulkCreateMemoRequest",
        "description": "Request for bulk creating memos.",
        "example": {
          "items": [
            {
              "category": "workflow_task",
              "content": "Research authentication patterns",
              "severity": "medium",
              "source_id": "proj-auth:v01:tasks/gap_1_research",
              "source_type": "mission"
            },
            {
              "category": "workflow_task",
              "content": "Validate research output",
              "severity": "medium",
              "source_id": "proj-auth:v01:tasks/gap_1_validate",
              "source_type": "mission"
            }
          ]
        }
      },
      "BulkDeleteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkDeleteResponse",
        "description": "Response for POST /ocxp/{type}/bulk/delete."
      },
      "BulkItemResult": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "id",
          "success"
        ],
        "title": "BulkItemResult",
        "description": "Result for a single item in bulk operation."
      },
      "BulkMemoIdsRequest": {
        "properties": {
          "memo_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 25,
            "minItems": 1,
            "title": "Memo Ids",
            "description": "List of memo IDs to operate on (max 25)"
          }
        },
        "type": "object",
        "required": [
          "memo_ids"
        ],
        "title": "BulkMemoIdsRequest",
        "description": "Request for bulk operations by memo IDs."
      },
      "BulkMemoReadResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkMemoReadResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Total items processed"
          },
          "succeeded": {
            "type": "integer",
            "title": "Succeeded",
            "description": "Number of memos found"
          },
          "failed": {
            "type": "integer",
            "title": "Failed",
            "description": "Number of memos not found"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count",
          "succeeded",
          "failed"
        ],
        "title": "BulkMemoReadResponse",
        "description": "Response for bulk memo read."
      },
      "BulkMemoReadResult": {
        "properties": {
          "memo_id": {
            "type": "string",
            "title": "Memo Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "memo": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/Memo"
              },
              {
                "type": "null"
              }
            ]
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "memo_id",
          "success"
        ],
        "title": "BulkMemoReadResult",
        "description": "Result for a single memo in bulk read operation."
      },
      "BulkMemoResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkMemoResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Total items processed"
          },
          "succeeded": {
            "type": "integer",
            "title": "Succeeded",
            "description": "Number of successful operations"
          },
          "failed": {
            "type": "integer",
            "title": "Failed",
            "description": "Number of failed operations"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count",
          "succeeded",
          "failed"
        ],
        "title": "BulkMemoResponse",
        "description": "Response for bulk memo operations."
      },
      "BulkMemoResult": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "memo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Memo Id"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "success"
        ],
        "title": "BulkMemoResult",
        "description": "Result for a single memo in bulk operation."
      },
      "BulkMoveItem": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "dest_id": {
            "type": "string",
            "title": "Dest Id"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "dest_id"
        ],
        "title": "BulkMoveItem"
      },
      "BulkMoveItemResult": {
        "properties": {
          "source_id": {
            "type": "string",
            "title": "Source Id"
          },
          "dest_id": {
            "type": "string",
            "title": "Dest Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "source_id",
          "dest_id",
          "success"
        ],
        "title": "BulkMoveItemResult",
        "description": "Result for a single move operation in bulk move."
      },
      "BulkMoveRequest": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/BulkMoveItem"
            },
            "type": "array",
            "title": "Items"
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "BulkMoveRequest"
      },
      "BulkMoveResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkMoveItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkMoveResponse",
        "description": "Response for POST /ocxp/{type}/bulk/move."
      },
      "BulkReadRequest": {
        "properties": {
          "ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Ids"
          }
        },
        "type": "object",
        "required": [
          "ids"
        ],
        "title": "BulkReadRequest"
      },
      "BulkReadResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkReadResponse",
        "description": "Response for POST /ocxp/{type}/bulk/read."
      },
      "BulkResolveRequest": {
        "properties": {
          "memo_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 25,
            "minItems": 1,
            "title": "Memo Ids",
            "description": "List of memo IDs to resolve (max 25)"
          },
          "resolved_by": {
            "type": "string",
            "title": "Resolved By",
            "description": "User/agent resolving the memos"
          },
          "ttl_days": {
            "type": "integer",
            "maximum": 365.0,
            "minimum": 1.0,
            "title": "Ttl Days",
            "description": "Days until auto-deletion",
            "default": 30
          }
        },
        "type": "object",
        "required": [
          "memo_ids",
          "resolved_by"
        ],
        "title": "BulkResolveRequest",
        "description": "Request for bulk resolve operation."
      },
      "BulkTaskUpdateRequest": {
        "properties": {
          "updates": {
            "items": {
              "$ref": "#/components/schemas/TaskUpdate"
            },
            "type": "array",
            "maxItems": 50,
            "minItems": 1,
            "title": "Updates",
            "description": "List of task updates"
          }
        },
        "type": "object",
        "required": [
          "updates"
        ],
        "title": "BulkTaskUpdateRequest",
        "description": "Request to bulk update multiple tasks.",
        "example": {
          "updates": [
            {
              "result": "...",
              "task_id": "gap_1_research",
              "task_status": "completed"
            },
            {
              "task_id": "gap_2_research",
              "task_status": "in_progress"
            }
          ]
        }
      },
      "BulkTaskUpdateResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkTaskUpdateResult"
            },
            "type": "array",
            "title": "Results"
          },
          "updated_count": {
            "type": "integer",
            "title": "Updated Count"
          },
          "failed_count": {
            "type": "integer",
            "title": "Failed Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "updated_count",
          "failed_count"
        ],
        "title": "BulkTaskUpdateResponse",
        "description": "Response from bulk task update."
      },
      "BulkTaskUpdateResult": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "success"
        ],
        "title": "BulkTaskUpdateResult",
        "description": "Result for a single task in bulk update."
      },
      "BulkWriteItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "content": {
            "type": "string",
            "title": "Content"
          }
        },
        "type": "object",
        "required": [
          "id",
          "content"
        ],
        "title": "BulkWriteItem"
      },
      "BulkWriteRequest": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/BulkWriteItem"
            },
            "type": "array",
            "title": "Items"
          },
          "manage_metadata": {
            "type": "boolean",
            "title": "Manage Metadata",
            "default": true
          },
          "auto_index": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Index"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id"
          }
        },
        "type": "object",
        "required": [
          "items"
        ],
        "title": "BulkWriteRequest"
      },
      "BulkWriteResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/BulkItemResult"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "BulkWriteResponse",
        "description": "Response for POST /ocxp/{type}/bulk/write."
      },
      "CapturePageScreenshotsRequest": {
        "properties": {
          "version_id": {
            "type": "string",
            "title": "Version Id",
            "description": "Version ID to capture screenshots for"
          },
          "routes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Routes",
            "description": "List of routes to screenshot (e.g., ['/', '/dashboard', '/settings'])"
          }
        },
        "type": "object",
        "required": [
          "version_id",
          "routes"
        ],
        "title": "CapturePageScreenshotsRequest",
        "description": "Request to capture screenshots for specific pages of a prototype version.\n\nUse this endpoint to capture screenshots for auto-discovered pages without\ntriggering a full sync. This is useful when pages are detected from file\nstructure but screenshots haven't been captured yet."
      },
      "CapturePageScreenshotsResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider",
            "description": "Provider name (v0, lovable, bolt)"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id",
            "description": "Chat ID"
          },
          "version_id": {
            "type": "string",
            "title": "Version Id",
            "description": "Version ID screenshots were captured for"
          },
          "screenshots": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Screenshots",
            "description": "Map of route to OCXP screenshot link (e.g., {'/': 'ocxp://...', '/dashboard': 'ocxp://...'})"
          },
          "captured_count": {
            "type": "integer",
            "title": "Captured Count",
            "description": "Number of screenshots successfully captured",
            "default": 0
          },
          "failed_routes": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Failed Routes",
            "description": "Routes that failed to capture (e.g., due to timeout or 404)"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id",
          "version_id"
        ],
        "title": "CapturePageScreenshotsResponse",
        "description": "Response from capturing page screenshots.\n\nReturns the OCXP links for each captured screenshot, mapped by route."
      },
      "ChatCompletionRequest": {
        "properties": {
          "model": {
            "type": "string",
            "title": "Model",
            "description": "Model identifier"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/ChatMessage"
            },
            "type": "array",
            "title": "Messages",
            "description": "Conversation messages"
          },
          "stream": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Stream",
            "description": "Stream response",
            "default": true
          },
          "temperature": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Temperature"
          },
          "max_tokens": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Tokens"
          },
          "top_p": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Top P"
          }
        },
        "additionalProperties": true,
        "type": "object",
        "required": [
          "model",
          "messages"
        ],
        "title": "ChatCompletionRequest",
        "description": "OpenAI-compatible chat completion request."
      },
      "ChatMessage": {
        "properties": {
          "role": {
            "type": "string",
            "title": "Role",
            "description": "Message role: system, user, assistant"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "items": {
                  "$ref": "#/components/schemas/ContentPart"
                },
                "type": "array"
              }
            ],
            "title": "Content",
            "description": "Message content"
          }
        },
        "type": "object",
        "required": [
          "role",
          "content"
        ],
        "title": "ChatMessage",
        "description": "Single message in OpenAI chat format."
      },
      "CheckAccessRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "CheckAccessRequest"
      },
      "CheckpointListResponse": {
        "properties": {
          "checkpoints": {
            "items": {
              "$ref": "#/components/schemas/CheckpointResponse"
            },
            "type": "array",
            "title": "Checkpoints"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "checkpoints",
          "count"
        ],
        "title": "CheckpointListResponse",
        "description": "Response for GET /ocxp/missions/{id}/checkpoints."
      },
      "CheckpointResponse": {
        "properties": {
          "checkpoint_id": {
            "type": "string",
            "title": "Checkpoint Id",
            "examples": [
              "checkpoint-research-research_complete"
            ]
          },
          "checkpoint_name": {
            "type": "string",
            "title": "Checkpoint Name",
            "examples": [
              "research_complete"
            ]
          },
          "phase": {
            "type": "string",
            "title": "Phase",
            "description": "Mission phase (research, sme_analysis, synthesis)",
            "examples": [
              "research"
            ]
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "examples": [
              "mission-001"
            ]
          },
          "timestamp": {
            "type": "string",
            "title": "Timestamp",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "branch": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Branch",
            "description": "Branch name for forked execution paths",
            "examples": [
              "main",
              "alternative-research-path"
            ]
          },
          "findings_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Findings Count",
            "examples": [
              47
            ]
          },
          "confidence_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confidence Score",
            "examples": [
              0.85
            ]
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata"
          }
        },
        "type": "object",
        "required": [
          "checkpoint_id",
          "checkpoint_name",
          "phase",
          "mission_id",
          "timestamp"
        ],
        "title": "CheckpointResponse",
        "description": "Single checkpoint response."
      },
      "CleanupDeadReposResponse": {
        "properties": {
          "projects_scanned": {
            "type": "integer",
            "title": "Projects Scanned"
          },
          "dead_links_removed": {
            "type": "integer",
            "title": "Dead Links Removed"
          },
          "details": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Details"
          }
        },
        "type": "object",
        "required": [
          "projects_scanned",
          "dead_links_removed"
        ],
        "title": "CleanupDeadReposResponse",
        "description": "Response model for dead repo cleanup operation."
      },
      "ColumnOverview": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "type": {
            "type": "string",
            "title": "Type"
          },
          "nullable": {
            "type": "boolean",
            "title": "Nullable"
          },
          "default": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": ""
          }
        },
        "type": "object",
        "required": [
          "name",
          "type",
          "nullable"
        ],
        "title": "ColumnOverview",
        "description": "Column information for database overview."
      },
      "CompareRequest": {
        "properties": {
          "url1": {
            "type": "string",
            "title": "Url1",
            "description": "First URL"
          },
          "url2": {
            "type": "string",
            "title": "Url2",
            "description": "Second URL"
          },
          "compare_type": {
            "type": "string",
            "title": "Compare Type",
            "description": "Type: visual, structure, content",
            "default": "visual"
          }
        },
        "type": "object",
        "required": [
          "url1",
          "url2"
        ],
        "title": "CompareRequest",
        "description": "Page comparison request."
      },
      "CompareResponse": {
        "properties": {
          "page1": {
            "additionalProperties": true,
            "type": "object",
            "title": "Page1",
            "description": "Page 1 info"
          },
          "page2": {
            "additionalProperties": true,
            "type": "object",
            "title": "Page2",
            "description": "Page 2 info"
          },
          "similarity_score": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Similarity Score",
            "description": "Similarity score 0-1"
          },
          "differences": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Differences",
            "description": "List of differences"
          },
          "compare_type": {
            "type": "string",
            "title": "Compare Type",
            "description": "Comparison type used"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "compare_type"
        ],
        "title": "CompareResponse",
        "description": "Page comparison response."
      },
      "ContentDeleteResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path"
          },
          "deleted": {
            "type": "boolean",
            "title": "Deleted",
            "default": true
          },
          "files_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Files Count"
          }
        },
        "type": "object",
        "required": [
          "path"
        ],
        "title": "ContentDeleteResponse",
        "description": "Response for DELETE /ocxp/{type}/{id}."
      },
      "ContentEntry": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "README.md"
            ]
          },
          "type": {
            "type": "string",
            "title": "Type",
            "description": "file or directory",
            "examples": [
              "file"
            ]
          },
          "path": {
            "type": "string",
            "title": "Path",
            "examples": [
              "docs/README.md"
            ]
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size",
            "examples": [
              1024
            ]
          },
          "mtime": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mtime",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          }
        },
        "type": "object",
        "required": [
          "name",
          "type",
          "path"
        ],
        "title": "ContentEntry",
        "description": "Single entry in a content listing."
      },
      "ContentListResponse": {
        "properties": {
          "entries": {
            "items": {
              "$ref": "#/components/schemas/ContentEntry"
            },
            "type": "array",
            "title": "Entries"
          },
          "cursor": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cursor"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "default": false
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "entries",
          "total"
        ],
        "title": "ContentListResponse",
        "description": "Response for GET /ocxp/{type}/list."
      },
      "ContentPart": {
        "properties": {
          "type": {
            "type": "string",
            "title": "Type",
            "description": "Content type: text, image_url, etc."
          },
          "text": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Text",
            "description": "Text content"
          }
        },
        "type": "object",
        "required": [
          "type"
        ],
        "title": "ContentPart",
        "description": "Single content part in multimodal message."
      },
      "ContentReadResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path",
            "examples": [
              "mission/current.md"
            ]
          },
          "content": {
            "type": "string",
            "title": "Content",
            "examples": [
              "# Mission\n\nImplement feature X..."
            ]
          },
          "encoding": {
            "type": "string",
            "title": "Encoding",
            "default": "utf-8",
            "examples": [
              "utf-8",
              "base64"
            ]
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size",
            "examples": [
              256
            ]
          },
          "mtime": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mtime",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id",
            "description": "S3 version ID",
            "examples": [
              "abc123def456"
            ]
          },
          "is_latest": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Latest",
            "description": "Whether this is the latest version",
            "examples": [
              true
            ]
          }
        },
        "type": "object",
        "required": [
          "path",
          "content"
        ],
        "title": "ContentReadResponse",
        "description": "Response for GET /ocxp/{type}/{id}."
      },
      "ContentStatsResponse": {
        "properties": {
          "total_files": {
            "type": "integer",
            "title": "Total Files"
          },
          "total_size": {
            "type": "integer",
            "title": "Total Size"
          },
          "by_extension": {
            "additionalProperties": {
              "additionalProperties": {
                "type": "integer"
              },
              "type": "object"
            },
            "type": "object",
            "title": "By Extension"
          }
        },
        "type": "object",
        "required": [
          "total_files",
          "total_size",
          "by_extension"
        ],
        "title": "ContentStatsResponse",
        "description": "Response for GET /ocxp/{type}/stats."
      },
      "ContentTreeNode": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "path": {
            "type": "string",
            "title": "Path"
          },
          "type": {
            "type": "string",
            "title": "Type"
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id"
          },
          "children": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ContentTreeNode"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Children"
          },
          "truncated": {
            "type": "boolean",
            "title": "Truncated",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "name",
          "path",
          "type"
        ],
        "title": "ContentTreeNode",
        "description": "Tree node for hierarchical content view."
      },
      "ContentTreeResponse": {
        "properties": {
          "tree": {
            "$ref": "#/components/schemas/ContentTreeNode"
          }
        },
        "type": "object",
        "required": [
          "tree"
        ],
        "title": "ContentTreeResponse",
        "description": "Response for GET /ocxp/{type}/tree."
      },
      "ContentTypeInfo": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "mission"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "examples": [
              "Mission content"
            ]
          }
        },
        "type": "object",
        "required": [
          "name",
          "description"
        ],
        "title": "ContentTypeInfo",
        "description": "Content type metadata."
      },
      "ContentTypesResponse": {
        "properties": {
          "types": {
            "items": {
              "$ref": "#/components/schemas/ContentTypeInfo"
            },
            "type": "array",
            "title": "Types"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "types",
          "total"
        ],
        "title": "ContentTypesResponse",
        "description": "Response for GET /ocxp/types."
      },
      "ContentWriteResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path"
          },
          "type": {
            "type": "string",
            "title": "Type",
            "default": "file"
          },
          "size": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Size"
          },
          "etag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Etag"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id",
            "description": "S3 version ID of the written object",
            "examples": [
              "abc123def456"
            ]
          },
          "indexed": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Indexed",
            "description": "KB indexing status: True=indexed, False=failed, None=skipped"
          },
          "verified": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Verified",
            "description": "Full verification status: True=S3+KB verified, False=failed, None=skipped"
          },
          "s3_verified": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "S3 Verified",
            "description": "S3 read verification"
          },
          "kb_verified": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kb Verified",
            "description": "KB discover verification"
          },
          "index_time_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Index Time Ms",
            "description": "Time spent on KB indexing in milliseconds"
          },
          "verify_time_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Verify Time Ms",
            "description": "Time spent on verification in milliseconds"
          },
          "retries": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Retries",
            "description": "Number of retry attempts (0 = first attempt succeeded)"
          },
          "verification_error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Verification Error",
            "description": "Error details if verification failed"
          }
        },
        "type": "object",
        "required": [
          "path"
        ],
        "title": "ContentWriteResponse",
        "description": "Response for POST /ocxp/{type}/{id}."
      },
      "ContextResult": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique identifier for this result"
          },
          "content": {
            "type": "string",
            "title": "Content",
            "description": "Content snippet (may be truncated)"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "Type of content: code, docs, mission, etc.",
            "examples": [
              "code",
              "docs"
            ]
          },
          "location": {
            "type": "string",
            "title": "Location",
            "description": "Source location (file path, URL, etc.)",
            "examples": [
              "src/auth/login.py:45"
            ]
          },
          "score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Score",
            "description": "Relevance score (0.0 - 1.0)"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type",
            "description": "Source type: kb, context7, aws_docs",
            "default": "kb",
            "examples": [
              "kb",
              "context7",
              "aws_docs"
            ]
          },
          "kb_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kb Source",
            "description": "Which KB returned this: code or docs",
            "examples": [
              "code",
              "docs"
            ]
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata",
            "description": "Additional metadata"
          }
        },
        "type": "object",
        "required": [
          "id",
          "content",
          "content_type",
          "location",
          "score"
        ],
        "title": "ContextResult",
        "description": "Single context result from discovery.\n\nContains content snippet, relevance score, and source metadata."
      },
      "CreateFolderRequest": {
        "properties": {
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": ""
          }
        },
        "type": "object",
        "title": "CreateFolderRequest",
        "description": "Request body for folder creation."
      },
      "CreateMemoRequest": {
        "properties": {
          "source_type": {
            "$ref": "#/components/schemas/SourceType"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id",
            "description": "Format: {mission_id}:v{version}:{file_path} for missions"
          },
          "workspace": {
            "type": "string",
            "title": "Workspace"
          },
          "content": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "category": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MemoCategory"
              },
              {
                "type": "null"
              }
            ]
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata"
          },
          "findings": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/SecurityFinding"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Findings"
          },
          "severity": {
            "$ref": "#/components/schemas/MemoSeverity",
            "default": "medium"
          }
        },
        "type": "object",
        "required": [
          "source_type",
          "source_id",
          "workspace"
        ],
        "title": "CreateMemoRequest",
        "description": "Request body for creating a new memo.",
        "example": {
          "category": "agent_warning",
          "content": "Consider adding rate limiting to the auth endpoint",
          "metadata": {
            "line_number": 42,
            "suggested_fix": "Add @rate_limit decorator"
          },
          "severity": "medium",
          "source_id": "proj-auth-system:v02:docs/architecture.md",
          "source_type": "mission",
          "workspace": "prod"
        }
      },
      "CreateSessionRequest": {
        "properties": {
          "session_id": {
            "type": "string",
            "minLength": 1,
            "title": "Session Id"
          },
          "mission_id": {
            "type": "string",
            "minLength": 1,
            "title": "Mission Id"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "active"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "mission_id"
        ],
        "title": "CreateSessionRequest",
        "description": "Request body for POST /ocxp/session - create new session linked to mission."
      },
      "CredentialActionResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "examples": [
              true
            ]
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "examples": [
              "Credentials saved"
            ]
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "CredentialActionResponse",
        "description": "Response for credential actions (save/update/delete/test)."
      },
      "CredentialCreate": {
        "properties": {
          "url": {
            "type": "string",
            "title": "Url",
            "description": "Login URL"
          },
          "username": {
            "type": "string",
            "title": "Username",
            "description": "Username or email"
          },
          "password": {
            "type": "string",
            "title": "Password",
            "description": "Password to encrypt"
          },
          "login_instructions": {
            "type": "string",
            "title": "Login Instructions",
            "description": "Optional instructions for login process (e.g., click this button, fill captcha)",
            "default": ""
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "description": "Workspace identifier",
            "default": "prod"
          }
        },
        "type": "object",
        "required": [
          "url",
          "username",
          "password"
        ],
        "title": "CredentialCreate",
        "description": "Request model for creating/saving credentials."
      },
      "CredentialDataResponse": {
        "properties": {
          "url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Url",
            "examples": [
              "https://example.com/login"
            ]
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username",
            "examples": [
              "user@example.com"
            ]
          },
          "password": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Password",
            "examples": [
              "decrypted_password"
            ]
          },
          "login_instructions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Login Instructions",
            "examples": [
              "Click the login button, then fill captcha"
            ]
          },
          "workspace": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workspace",
            "examples": [
              "prod"
            ]
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          }
        },
        "type": "object",
        "title": "CredentialDataResponse",
        "description": "Credential data model."
      },
      "CredentialGetResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "examples": [
              true
            ]
          },
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/CredentialDataResponse"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "CredentialGetResponse",
        "description": "Response for GET /ocxp/project/{project_id}/credentials."
      },
      "CredentialTestResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether login was successful",
            "examples": [
              true
            ]
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Human-readable result message",
            "examples": [
              "Login successful"
            ]
          },
          "screenshot_base64": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Base64",
            "description": "Base64-encoded screenshot of login result"
          },
          "error_details": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Details",
            "description": "Detailed error information",
            "examples": [
              "Could not find username field"
            ]
          },
          "login_time_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Login Time Ms",
            "description": "Time taken for login attempt in milliseconds",
            "examples": [
              2500
            ]
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "CredentialTestResponse",
        "description": "Enhanced response for credential testing with browser automation."
      },
      "CredentialUpdate": {
        "properties": {
          "url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Url"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "password": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Password"
          },
          "login_instructions": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Login Instructions"
          },
          "workspace": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workspace"
          }
        },
        "type": "object",
        "title": "CredentialUpdate",
        "description": "Request model for updating credentials."
      },
      "DatabaseConfigResponse": {
        "properties": {
          "database_id": {
            "type": "string",
            "title": "Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "Production DB"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": "",
            "examples": [
              "Main PostgreSQL database"
            ]
          },
          "db_type": {
            "type": "string",
            "title": "Db Type",
            "description": "postgres|postgres_lambda|supabase|terraform|mysql|mariadb",
            "examples": [
              "postgres_lambda"
            ]
          },
          "lambda_function_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Function Name",
            "examples": [
              "query_database"
            ]
          },
          "lambda_region": {
            "type": "string",
            "title": "Lambda Region",
            "default": "us-west-2",
            "examples": [
              "us-west-2"
            ]
          },
          "host": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Host",
            "examples": [
              "db.example.com"
            ]
          },
          "port": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Port",
            "examples": [
              5432
            ]
          },
          "database_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Name",
            "examples": [
              "myapp_prod"
            ]
          },
          "terraform_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Terraform Path",
            "description": "Terraform directory path relative to repo root (for terraform type)",
            "examples": [
              "infrastructure/terraform/modules/dynamodb/"
            ]
          },
          "allowed_tables": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Allowed Tables",
            "examples": [
              [
                "users",
                "orders",
                "products"
              ]
            ]
          },
          "read_only": {
            "type": "boolean",
            "title": "Read Only",
            "default": true,
            "examples": [
              true
            ]
          },
          "max_rows": {
            "type": "integer",
            "maximum": 10000.0,
            "minimum": 1.0,
            "title": "Max Rows",
            "default": 100,
            "examples": [
              100
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "active|inactive|error",
            "default": "active",
            "examples": [
              "active"
            ]
          },
          "last_used": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message",
            "examples": [
              "Connection timeout"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          }
        },
        "type": "object",
        "required": [
          "database_id",
          "workspace",
          "name",
          "db_type"
        ],
        "title": "DatabaseConfigResponse",
        "description": "Full database configuration response."
      },
      "DatabaseCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name"
          },
          "description": {
            "type": "string",
            "maxLength": 2000,
            "title": "Description",
            "default": ""
          },
          "db_type": {
            "type": "string",
            "title": "Db Type",
            "description": "postgres|postgres_lambda|supabase|terraform|mysql|mariadb",
            "default": "postgres_lambda"
          },
          "lambda_function_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Function Name",
            "description": "Lambda function name for postgres_lambda type"
          },
          "lambda_region": {
            "type": "string",
            "title": "Lambda Region",
            "default": "us-west-2"
          },
          "secret_arn": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secret Arn",
            "description": "AWS Secrets Manager ARN for credentials"
          },
          "terraform_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Terraform Path",
            "description": "Path to Terraform directory relative to repo root"
          },
          "allowed_tables": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Allowed Tables"
          },
          "read_only": {
            "type": "boolean",
            "title": "Read Only",
            "default": true
          },
          "max_rows": {
            "type": "integer",
            "maximum": 10000.0,
            "minimum": 1.0,
            "title": "Max Rows",
            "default": 100
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "DatabaseCreate",
        "description": "Request body for creating a database config."
      },
      "DatabaseListResponse": {
        "properties": {
          "databases": {
            "items": {
              "$ref": "#/components/schemas/DatabaseConfigResponse"
            },
            "type": "array",
            "title": "Databases"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of items in this response"
          },
          "total": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total",
            "description": "Total number of items matching query (across all pages)"
          },
          "offset": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Offset",
            "description": "Offset used for this query"
          },
          "limit": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Limit",
            "description": "Limit used for this query"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether there are more items after this page",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "databases",
          "count"
        ],
        "title": "DatabaseListResponse",
        "description": "Response for GET /ocxp/database with offset-based pagination."
      },
      "DatabaseOverviewResponse": {
        "properties": {
          "database_id": {
            "type": "string",
            "title": "Database Id"
          },
          "database_name": {
            "type": "string",
            "title": "Database Name"
          },
          "table_count": {
            "type": "integer",
            "title": "Table Count"
          },
          "tables": {
            "items": {
              "$ref": "#/components/schemas/TableOverview"
            },
            "type": "array",
            "title": "Tables"
          },
          "cached": {
            "type": "boolean",
            "title": "Cached",
            "default": false
          },
          "cache_expires_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cache Expires At"
          },
          "generated_at": {
            "type": "string",
            "title": "Generated At"
          },
          "query_time_ms": {
            "type": "number",
            "title": "Query Time Ms"
          }
        },
        "type": "object",
        "required": [
          "database_id",
          "database_name",
          "table_count",
          "tables",
          "generated_at",
          "query_time_ms"
        ],
        "title": "DatabaseOverviewResponse",
        "description": "Complete database overview with schema and metadata."
      },
      "DatabaseSampleResponse": {
        "properties": {
          "table_name": {
            "type": "string",
            "title": "Table Name",
            "examples": [
              "users"
            ]
          },
          "rows": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Rows"
          },
          "columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Columns"
          },
          "row_count": {
            "type": "integer",
            "title": "Row Count",
            "default": 0,
            "examples": [
              5
            ]
          },
          "database_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          }
        },
        "type": "object",
        "required": [
          "table_name"
        ],
        "title": "DatabaseSampleResponse",
        "description": "Response for GET /ocxp/context/database/sample/{table}."
      },
      "DatabaseSchemaResponse": {
        "properties": {
          "tables": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Tables"
          },
          "table_count": {
            "type": "integer",
            "title": "Table Count",
            "default": 0,
            "examples": [
              15
            ]
          },
          "database_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          }
        },
        "type": "object",
        "title": "DatabaseSchemaResponse",
        "description": "Response for GET /ocxp/context/database/schema."
      },
      "DatabaseUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "lambda_function_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Function Name"
          },
          "lambda_region": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Lambda Region"
          },
          "secret_arn": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Secret Arn",
            "description": "AWS Secrets Manager ARN for credentials"
          },
          "terraform_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Terraform Path",
            "description": "Path to Terraform directory relative to repo root"
          },
          "allowed_tables": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Allowed Tables"
          },
          "read_only": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Read Only"
          },
          "max_rows": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 10000.0,
                "minimum": 1.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Rows"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "active|inactive|error"
          }
        },
        "type": "object",
        "title": "DatabaseUpdate",
        "description": "Request body for updating a database config."
      },
      "DiscoverMetrics": {
        "properties": {
          "internal_total": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Internal Total",
            "description": "Total results from internal KB",
            "default": 0
          },
          "internal_max_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Internal Max Score",
            "description": "Highest relevance score from internal KB",
            "default": 0.0
          },
          "internal_avg_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Internal Avg Score",
            "description": "Average relevance score from internal KB",
            "default": 0.0
          },
          "internal_code_hits": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Internal Code Hits",
            "description": "Results from code KB",
            "default": 0
          },
          "internal_docs_hits": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Internal Docs Hits",
            "description": "Results from docs KB",
            "default": 0
          },
          "external_total": {
            "type": "integer",
            "minimum": 0.0,
            "title": "External Total",
            "description": "Total results from external sources (Context7, AWS docs)",
            "default": 0
          },
          "external_max_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "External Max Score",
            "description": "Highest relevance score from external sources",
            "default": 0.0
          },
          "fallback_triggered": {
            "type": "boolean",
            "title": "Fallback Triggered",
            "description": "Whether fallback to external sources was triggered",
            "default": false
          },
          "fallback_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Reason",
            "description": "Why fallback was triggered: low_score, no_results, null if not triggered",
            "examples": [
              "low_score",
              "no_results",
              null
            ]
          },
          "fallback_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Source",
            "description": "External source used: context7, aws_docs",
            "examples": [
              "context7",
              "aws_docs"
            ]
          },
          "query_decomposed": {
            "type": "boolean",
            "title": "Query Decomposed",
            "description": "Whether query was decomposed into sub-queries",
            "default": false
          },
          "sub_query_count": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Sub Query Count",
            "description": "Number of sub-queries executed",
            "default": 1
          }
        },
        "type": "object",
        "title": "DiscoverMetrics",
        "description": "Metrics for context discovery - used for Langfuse dashboard.\n\nTracks source attribution and quality scores for evaluation."
      },
      "DiscoverOptions": {
        "properties": {
          "content_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content Type",
            "description": "Filter by type: code, docs, mission, etc.",
            "examples": [
              "code",
              "docs",
              "all"
            ]
          },
          "project": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project",
            "description": "Scope to project ID",
            "examples": [
              "my-project"
            ]
          },
          "mission": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission",
            "description": "Scope to mission ID",
            "examples": [
              "mission-abc123"
            ]
          },
          "session": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session",
            "description": "Scope to session ID",
            "examples": [
              "sess-xyz789"
            ]
          },
          "repos": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repos",
            "description": "Filter to specific repo IDs",
            "examples": [
              [
                "owner/repo1",
                "owner/repo2"
              ]
            ]
          },
          "doc_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Doc Id",
            "description": "Filter to specific document ID",
            "examples": [
              "strands-agents"
            ]
          },
          "include_answer": {
            "type": "boolean",
            "title": "Include Answer",
            "description": "If true, include RAG-generated answer using LLM",
            "default": false
          },
          "enable_fallback": {
            "type": "boolean",
            "title": "Enable Fallback",
            "description": "Enable external docs fallback when KB has no/low results",
            "default": true
          },
          "max_results": {
            "type": "integer",
            "maximum": 50.0,
            "minimum": 1.0,
            "title": "Max Results",
            "description": "Maximum results to return",
            "default": 10
          },
          "min_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Min Score",
            "description": "Minimum relevance score threshold",
            "default": 0.15
          },
          "search_type": {
            "type": "string",
            "pattern": "^(SEMANTIC|HYBRID)$",
            "title": "Search Type",
            "description": "Search type: SEMANTIC or HYBRID",
            "default": "SEMANTIC"
          },
          "enable_query_decomposition": {
            "type": "boolean",
            "title": "Enable Query Decomposition",
            "description": "Enable query decomposition for complex queries (improves recall)",
            "default": true
          }
        },
        "type": "object",
        "title": "DiscoverOptions",
        "description": "Options for context discovery.\n\nControls filtering, scoping, and behavior of the discover endpoint."
      },
      "DiscoverRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Query",
            "description": "Search query",
            "examples": [
              "How does authentication work?"
            ]
          },
          "options": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DiscoverOptions"
              },
              {
                "type": "null"
              }
            ],
            "description": "Discovery options for filtering and behavior"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "DiscoverRequest",
        "description": "Request for POST /ocxp/context/discover.\n\nUnified interface replacing /ocxp/kb/query and /ocxp/kb/rag.\nOCXP automatically selects the best strategy based on options."
      },
      "DiscoverResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/ContextResult"
            },
            "type": "array",
            "title": "Results",
            "description": "List of context results"
          },
          "answer": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Answer",
            "description": "RAG-generated answer (only if include_answer=True)"
          },
          "strategy_used": {
            "type": "string",
            "enum": [
              "semantic",
              "rag",
              "hybrid",
              "multi-kb-rag"
            ],
            "title": "Strategy Used",
            "description": "Strategy that was used for discovery"
          },
          "total_found": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Found",
            "description": "Total number of results found"
          },
          "reranked": {
            "type": "boolean",
            "title": "Reranked",
            "description": "Whether results were reranked for quality",
            "default": false
          },
          "fallback_triggered": {
            "type": "boolean",
            "title": "Fallback Triggered",
            "description": "Whether external docs fallback was triggered",
            "default": false
          },
          "fallback_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Source",
            "description": "External source used for fallback",
            "examples": [
              "context7",
              "aws_docs"
            ]
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session ID for RAG conversation continuity"
          },
          "citations": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Citations",
            "description": "Citations for RAG answer"
          },
          "metrics": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/DiscoverMetrics"
              },
              {
                "type": "null"
              }
            ],
            "description": "Discovery metrics for Langfuse evaluation dashboard"
          }
        },
        "type": "object",
        "required": [
          "results",
          "strategy_used",
          "total_found"
        ],
        "title": "DiscoverResponse",
        "description": "Response from POST /ocxp/context/discover.\n\nContains search results and optional RAG-generated answer."
      },
      "DocumentGenerationRequest": {
        "properties": {
          "doc_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 10,
            "minItems": 1,
            "title": "Doc Types",
            "description": "List of document types to generate (e.g., ['implementation-guide', 'prd', 'architecture-decisions'])"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Optional specific agentcore session to use. If not provided, uses most recent active session."
          }
        },
        "type": "object",
        "required": [
          "doc_types"
        ],
        "title": "DocumentGenerationRequest",
        "description": "Request to generate specific document types for a mission."
      },
      "DocumentGenerationResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "doc_types": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Doc Types"
          },
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "default": "initiated"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "doc_types",
          "session_id",
          "message"
        ],
        "title": "DocumentGenerationResponse",
        "description": "Response for document generation request."
      },
      "DownloadRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          },
          "branch": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Branch"
          },
          "mode": {
            "type": "string",
            "title": "Mode",
            "default": "full"
          },
          "path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Path"
          },
          "repo_type": {
            "type": "string",
            "title": "Repo Type",
            "default": "auto"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "DownloadRequest"
      },
      "ExtractRequest": {
        "properties": {
          "url": {
            "type": "string",
            "title": "Url",
            "description": "URL to extract from"
          },
          "element_type": {
            "type": "string",
            "title": "Element Type",
            "description": "Type: all, links, forms, buttons, images, headings",
            "default": "all"
          }
        },
        "type": "object",
        "required": [
          "url"
        ],
        "title": "ExtractRequest",
        "description": "Element extraction request."
      },
      "ExtractResponse": {
        "properties": {
          "page_title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Page Title",
            "description": "Page title"
          },
          "page_url": {
            "type": "string",
            "title": "Page Url",
            "description": "Page URL"
          },
          "elements": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Elements",
            "description": "Extracted elements"
          },
          "element_count": {
            "type": "integer",
            "title": "Element Count",
            "description": "Number of elements found",
            "default": 0
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "page_url"
        ],
        "title": "ExtractResponse",
        "description": "Element extraction response."
      },
      "ForeignKeyInfo": {
        "properties": {
          "column": {
            "type": "string",
            "title": "Column"
          },
          "foreign_table": {
            "type": "string",
            "title": "Foreign Table"
          },
          "foreign_column": {
            "type": "string",
            "title": "Foreign Column"
          }
        },
        "type": "object",
        "required": [
          "column",
          "foreign_table",
          "foreign_column"
        ],
        "title": "ForeignKeyInfo",
        "description": "Foreign key relationship information."
      },
      "ForkRequest": {
        "properties": {
          "mission_id": {
            "type": "string",
            "minLength": 1,
            "title": "Mission Id",
            "description": "Mission ID to link forked session to"
          },
          "fork_point": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fork Point"
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "ForkRequest"
      },
      "GetContentsRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          },
          "path": {
            "type": "string",
            "title": "Path",
            "default": ""
          },
          "ref": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ref"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "GetContentsRequest"
      },
      "GitHubTokenRequest": {
        "properties": {
          "github_token": {
            "type": "string",
            "minLength": 1,
            "title": "Github Token"
          }
        },
        "type": "object",
        "required": [
          "github_token"
        ],
        "title": "GitHubTokenRequest",
        "description": "Request to save GitHub token."
      },
      "GitHubTokenStatusResponse": {
        "properties": {
          "configured": {
            "type": "boolean",
            "title": "Configured"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          },
          "scopes": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Scopes"
          }
        },
        "type": "object",
        "required": [
          "configured"
        ],
        "title": "GitHubTokenStatusResponse",
        "description": "GitHub token status response."
      },
      "GitHubTokenSuccessResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "success"
        ],
        "title": "GitHubTokenSuccessResponse",
        "description": "Success response for GitHub token operations."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthCheckResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Health status: healthy, degraded, unhealthy"
          },
          "checks": {
            "additionalProperties": true,
            "type": "object",
            "title": "Checks",
            "description": "Individual health checks"
          }
        },
        "type": "object",
        "required": [
          "status",
          "checks"
        ],
        "title": "HealthCheckResponse",
        "description": "Health check response."
      },
      "IngestDocument": {
        "properties": {
          "path": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "pattern": "^[a-zA-Z0-9][a-zA-Z0-9/_.-]*$",
            "title": "Path",
            "description": "Content path, e.g., 'project/uuid/file.md'. Must start with alphanumeric and contain only alphanumeric, slashes, underscores, dots, and hyphens.",
            "examples": [
              "project/1c3952a0-58a0-41b5-85aa-7a33496b96ab/auth.md"
            ]
          }
        },
        "type": "object",
        "required": [
          "path"
        ],
        "title": "IngestDocument",
        "description": "Single document to ingest into Bedrock KB."
      },
      "IngestRequest": {
        "properties": {
          "documents": {
            "items": {
              "$ref": "#/components/schemas/IngestDocument"
            },
            "type": "array",
            "maxItems": 100,
            "minItems": 1,
            "title": "Documents",
            "description": "List of documents to ingest (max 100, batched internally)"
          }
        },
        "type": "object",
        "required": [
          "documents"
        ],
        "title": "IngestRequest",
        "description": "Request for POST /ocxp/context/ingest.\n\nTriggers direct ingestion of specific documents into Bedrock KB.\nDocuments must already exist in S3 (written via OCXP content API)."
      },
      "IngestResponse": {
        "properties": {
          "indexed": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Indexed",
            "description": "Number of documents successfully indexed"
          },
          "failed": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Failed",
            "description": "Number of documents that failed to index",
            "default": 0
          },
          "skipped": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Skipped",
            "description": "Number of documents skipped",
            "default": 0
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/IngestResult"
            },
            "type": "array",
            "title": "Results",
            "description": "Per-document results"
          }
        },
        "type": "object",
        "required": [
          "indexed"
        ],
        "title": "IngestResponse",
        "description": "Response from POST /ocxp/context/ingest.\n\nContains summary of ingestion results."
      },
      "IngestResult": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path",
            "description": "Document path"
          },
          "status": {
            "type": "string",
            "enum": [
              "indexed",
              "failed",
              "skipped"
            ],
            "title": "Status",
            "description": "Ingestion status"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if failed"
          }
        },
        "type": "object",
        "required": [
          "path",
          "status"
        ],
        "title": "IngestResult",
        "description": "Result for a single document ingestion."
      },
      "KBIngestionJob": {
        "properties": {
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "documents_scanned": {
            "type": "integer",
            "title": "Documents Scanned",
            "default": 0
          },
          "documents_indexed": {
            "type": "integer",
            "title": "Documents Indexed",
            "default": 0
          },
          "documents_failed": {
            "type": "integer",
            "title": "Documents Failed",
            "default": 0
          },
          "documents_modified": {
            "type": "integer",
            "title": "Documents Modified",
            "default": 0
          },
          "documents_deleted": {
            "type": "integer",
            "title": "Documents Deleted",
            "default": 0
          },
          "metadata_scanned": {
            "type": "integer",
            "title": "Metadata Scanned",
            "default": 0
          },
          "metadata_modified": {
            "type": "integer",
            "title": "Metadata Modified",
            "default": 0
          }
        },
        "type": "object",
        "title": "KBIngestionJob"
      },
      "KBOverview": {
        "properties": {
          "kb_type": {
            "type": "string",
            "title": "Kb Type"
          },
          "kb_id": {
            "type": "string",
            "title": "Kb Id"
          },
          "ds_id": {
            "type": "string",
            "title": "Ds Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "repos_count": {
            "type": "integer",
            "title": "Repos Count",
            "default": 0
          },
          "repos": {
            "items": {
              "$ref": "#/components/schemas/KBRepoStatus"
            },
            "type": "array",
            "title": "Repos",
            "default": []
          },
          "running_job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Running Job Id"
          },
          "recent_jobs": {
            "items": {
              "$ref": "#/components/schemas/KBIngestionJob"
            },
            "type": "array",
            "title": "Recent Jobs",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "kb_type",
          "kb_id",
          "ds_id",
          "status"
        ],
        "title": "KBOverview"
      },
      "KBQueryRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 1000,
            "minLength": 1,
            "title": "Query"
          },
          "max_results": {
            "type": "integer",
            "maximum": 20.0,
            "minimum": 1.0,
            "title": "Max Results",
            "default": 5
          },
          "search_type": {
            "type": "string",
            "pattern": "^(SEMANTIC|HYBRID)$",
            "title": "Search Type",
            "default": "SEMANTIC"
          },
          "content_type": {
            "type": "string",
            "pattern": "^(code|docs|all)$",
            "title": "Content Type",
            "description": "Knowledge base to query: 'code' for source files, 'docs' for documentation, 'all' for both (merged by score)",
            "default": "docs"
          },
          "doc_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Doc Id",
            "description": "Filter to specific doc_id"
          },
          "repo_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Ids",
            "description": "Filter to specific repo IDs"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Filter to specific project"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "description": "Filter to specific mission"
          },
          "enable_fallback": {
            "type": "boolean",
            "title": "Enable Fallback",
            "description": "Enable external docs fallback when KB has no/low results",
            "default": true
          },
          "fallback_threshold": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Fallback Threshold",
            "description": "Score threshold below which fallback triggers",
            "default": 0.5
          },
          "persist_external_docs": {
            "type": "boolean",
            "title": "Persist External Docs",
            "description": "Save external docs to S3 for future KB queries",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "KBQueryRequest"
      },
      "KBQueryResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/KBResultItem"
            },
            "type": "array",
            "title": "Results"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          },
          "fallback_triggered": {
            "type": "boolean",
            "title": "Fallback Triggered",
            "description": "Whether external docs fallback was triggered",
            "default": false
          },
          "fallback_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fallback Source",
            "description": "External source used for fallback",
            "examples": [
              "context7",
              "aws_docs"
            ]
          }
        },
        "type": "object",
        "required": [
          "results",
          "count"
        ],
        "title": "KBQueryResponse",
        "description": "Response for POST /ocxp/kb/query."
      },
      "KBRagResponse": {
        "properties": {
          "answer": {
            "type": "string",
            "title": "Answer"
          },
          "citations": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Citations"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id"
          }
        },
        "type": "object",
        "required": [
          "answer"
        ],
        "title": "KBRagResponse",
        "description": "Response for POST /ocxp/kb/rag."
      },
      "KBRepoStatus": {
        "properties": {
          "repo_id": {
            "type": "string",
            "title": "Repo Id"
          },
          "github_url": {
            "type": "string",
            "title": "Github Url"
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "default": "main"
          },
          "indexed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Indexed At"
          },
          "files_count": {
            "type": "integer",
            "title": "Files Count",
            "default": 0
          },
          "bedrock_synced": {
            "type": "boolean",
            "title": "Bedrock Synced",
            "default": false
          },
          "last_ingestion_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Ingestion Status"
          },
          "last_ingestion_job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Ingestion Job Id"
          }
        },
        "type": "object",
        "required": [
          "repo_id",
          "github_url"
        ],
        "title": "KBRepoStatus"
      },
      "KBResultItem": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content"
          },
          "score": {
            "type": "number",
            "title": "Score"
          },
          "source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Source"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata"
          },
          "source_type": {
            "type": "string",
            "title": "Source Type",
            "description": "Source type: kb, context7, aws_docs",
            "default": "kb",
            "examples": [
              "kb",
              "context7",
              "aws_docs"
            ]
          },
          "kb_source": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kb Source",
            "description": "Which KB returned this result: 'code' or 'docs'",
            "examples": [
              "code",
              "docs"
            ]
          }
        },
        "type": "object",
        "required": [
          "content",
          "score"
        ],
        "title": "KBResultItem",
        "description": "Single KB search result."
      },
      "KBStatusResponse": {
        "properties": {
          "knowledge_bases": {
            "items": {
              "$ref": "#/components/schemas/KBOverview"
            },
            "type": "array",
            "title": "Knowledge Bases"
          }
        },
        "type": "object",
        "required": [
          "knowledge_bases"
        ],
        "title": "KBStatusResponse"
      },
      "LinkedDatabaseResponse": {
        "properties": {
          "database_id": {
            "type": "string",
            "title": "Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "priority": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Priority",
            "default": 50
          },
          "auto_include": {
            "type": "boolean",
            "title": "Auto Include",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "database_id"
        ],
        "title": "LinkedDatabaseResponse",
        "description": "Linked database in a project."
      },
      "LinkedRepoResponse": {
        "properties": {
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "examples": [
              "my-app"
            ]
          },
          "category": {
            "type": "string",
            "title": "Category",
            "description": "project|framework|tool|reference",
            "examples": [
              "project"
            ]
          },
          "priority": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Priority",
            "examples": [
              50
            ]
          },
          "auto_include": {
            "type": "boolean",
            "title": "Auto Include",
            "examples": [
              true
            ]
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "examples": [
              "main"
            ]
          }
        },
        "type": "object",
        "required": [
          "repo_id",
          "category",
          "priority",
          "auto_include",
          "branch"
        ],
        "title": "LinkedRepoResponse",
        "description": "Linked repository in a project."
      },
      "ListBranchesRequest": {
        "properties": {
          "repo_url": {
            "type": "string",
            "title": "Repo Url"
          }
        },
        "type": "object",
        "required": [
          "repo_url"
        ],
        "title": "ListBranchesRequest"
      },
      "LockRequest": {
        "properties": {
          "content_type": {
            "type": "string",
            "title": "Content Type"
          },
          "content_id": {
            "type": "string",
            "title": "Content Id"
          },
          "ttl": {
            "type": "integer",
            "title": "Ttl",
            "default": 300
          }
        },
        "type": "object",
        "required": [
          "content_type",
          "content_id"
        ],
        "title": "LockRequest"
      },
      "LoginRequest": {
        "properties": {
          "username": {
            "type": "string",
            "minLength": 1,
            "title": "Username",
            "description": "Cognito username"
          },
          "password": {
            "type": "string",
            "minLength": 1,
            "title": "Password",
            "description": "User password"
          }
        },
        "type": "object",
        "required": [
          "username",
          "password"
        ],
        "title": "LoginRequest",
        "description": "JSON login request for programmatic clients."
      },
      "Memo": {
        "properties": {
          "memo_id": {
            "type": "string",
            "title": "Memo Id",
            "description": "Unique memo identifier"
          },
          "source_type": {
            "$ref": "#/components/schemas/SourceType",
            "description": "Type of source entity"
          },
          "source_id": {
            "type": "string",
            "title": "Source Id",
            "description": "ID of the source entity (mission format: {mission_id}:v{version}:{file_path})"
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "description": "Workspace this memo belongs to"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content",
            "description": "Free-form memo content (for general memos)"
          },
          "category": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/MemoCategory"
              },
              {
                "type": "null"
              }
            ],
            "description": "Category of memo (optional for security findings)"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Flexible metadata (line numbers, suggested fixes, etc.)"
          },
          "findings": {
            "items": {
              "$ref": "#/components/schemas/SecurityFinding"
            },
            "type": "array",
            "title": "Findings",
            "description": "List of security findings"
          },
          "total_findings": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Findings",
            "description": "Total number of findings",
            "default": 0
          },
          "highest_severity": {
            "$ref": "#/components/schemas/MemoSeverity",
            "description": "Highest severity among all findings",
            "default": "low"
          },
          "status": {
            "$ref": "#/components/schemas/MemoStatus",
            "description": "Current status of the memo",
            "default": "open"
          },
          "resolved_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved By",
            "description": "User who resolved the memo"
          },
          "resolved_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Resolved At",
            "description": "When the memo was resolved"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "When the memo was created"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At",
            "description": "When the memo was last updated"
          },
          "ttl": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ttl",
            "description": "TTL for DynamoDB auto-expiration"
          }
        },
        "type": "object",
        "required": [
          "source_type",
          "source_id",
          "workspace"
        ],
        "title": "Memo",
        "description": "Memo linked to a source entity.\n\nMemos aggregate findings for a specific source (repo, project, mission)\nand track their resolution status."
      },
      "MemoActionResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Action result message"
          },
          "memo": {
            "$ref": "#/components/schemas/Memo"
          }
        },
        "type": "object",
        "required": [
          "success",
          "message",
          "memo"
        ],
        "title": "MemoActionResponse",
        "description": "Response from memo action endpoints."
      },
      "MemoCategory": {
        "type": "string",
        "enum": [
          "agent_error",
          "agent_warning",
          "agent_hitl",
          "agent_comment",
          "agent_edit",
          "agent_delete",
          "user_comment",
          "user_edit",
          "user_delete",
          "security_finding",
          "workflow_task"
        ],
        "title": "MemoCategory",
        "description": "Category of memo feedback."
      },
      "MemoListResponse": {
        "properties": {
          "memos": {
            "items": {
              "$ref": "#/components/schemas/Memo"
            },
            "type": "array",
            "title": "Memos"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of items in this response"
          },
          "total": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total",
            "description": "Total number of items matching query (across all pages)"
          },
          "offset": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Offset",
            "description": "Offset used for this query"
          },
          "limit": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Limit",
            "description": "Limit used for this query"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether there are more items after this page",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "memos",
          "count"
        ],
        "title": "MemoListResponse",
        "description": "Response for GET /ocxp/memos with offset-based pagination."
      },
      "MemoResolveRequest": {
        "properties": {
          "resolved_by": {
            "type": "string",
            "title": "Resolved By",
            "description": "User resolving the memo"
          },
          "ttl_days": {
            "type": "integer",
            "maximum": 365.0,
            "minimum": 1.0,
            "title": "Ttl Days",
            "default": 30
          }
        },
        "type": "object",
        "required": [
          "resolved_by"
        ],
        "title": "MemoResolveRequest",
        "description": "Request to resolve a memo."
      },
      "MemoSeverity": {
        "type": "string",
        "enum": [
          "low",
          "medium",
          "high",
          "critical"
        ],
        "title": "MemoSeverity",
        "description": "Severity levels for security findings."
      },
      "MemoStatus": {
        "type": "string",
        "enum": [
          "open",
          "acknowledged",
          "resolved",
          "ignored"
        ],
        "title": "MemoStatus",
        "description": "Status of a memo."
      },
      "MemoUpdateRequest": {
        "properties": {
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Metadata to merge into memo"
          },
          "content": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content",
            "description": "New content for the memo"
          }
        },
        "type": "object",
        "title": "MemoUpdateRequest",
        "description": "Request to update a memo's metadata."
      },
      "MessageResponse": {
        "properties": {
          "message_id": {
            "type": "integer",
            "title": "Message Id",
            "examples": [
              1
            ]
          },
          "role": {
            "type": "string",
            "title": "Role",
            "description": "user|assistant|system",
            "examples": [
              "user"
            ]
          },
          "content": {
            "type": "string",
            "title": "Content",
            "examples": [
              "How do I implement feature X?"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          }
        },
        "type": "object",
        "required": [
          "message_id",
          "role",
          "content"
        ],
        "title": "MessageResponse",
        "description": "Single message in a session."
      },
      "MissionContextResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "context": {
            "additionalProperties": true,
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "context"
        ],
        "title": "MissionContextResponse",
        "description": "Response for GET /tools/mission/{id}/context."
      },
      "MissionCreate": {
        "properties": {
          "title": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Title"
          },
          "description": {
            "type": "string",
            "maxLength": 5000,
            "title": "Description",
            "default": ""
          },
          "ticket_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Id",
            "description": "External ticket ID (e.g., AMC-556)"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Project UUID to associate mission with"
          },
          "priority": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority",
            "description": "Priority: P0, P1, P2, P3, High, Medium, Low"
          },
          "goals": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Goals"
          }
        },
        "type": "object",
        "required": [
          "title"
        ],
        "title": "MissionCreate"
      },
      "MissionCreateRequest": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 5000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "goals": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Goals"
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "MissionCreateRequest"
      },
      "MissionCreateResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "examples": [
              "mission-abc123"
            ]
          },
          "path": {
            "type": "string",
            "title": "Path",
            "examples": [
              "mission/mission-abc123.md"
            ]
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "path"
        ],
        "title": "MissionCreateResponse",
        "description": "Response for POST /tools/mission/create."
      },
      "MissionInput": {
        "properties": {
          "title": {
            "type": "string",
            "title": "Title",
            "description": "Mission title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Detailed mission description",
            "default": ""
          },
          "priority": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority",
            "description": "Priority level",
            "default": "Medium"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Project UUID to associate with"
          }
        },
        "type": "object",
        "required": [
          "title"
        ],
        "title": "MissionInput",
        "description": "Mission data for process_mission action."
      },
      "MissionListResponse": {
        "properties": {
          "missions": {
            "items": {
              "$ref": "#/components/schemas/MissionResponse"
            },
            "type": "array",
            "title": "Missions"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of items in this response"
          },
          "total": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total",
            "description": "Total number of items matching query (across all pages)"
          },
          "offset": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Offset",
            "description": "Offset used for this query"
          },
          "limit": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Limit",
            "description": "Limit used for this query"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether there are more items after this page",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "missions",
          "count"
        ],
        "title": "MissionListResponse",
        "description": "Response for GET /ocxp/mission with offset-based pagination."
      },
      "MissionResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "ticket_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Id",
            "description": "External ticket ID (e.g., JIRA ticket)",
            "examples": [
              "AMC-556"
            ]
          },
          "title": {
            "type": "string",
            "title": "Title",
            "examples": [
              "Implement user authentication"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": "",
            "examples": [
              "Add OAuth2 login flow"
            ]
          },
          "context_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Path",
            "examples": [
              "workspaces/acme-corp/mission/550e8400-e29b-41d4-a716-446655440000/"
            ]
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Project UUID this mission belongs to",
            "examples": [
              "1c3952a0-58a0-41b5-85aa-7a33496b96ab"
            ]
          },
          "priority": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority",
            "description": "Priority: P0, P1, P2, P3, High, Medium, Low",
            "examples": [
              "Medium"
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "draft|active|completed|archived",
            "default": "draft",
            "examples": [
              "draft"
            ]
          },
          "progress": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Progress",
            "default": 0,
            "examples": [
              50
            ]
          },
          "goals": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Goals",
            "examples": [
              [
                "Implement login",
                "Add OAuth providers"
              ]
            ]
          },
          "notes": {
            "type": "string",
            "title": "Notes",
            "default": "",
            "examples": [
              "Consider using Auth0 for OAuth"
            ]
          },
          "session_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Session Ids",
            "examples": [
              [
                "sess-001",
                "sess-002"
              ]
            ]
          },
          "version": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Version",
            "description": "Regeneration version number",
            "default": 0,
            "examples": [
              1
            ]
          },
          "last_regenerated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Regenerated At",
            "description": "ISO timestamp of last regeneration",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "examples": [
              "user@example.com"
            ]
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "workspace",
          "title"
        ],
        "title": "MissionResponse",
        "description": "Full mission response."
      },
      "MissionUpdate": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 5000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "ticket_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Id",
            "description": "External ticket ID (e.g., AMC-556)"
          },
          "priority": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 20
              },
              {
                "type": "null"
              }
            ],
            "title": "Priority",
            "description": "Priority: P0, P1, P2, P3, High, Medium, Low"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "draft|active|completed|archived"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer",
                "maximum": 100.0,
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 10000
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "title": "MissionUpdate"
      },
      "MissionUpdateRequest": {
        "properties": {
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "title": "MissionUpdateRequest"
      },
      "MissionUpdateResponse": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "MissionUpdateResponse",
        "description": "Response for POST /tools/mission/{id}/update."
      },
      "MoveRequest": {
        "properties": {
          "source": {
            "type": "string",
            "title": "Source"
          },
          "destination": {
            "type": "string",
            "title": "Destination"
          },
          "overwrite": {
            "type": "boolean",
            "title": "Overwrite",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "source",
          "destination"
        ],
        "title": "MoveRequest"
      },
      "OAuth2TokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token"
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "default": "bearer"
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "default": 3600
          },
          "id_token": {
            "type": "string",
            "title": "Id Token"
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "id_token",
          "refresh_token"
        ],
        "title": "OAuth2TokenResponse",
        "description": "OAuth2 standard token response for Swagger UI compatibility (snake_case)."
      },
      "OCXPBatchResolveRequest": {
        "properties": {
          "uris": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 50,
            "title": "Uris",
            "description": "List of OCXP URIs to resolve"
          },
          "resolution_mode": {
            "type": "string",
            "enum": [
              "s3",
              "local",
              "url",
              "all"
            ],
            "title": "Resolution Mode",
            "default": "all"
          },
          "vault_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vault Path"
          }
        },
        "type": "object",
        "required": [
          "uris"
        ],
        "title": "OCXPBatchResolveRequest",
        "description": "Request model for batch OCXP URI resolution."
      },
      "OCXPBatchResolveResponse": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/OCXPResolution"
            },
            "type": "array",
            "title": "Results"
          },
          "errors": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Errors",
            "description": "Map of URI -> error message for failed resolutions"
          }
        },
        "type": "object",
        "required": [
          "results"
        ],
        "title": "OCXPBatchResolveResponse",
        "description": "Response model for batch OCXP URI resolution."
      },
      "OCXPResolution": {
        "properties": {
          "uri": {
            "type": "string",
            "title": "Uri",
            "description": "Original OCXP URI"
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "description": "Workspace extracted from URI"
          },
          "content_type": {
            "type": "string",
            "title": "Content Type",
            "description": "Content type extracted from URI"
          },
          "path": {
            "type": "string",
            "title": "Path",
            "description": "File path extracted from URI"
          },
          "resolved": {
            "additionalProperties": true,
            "type": "object",
            "title": "Resolved",
            "description": "Resolved URIs/paths by mode"
          },
          "exists": {
            "type": "boolean",
            "title": "Exists",
            "description": "Whether the resource exists (S3 check)"
          },
          "metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Metadata",
            "description": "Additional metadata if available"
          }
        },
        "type": "object",
        "required": [
          "uri",
          "workspace",
          "content_type",
          "path",
          "resolved",
          "exists"
        ],
        "title": "OCXPResolution",
        "description": "Response model for OCXP URI resolution."
      },
      "OCXPResolveRequest": {
        "properties": {
          "uri": {
            "type": "string",
            "title": "Uri",
            "description": "OCXP URI to resolve (e.g., ocxp://prod/code/sonic-web-dev/amc/handlers/auth.ts)"
          },
          "resolution_mode": {
            "type": "string",
            "enum": [
              "s3",
              "local",
              "url",
              "all"
            ],
            "title": "Resolution Mode",
            "description": "Resolution mode: s3 (S3 URI), local (filesystem path), url (obsidian://), all (all modes)",
            "default": "all"
          },
          "vault_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Vault Path",
            "description": "Base vault path for local resolution (e.g., /Users/user/vault)"
          }
        },
        "type": "object",
        "required": [
          "uri"
        ],
        "title": "OCXPResolveRequest",
        "description": "Request model for OCXP URI resolution."
      },
      "OCXPValidateRequest": {
        "properties": {
          "uri": {
            "type": "string",
            "title": "Uri",
            "description": "OCXP URI to validate"
          }
        },
        "type": "object",
        "required": [
          "uri"
        ],
        "title": "OCXPValidateRequest",
        "description": "Request model for OCXP URI validation."
      },
      "OCXPValidateResponse": {
        "properties": {
          "uri": {
            "type": "string",
            "title": "Uri"
          },
          "valid": {
            "type": "boolean",
            "title": "Valid"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "parsed": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parsed"
          }
        },
        "type": "object",
        "required": [
          "uri",
          "valid"
        ],
        "title": "OCXPValidateResponse",
        "description": "Response model for OCXP URI validation."
      },
      "ProjectCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Name"
          },
          "description": {
            "type": "string",
            "maxLength": 2000,
            "title": "Description",
            "default": ""
          }
        },
        "type": "object",
        "required": [
          "name"
        ],
        "title": "ProjectCreate"
      },
      "ProjectListResponse": {
        "properties": {
          "projects": {
            "items": {
              "$ref": "#/components/schemas/ProjectResponse"
            },
            "type": "array",
            "title": "Projects"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of items in this response"
          },
          "total": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total",
            "description": "Total number of items matching query (across all pages)"
          },
          "offset": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Offset",
            "description": "Offset used for this query"
          },
          "limit": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Limit",
            "description": "Limit used for this query"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether there are more items after this page",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "projects",
          "count"
        ],
        "title": "ProjectListResponse",
        "description": "Response for GET /ocxp/project with offset-based pagination."
      },
      "ProjectMemosResponse": {
        "properties": {
          "memos": {
            "items": {
              "$ref": "#/components/schemas/Memo"
            },
            "type": "array",
            "title": "Memos",
            "description": "All memos for the project"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Total memo count",
            "default": 0
          },
          "mission_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Mission Ids",
            "description": "Mission IDs included"
          },
          "mission_count": {
            "type": "integer",
            "title": "Mission Count",
            "description": "Number of missions in project",
            "default": 0
          }
        },
        "type": "object",
        "title": "ProjectMemosResponse",
        "description": "Response for project memos bulk load."
      },
      "ProjectResponse": {
        "properties": {
          "project_id": {
            "type": "string",
            "pattern": "^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",
            "title": "Project Id",
            "description": "Project UUID identifier",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "My Project"
            ]
          },
          "description": {
            "type": "string",
            "title": "Description",
            "examples": [
              "A sample project for development"
            ]
          },
          "context_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Path",
            "examples": [
              "workspaces/acme-corp/project/550e8400-e29b-41d4-a716-446655440000/"
            ]
          },
          "linked_repos": {
            "items": {
              "$ref": "#/components/schemas/LinkedRepoResponse"
            },
            "type": "array",
            "title": "Linked Repos"
          },
          "linked_databases": {
            "items": {
              "$ref": "#/components/schemas/LinkedDatabaseResponse"
            },
            "type": "array",
            "title": "Linked Databases"
          },
          "mission_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Mission Ids",
            "examples": [
              [
                "mission-001",
                "mission-002"
              ]
            ]
          },
          "default_repo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Repo Id",
            "examples": [
              "my-app"
            ]
          },
          "default_database_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Database Id",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "examples": [
              "user@example.com"
            ]
          },
          "stats": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ProjectStats"
              },
              {
                "type": "null"
              }
            ],
            "description": "Pre-computed counts for project overview"
          }
        },
        "type": "object",
        "required": [
          "project_id",
          "workspace",
          "name",
          "description"
        ],
        "title": "ProjectResponse",
        "description": "Full project response."
      },
      "ProjectStats": {
        "properties": {
          "mission_count": {
            "type": "integer",
            "title": "Mission Count",
            "description": "Total missions linked to project",
            "default": 0,
            "examples": [
              19
            ]
          },
          "active_mission_count": {
            "type": "integer",
            "title": "Active Mission Count",
            "description": "Non-archived missions",
            "default": 0,
            "examples": [
              15
            ]
          },
          "archived_mission_count": {
            "type": "integer",
            "title": "Archived Mission Count",
            "description": "Archived missions",
            "default": 0,
            "examples": [
              4
            ]
          },
          "repo_count": {
            "type": "integer",
            "title": "Repo Count",
            "description": "Linked repositories",
            "default": 0,
            "examples": [
              3
            ]
          },
          "database_count": {
            "type": "integer",
            "title": "Database Count",
            "description": "Linked databases",
            "default": 0,
            "examples": [
              2
            ]
          },
          "memo_count": {
            "type": "integer",
            "title": "Memo Count",
            "description": "Project memos (open status)",
            "default": 0,
            "examples": [
              7
            ]
          },
          "sop_count": {
            "type": "integer",
            "title": "Sop Count",
            "description": "SOPs in project context",
            "default": 0,
            "examples": [
              2
            ]
          }
        },
        "type": "object",
        "title": "ProjectStats",
        "description": "Pre-computed counts for project overview.\n\nProvides immediate access to counts without extra API calls.\nComputed server-side when project is fetched."
      },
      "ProjectUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 2000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          }
        },
        "type": "object",
        "title": "ProjectUpdate"
      },
      "ProposalListResponse": {
        "properties": {
          "proposals": {
            "items": {
              "$ref": "#/components/schemas/ProposalResponse"
            },
            "type": "array",
            "title": "Proposals"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "default": 0
          }
        },
        "type": "object",
        "title": "ProposalListResponse",
        "description": "Response for listing proposals."
      },
      "ProposalResponse": {
        "properties": {
          "proposal_id": {
            "type": "string",
            "title": "Proposal Id",
            "description": "Unique proposal identifier"
          },
          "memo_id": {
            "type": "string",
            "title": "Memo Id",
            "description": "Associated memo ID"
          },
          "proposal_type": {
            "type": "string",
            "enum": [
              "agent_edit",
              "agent_delete",
              "agent_comment"
            ],
            "title": "Proposal Type",
            "description": "Type of proposal"
          },
          "parent_feedback_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Feedback Id",
            "description": "ID of user feedback that triggered this proposal"
          },
          "document_path": {
            "type": "string",
            "title": "Document Path",
            "description": "Path to affected document"
          },
          "section_heading": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Heading",
            "description": "Section heading if applicable"
          },
          "proposed_change": {
            "additionalProperties": true,
            "type": "object",
            "title": "Proposed Change",
            "description": "The actual change being proposed"
          },
          "impact_explanation": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Impact Explanation",
            "description": "Explanation of why this change is being proposed"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "ISO timestamp when proposal was created"
          }
        },
        "type": "object",
        "required": [
          "proposal_id",
          "memo_id",
          "proposal_type",
          "document_path",
          "created_at"
        ],
        "title": "ProposalResponse",
        "description": "Response model for a single agent proposal."
      },
      "PrototypeChatGetResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id"
          },
          "web_url": {
            "type": "string",
            "title": "Web Url"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/PrototypeChatMessage"
            },
            "type": "array",
            "title": "Messages"
          },
          "versions": {
            "items": {
              "$ref": "#/components/schemas/PrototypeChatVersion"
            },
            "type": "array",
            "title": "Versions"
          },
          "latest_preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Preview Url"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link"
          },
          "conversation_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Conversation Link"
          },
          "file_links": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "File Links"
          },
          "synced_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Synced At"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id",
          "web_url",
          "mission_id"
        ],
        "title": "PrototypeChatGetResponse",
        "description": "Response from getting a stored prototype chat."
      },
      "PrototypeChatLinkRequest": {
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "v0",
              "lovable",
              "bolt"
            ],
            "title": "Provider",
            "description": "Prototype provider",
            "default": "v0"
          },
          "chat_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chat Id",
            "description": "Chat ID from provider (extracted from URL if not provided)"
          },
          "chat_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chat Url",
            "description": "Chat URL (alternative to chat_id)"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id",
            "description": "Specific version ID to download files from (default: latest)"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "description": "Mission to link this chat to"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Optional project scope"
          },
          "sync_versions": {
            "type": "boolean",
            "title": "Sync Versions",
            "description": "Also sync version information (metadata)",
            "default": true
          },
          "download_files": {
            "type": "boolean",
            "title": "Download Files",
            "description": "Download version files to OCXP for use as context",
            "default": true
          },
          "screenshot_preview": {
            "type": "boolean",
            "title": "Screenshot Preview",
            "description": "Screenshot the latest preview URL",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "PrototypeChatLinkRequest",
        "description": "Request to link a prototype chat to a mission."
      },
      "PrototypeChatLinkResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id"
          },
          "chat_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chat Name"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "project_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Name"
          },
          "web_url": {
            "type": "string",
            "title": "Web Url"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "messages_count": {
            "type": "integer",
            "title": "Messages Count"
          },
          "versions_count": {
            "type": "integer",
            "title": "Versions Count"
          },
          "latest_preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Preview Url"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link"
          },
          "content_links": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Content Links"
          },
          "indexed": {
            "type": "boolean",
            "title": "Indexed",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id",
          "web_url",
          "mission_id",
          "messages_count",
          "versions_count"
        ],
        "title": "PrototypeChatLinkResponse",
        "description": "Response from linking a prototype chat.\n\nField naming aligned with v0's hierarchy: Project > Chat > Version\n- chat_name: The chat's name from v0 (not title - v0 only has name)\n- project_id: v0 project ID if chat belongs to a project\n- project_name: v0 project name (fetched from projects API)"
      },
      "PrototypeChatListItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "chat_name": {
            "type": "string",
            "title": "Chat Name"
          },
          "web_url": {
            "type": "string",
            "title": "Web Url"
          },
          "privacy": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Privacy"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          },
          "latest_preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Preview Url"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "project_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Name"
          }
        },
        "type": "object",
        "required": [
          "id",
          "chat_name",
          "web_url"
        ],
        "title": "PrototypeChatListItem",
        "description": "Individual chat in list response.\n\nField naming aligned with v0's hierarchy: Project > Chat > Version\n- chat_name: The chat's name from v0 (v0 only has 'name', not 'title')\n- project_id: v0 project ID if chat belongs to a project\n- project_name: v0 project name (joined from projects list)"
      },
      "PrototypeChatListResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "chats": {
            "items": {
              "$ref": "#/components/schemas/PrototypeChatListItem"
            },
            "type": "array",
            "title": "Chats"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "provider"
        ],
        "title": "PrototypeChatListResponse",
        "description": "Response from listing available chats."
      },
      "PrototypeChatMessage": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "role": {
            "type": "string",
            "enum": [
              "user",
              "assistant"
            ],
            "title": "Role"
          },
          "content": {
            "type": "string",
            "title": "Content"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "role",
          "content"
        ],
        "title": "PrototypeChatMessage",
        "description": "Individual chat message from a prototype conversation."
      },
      "PrototypeChatPreviewRequest": {
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "v0",
              "lovable",
              "bolt"
            ],
            "title": "Provider",
            "default": "v0"
          },
          "chat_url": {
            "type": "string",
            "title": "Chat Url",
            "description": "Chat URL to preview"
          }
        },
        "type": "object",
        "required": [
          "chat_url"
        ],
        "title": "PrototypeChatPreviewRequest",
        "description": "Request to preview a chat before linking (fetch metadata only)."
      },
      "PrototypeChatPreviewResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id"
          },
          "web_url": {
            "type": "string",
            "title": "Web Url"
          },
          "messages_count": {
            "type": "integer",
            "title": "Messages Count"
          },
          "versions": {
            "items": {
              "$ref": "#/components/schemas/PrototypeChatVersion"
            },
            "type": "array",
            "title": "Versions"
          },
          "latest_preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Preview Url"
          },
          "can_download_files": {
            "type": "boolean",
            "title": "Can Download Files",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id",
          "web_url",
          "messages_count"
        ],
        "title": "PrototypeChatPreviewResponse",
        "description": "Response from previewing a chat (no files stored yet)."
      },
      "PrototypeChatSyncAsyncRequest": {
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "v0",
              "lovable",
              "bolt"
            ],
            "title": "Provider",
            "description": "Prototype provider",
            "default": "v0"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id",
            "description": "Chat ID to sync"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "description": "Mission context"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id",
            "description": "Specific version ID to sync (default: sync all new versions)"
          },
          "download_files": {
            "type": "boolean",
            "title": "Download Files",
            "description": "Download version files to OCXP",
            "default": true
          },
          "download_screenshots": {
            "type": "boolean",
            "title": "Download Screenshots",
            "description": "Download v0's built-in screenshot for each version",
            "default": true
          },
          "screenshot_all_pages": {
            "type": "boolean",
            "title": "Screenshot All Pages",
            "description": "Capture screenshots of all detected pages/routes",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "chat_id",
          "mission_id"
        ],
        "title": "PrototypeChatSyncAsyncRequest",
        "description": "Request to start an async prototype chat sync."
      },
      "PrototypeChatSyncAsyncResponse": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id",
            "description": "Job ID for tracking progress"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Initial job status",
            "default": "queued"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable status message",
            "default": "Job queued for processing"
          }
        },
        "type": "object",
        "required": [
          "job_id"
        ],
        "title": "PrototypeChatSyncAsyncResponse",
        "description": "Response from starting an async sync job."
      },
      "PrototypeChatSyncRequest": {
        "properties": {
          "provider": {
            "type": "string",
            "enum": [
              "v0",
              "lovable",
              "bolt"
            ],
            "title": "Provider",
            "default": "v0"
          },
          "chat_id": {
            "type": "string",
            "minLength": 1,
            "title": "Chat Id",
            "description": "Chat ID to sync"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "description": "Mission context (optional - can sync without mission)"
          },
          "version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Id",
            "description": "Specific version ID to sync files from (default: sync all new versions)"
          },
          "download_files": {
            "type": "boolean",
            "title": "Download Files",
            "description": "Download version files to OCXP (if False, only syncs messages/metadata)",
            "default": true
          },
          "download_screenshots": {
            "type": "boolean",
            "title": "Download Screenshots",
            "description": "Download v0's built-in screenshot for each version",
            "default": true
          },
          "screenshot_all_pages": {
            "type": "boolean",
            "title": "Screenshot All Pages",
            "description": "Capture screenshots of all detected pages/routes (not just root)",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "chat_id"
        ],
        "title": "PrototypeChatSyncRequest",
        "description": "Request to sync/refresh a linked chat.\n\nSupports:\n- Incremental sync: Only downloads new versions (skips already-stored ones)\n- Specific version: Downloads a specific version by ID\n- Metadata-only: Syncs messages/metadata without downloading files\n- Screenshot all pages: Capture screenshots of all detected routes"
      },
      "PrototypeChatSyncResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id"
          },
          "synced": {
            "type": "boolean",
            "title": "Synced"
          },
          "new_messages_count": {
            "type": "integer",
            "title": "New Messages Count",
            "default": 0
          },
          "new_versions_count": {
            "type": "integer",
            "title": "New Versions Count",
            "default": 0
          },
          "content_links": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Content Links"
          },
          "newly_synced_versions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Newly Synced Versions",
            "description": "Version IDs downloaded during this sync"
          },
          "stored_versions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Stored Versions",
            "description": "All version IDs currently stored in S3"
          },
          "latest_version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Version Id",
            "description": "Latest version ID available from the provider"
          },
          "versions": {
            "items": {
              "$ref": "#/components/schemas/PrototypeChatVersion"
            },
            "type": "array",
            "title": "Versions",
            "description": "Full version details including detected pages and screenshots"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id",
          "synced"
        ],
        "title": "PrototypeChatSyncResponse",
        "description": "Response from syncing a prototype chat.\n\nVersion tracking fields:\n- newly_synced_versions: Versions downloaded during this sync operation\n- stored_versions: All versions currently stored in S3\n- latest_version_id: Latest version available from the provider\n- versions: Full version details including pages and screenshots"
      },
      "PrototypeChatVersion": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preview Url"
          },
          "screenshot_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Url",
            "description": "v0's built-in screenshot URL for this version"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link",
            "description": "OCXP link to downloaded screenshot"
          },
          "files": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Files"
          },
          "pages": {
            "items": {
              "$ref": "#/components/schemas/PrototypePageInfo"
            },
            "type": "array",
            "title": "Pages",
            "description": "Detected pages/routes in this version"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "PrototypeChatVersion",
        "description": "Chat version/iteration with preview and files."
      },
      "PrototypePageInfo": {
        "properties": {
          "route": {
            "type": "string",
            "title": "Route",
            "description": "URL route path (e.g., '/', '/dashboard')"
          },
          "file": {
            "type": "string",
            "title": "File",
            "description": "Source file path (e.g., 'app/page.tsx')"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link",
            "description": "OCXP link to screenshot of this page"
          }
        },
        "type": "object",
        "required": [
          "route",
          "file"
        ],
        "title": "PrototypePageInfo",
        "description": "Information about a detected page/route in the prototype."
      },
      "PrototypeStoredVersionsResponse": {
        "properties": {
          "provider": {
            "type": "string",
            "title": "Provider",
            "description": "Provider name (v0, lovable, bolt)"
          },
          "chat_id": {
            "type": "string",
            "title": "Chat Id",
            "description": "Chat ID"
          },
          "stored_versions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Stored Versions",
            "description": "Version IDs already downloaded to S3"
          },
          "latest_version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Version Id",
            "description": "Latest version ID available from the provider (cached)"
          },
          "version_details": {
            "items": {
              "$ref": "#/components/schemas/PrototypeVersionDetail"
            },
            "type": "array",
            "title": "Version Details",
            "description": "Full version details when include_details=true (from DynamoDB)"
          }
        },
        "type": "object",
        "required": [
          "provider",
          "chat_id"
        ],
        "title": "PrototypeStoredVersionsResponse",
        "description": "Fast response for stored version state (DynamoDB query, no S3/API calls).\n\nUsed by the frontend to quickly determine button states without\ntriggering a full sync operation that makes multiple S3 HEAD requests.\n\nWhen include_details=true is requested, also returns full version metadata\nincluding files, pages, and screenshot links from DynamoDB."
      },
      "PrototypeSyncJobStatusResponse": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "progress": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 0.0,
            "title": "Progress"
          },
          "current_step": {
            "type": "string",
            "title": "Current Step"
          },
          "files_processed": {
            "type": "integer",
            "title": "Files Processed"
          },
          "files_total": {
            "type": "integer",
            "title": "Files Total"
          },
          "screenshots_processed": {
            "type": "integer",
            "title": "Screenshots Processed"
          },
          "screenshots_total": {
            "type": "integer",
            "title": "Screenshots Total"
          },
          "content_links": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Content Links"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At"
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "status",
          "progress",
          "current_step",
          "files_processed",
          "files_total",
          "screenshots_processed",
          "screenshots_total"
        ],
        "title": "PrototypeSyncJobStatusResponse",
        "description": "Response for job status polling endpoint."
      },
      "PrototypeVersionDetail": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Version ID"
          },
          "preview_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Preview Url",
            "description": "Demo/preview URL for this version"
          },
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link",
            "description": "OCXP link to root screenshot"
          },
          "files": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Files",
            "description": "List of file paths in this version"
          },
          "pages": {
            "items": {
              "$ref": "#/components/schemas/PrototypePageInfo"
            },
            "type": "array",
            "title": "Pages",
            "description": "Detected pages/routes with their screenshot links"
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "description": "Version creation timestamp"
          },
          "synced_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Synced At",
            "description": "When this version was synced to OCXP"
          },
          "s3_base_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "S3 Base Path",
            "description": "Base path for tree queries: {project_id}/{chat_id}"
          }
        },
        "type": "object",
        "required": [
          "id"
        ],
        "title": "PrototypeVersionDetail",
        "description": "Full version detail from DynamoDB storage.\n\nContains all metadata for a stored version including files, pages,\nand screenshot links. Used when include_details=true is requested."
      },
      "ProvenanceListResponse": {
        "properties": {
          "records": {
            "items": {
              "$ref": "#/components/schemas/ProvenanceRecord"
            },
            "type": "array",
            "title": "Records"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "default": 0
          }
        },
        "type": "object",
        "title": "ProvenanceListResponse",
        "description": "Response for provenance queries."
      },
      "ProvenanceRecord": {
        "properties": {
          "provenance_id": {
            "type": "string",
            "title": "Provenance Id",
            "description": "Unique provenance identifier"
          },
          "task_id": {
            "type": "string",
            "title": "Task Id",
            "description": "Task that generated this content"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "description": "Mission identifier"
          },
          "document_path": {
            "type": "string",
            "title": "Document Path",
            "description": "Path to generated document"
          },
          "section_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Id",
            "description": "Section identifier"
          },
          "section_heading": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Section Heading",
            "description": "Section heading"
          },
          "line_start": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line Start",
            "description": "Start line (0-indexed)"
          },
          "line_end": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Line End",
            "description": "End line (0-indexed)"
          },
          "content_hash": {
            "type": "string",
            "title": "Content Hash",
            "description": "SHA256 of section content"
          },
          "document_version_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Document Version Id",
            "description": "S3 version ID"
          },
          "mission_version": {
            "type": "integer",
            "title": "Mission Version",
            "description": "Mission regeneration version",
            "default": 1
          },
          "generated_at": {
            "type": "string",
            "title": "Generated At",
            "description": "ISO timestamp when content was generated"
          }
        },
        "type": "object",
        "required": [
          "provenance_id",
          "task_id",
          "mission_id",
          "document_path",
          "content_hash",
          "generated_at"
        ],
        "title": "ProvenanceRecord",
        "description": "Response model for a provenance record."
      },
      "QueryFilter": {
        "properties": {
          "field": {
            "type": "string",
            "title": "Field"
          },
          "operator": {
            "type": "string",
            "title": "Operator",
            "default": "eq"
          },
          "value": {
            "title": "Value"
          }
        },
        "type": "object",
        "required": [
          "field",
          "value"
        ],
        "title": "QueryFilter"
      },
      "QueryRequest": {
        "properties": {
          "filters": {
            "items": {
              "$ref": "#/components/schemas/QueryFilter"
            },
            "type": "array",
            "title": "Filters",
            "default": []
          },
          "limit": {
            "type": "integer",
            "maximum": 1000.0,
            "minimum": 1.0,
            "title": "Limit",
            "default": 100
          }
        },
        "type": "object",
        "title": "QueryRequest"
      },
      "RAGRequest": {
        "properties": {
          "query": {
            "type": "string",
            "maxLength": 2000,
            "minLength": 1,
            "title": "Query"
          },
          "content_type": {
            "type": "string",
            "pattern": "^(code|docs|all)$",
            "title": "Content Type",
            "description": "Knowledge base to query: 'code' for source files, 'docs' for documentation, 'all' for both",
            "default": "docs"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id",
            "description": "Session ID for conversation"
          }
        },
        "type": "object",
        "required": [
          "query"
        ],
        "title": "RAGRequest"
      },
      "RebuildRequest": {
        "properties": {
          "feedback_memo_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "minItems": 1,
            "title": "Feedback Memo Ids",
            "description": "List of memo IDs containing user feedback to process"
          },
          "strategy": {
            "type": "string",
            "enum": [
              "affected_only",
              "full",
              "classify_first"
            ],
            "title": "Strategy",
            "description": "Rebuild strategy: 'affected_only' - rebuild only tasks that generated feedback targets, 'full' - rebuild entire workflow, 'classify_first' - AI classifies feedback to determine optimal approach",
            "default": "classify_first"
          },
          "cascade": {
            "type": "boolean",
            "title": "Cascade",
            "description": "Whether to also rebuild dependent tasks",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "feedback_memo_ids"
        ],
        "title": "RebuildRequest",
        "description": "Request body for triggering a rebuild from feedback."
      },
      "RebuildResponse": {
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "proposals_ready",
              "research_needed",
              "processing",
              "error"
            ],
            "title": "Status",
            "description": "Current status of the rebuild operation"
          },
          "proposals": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Proposals",
            "description": "List of agent proposals for user review"
          },
          "new_gaps": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "New Gaps",
            "description": "New research gaps identified (if any)"
          },
          "affected_tasks": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Affected Tasks",
            "description": "List of task IDs that will be re-executed"
          },
          "estimated_changes": {
            "additionalProperties": true,
            "type": "object",
            "title": "Estimated Changes",
            "description": "Summary of estimated changes"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if status is 'error'"
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "RebuildResponse",
        "description": "Response for rebuild request."
      },
      "RefreshRequest": {
        "properties": {
          "refreshToken": {
            "type": "string",
            "minLength": 1,
            "title": "Refreshtoken"
          }
        },
        "type": "object",
        "required": [
          "refreshToken"
        ],
        "title": "RefreshRequest",
        "description": "Token refresh request - accepts both camelCase and snake_case."
      },
      "RefreshResponse": {
        "properties": {
          "accessToken": {
            "type": "string",
            "title": "Accesstoken"
          },
          "tokenType": {
            "type": "string",
            "title": "Tokentype",
            "default": "bearer"
          },
          "expiresIn": {
            "type": "integer",
            "title": "Expiresin",
            "default": 3600
          },
          "idToken": {
            "type": "string",
            "title": "Idtoken"
          }
        },
        "type": "object",
        "required": [
          "accessToken",
          "idToken"
        ],
        "title": "RefreshResponse",
        "description": "Token refresh response with camelCase output (no new refresh_token)."
      },
      "RegenerateMetadataRequest": {
        "properties": {
          "prefix": {
            "type": "string",
            "title": "Prefix",
            "description": "S3 prefix to scan (e.g., 'workspaces/prod/mission/'). Empty = workspace root",
            "default": ""
          },
          "max_files": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Max Files",
            "description": "Maximum files to process (None = unlimited)"
          },
          "dry_run": {
            "type": "boolean",
            "title": "Dry Run",
            "description": "Show what would change without updating S3",
            "default": false
          },
          "trigger_sync": {
            "type": "boolean",
            "title": "Trigger Sync",
            "description": "Trigger Bedrock KB sync after regeneration",
            "default": false
          }
        },
        "type": "object",
        "title": "RegenerateMetadataRequest",
        "description": "Request to regenerate metadata for S3 documents."
      },
      "RegenerateMetadataResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Job status: completed, queued, or error"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable message"
          },
          "stats": {
            "additionalProperties": true,
            "type": "object",
            "title": "Stats",
            "description": "Statistics: scanned, updated, skipped, errors"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id",
            "description": "Job ID if queued for background processing"
          }
        },
        "type": "object",
        "required": [
          "status",
          "message"
        ],
        "title": "RegenerateMetadataResponse",
        "description": "Response from metadata regeneration."
      },
      "RegenerateMissionRequest": {
        "properties": {
          "ticket_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Id",
            "description": "Updated ticket ID"
          },
          "ticket_summary": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Summary",
            "description": "Updated ticket summary"
          },
          "ticket_description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 5000
              },
              {
                "type": "null"
              }
            ],
            "title": "Ticket Description",
            "description": "Updated ticket description"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Project ID to preserve/set"
          },
          "archive_old_docs": {
            "type": "boolean",
            "title": "Archive Old Docs",
            "description": "Archive old docs before regenerating",
            "default": true
          },
          "auto_increment_version": {
            "type": "boolean",
            "title": "Auto Increment Version",
            "description": "Auto-increment archive version",
            "default": true
          }
        },
        "type": "object",
        "title": "RegenerateMissionRequest",
        "description": "Request body for mission regeneration."
      },
      "RegenerateMissionResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "job_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Job Id"
          },
          "archive_version": {
            "type": "integer",
            "title": "Archive Version"
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "started|completed|failed"
          },
          "archived_files": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Archived Files"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "success",
          "archive_version",
          "status"
        ],
        "title": "RegenerateMissionResponse",
        "description": "Response for mission regeneration."
      },
      "RepoCommitInfo": {
        "properties": {
          "sha": {
            "type": "string",
            "title": "Sha",
            "description": "Short commit SHA (7 chars)",
            "examples": [
              "abc1234"
            ]
          },
          "full_sha": {
            "type": "string",
            "title": "Full Sha",
            "description": "Full commit SHA",
            "examples": [
              "abc1234567890abcdef1234567890abcdef123456"
            ]
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Commit message (first line)",
            "examples": [
              "Fix bug in auth flow"
            ]
          },
          "date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Date",
            "description": "Commit date ISO timestamp",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "author": {
            "type": "string",
            "title": "Author",
            "description": "Commit author name",
            "default": "Unknown",
            "examples": [
              "John Doe"
            ]
          }
        },
        "type": "object",
        "required": [
          "sha",
          "full_sha",
          "message"
        ],
        "title": "RepoCommitInfo",
        "description": "Commit information from GitHub."
      },
      "RepoCommitStatusResponse": {
        "properties": {
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "description": "Repository identifier",
            "examples": [
              "owner/my-app"
            ]
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "description": "Branch name",
            "examples": [
              "main"
            ]
          },
          "indexed_commit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Indexed Commit",
            "description": "Currently indexed commit SHA",
            "examples": [
              "abc1234"
            ]
          },
          "latest_commit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Commit",
            "description": "Latest commit SHA on GitHub",
            "examples": [
              "def5678"
            ]
          },
          "latest_commit_date": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Commit Date",
            "description": "Latest commit date",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "latest_commit_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Latest Commit Message",
            "description": "Latest commit message",
            "examples": [
              "Add new feature"
            ]
          },
          "commits_behind": {
            "type": "integer",
            "title": "Commits Behind",
            "description": "Number of commits behind (-1 = many)",
            "default": 0,
            "examples": [
              3
            ]
          },
          "is_up_to_date": {
            "type": "boolean",
            "title": "Is Up To Date",
            "description": "Whether repo is up to date",
            "default": true
          },
          "missing_commits": {
            "items": {
              "$ref": "#/components/schemas/RepoCommitInfo"
            },
            "type": "array",
            "title": "Missing Commits",
            "description": "List of missing commits"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if lookup failed"
          }
        },
        "type": "object",
        "required": [
          "repo_id",
          "branch"
        ],
        "title": "RepoCommitStatusResponse",
        "description": "Response for GET /ocxp/repo/{id}/commits."
      },
      "RepoDeleteResponse": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id",
            "description": "Deleted repository UUID",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "description": "Deleted repository identifier (owner/repo)",
            "examples": [
              "owner/my-app"
            ]
          },
          "deleted": {
            "type": "boolean",
            "title": "Deleted",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "repo_id"
        ],
        "title": "RepoDeleteResponse",
        "description": "Response for DELETE /ocxp/repo/{id}."
      },
      "RepoDownloadResponse": {
        "properties": {
          "id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Id",
            "description": "Unique UUID for API operations (available when linked or complete)",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "job_id": {
            "type": "string",
            "title": "Job Id",
            "examples": [
              "job-abc123"
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "started|linked|downloading|indexing|complete|failed",
            "examples": [
              "started"
            ]
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "examples": [
              "Download initiated"
            ]
          },
          "deduplicated": {
            "type": "boolean",
            "title": "Deduplicated",
            "description": "True if repo already exists and was linked instead of downloaded",
            "default": false
          },
          "s3_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "S3 Path",
            "description": "S3 storage path",
            "examples": [
              "workspaces/public/repo/owner/repo/"
            ]
          },
          "detected_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detected Type",
            "description": "Auto-detected repo content type (code, docs, or mixed)",
            "examples": [
              "code",
              "docs",
              "mixed"
            ]
          },
          "detection_method": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detection Method",
            "description": "How repo type was detected: path_heuristic (from folder name) or github_api (from language analysis)",
            "examples": [
              "path_heuristic",
              "github_api"
            ]
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "status"
        ],
        "title": "RepoDownloadResponse",
        "description": "Response for POST /ocxp/repo/download."
      },
      "RepoInfo": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id",
            "description": "Unique UUID for API operations",
            "examples": [
              "550e8400-e29b-41d4-a716-446655440000"
            ]
          },
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "description": "Repository identifier (owner/repo) for display",
            "examples": [
              "owner/my-app"
            ]
          },
          "name": {
            "type": "string",
            "title": "Name",
            "examples": [
              "my-app"
            ]
          },
          "url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Url",
            "examples": [
              "https://github.com/org/my-app"
            ]
          },
          "branch": {
            "type": "string",
            "title": "Branch",
            "description": "Git branch",
            "default": "main",
            "examples": [
              "main"
            ]
          },
          "path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Path",
            "description": "Subpath within repository (if partial download)",
            "examples": [
              "src/components"
            ]
          },
          "visibility": {
            "type": "string",
            "title": "Visibility",
            "description": "Repository visibility: public or private",
            "default": "public",
            "examples": [
              "public",
              "private"
            ]
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status",
            "description": "pending|downloading|indexed|failed",
            "examples": [
              "indexed"
            ]
          },
          "last_synced": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Synced",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "files_count": {
            "type": "integer",
            "title": "Files Count",
            "description": "Number of files indexed",
            "default": 0,
            "examples": [
              42
            ]
          },
          "total_size_bytes": {
            "type": "integer",
            "title": "Total Size Bytes",
            "description": "Total storage size in bytes",
            "default": 0,
            "examples": [
              1048576
            ]
          },
          "s3_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "S3 Path",
            "description": "S3 storage location",
            "examples": [
              "workspaces/prod/repo/owner/my-app/"
            ]
          },
          "repo_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Type",
            "description": "Content type: code, docs, or mixed",
            "examples": [
              "code",
              "docs",
              "mixed"
            ]
          }
        },
        "type": "object",
        "required": [
          "id",
          "repo_id",
          "name"
        ],
        "title": "RepoInfo",
        "description": "Repository information."
      },
      "RepoListResponse": {
        "properties": {
          "repos": {
            "items": {
              "$ref": "#/components/schemas/RepoInfo"
            },
            "type": "array",
            "title": "Repos"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of items in this response"
          },
          "total": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total",
            "description": "Total number of items matching query (across all pages)"
          },
          "offset": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Offset",
            "description": "Offset used for this query"
          },
          "limit": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Limit",
            "description": "Limit used for this query"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether there are more items after this page",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "repos",
          "count"
        ],
        "title": "RepoListResponse",
        "description": "Response for GET /ocxp/repo/list with offset-based pagination."
      },
      "RepoPullRequestInfo": {
        "properties": {
          "number": {
            "type": "integer",
            "title": "Number",
            "description": "PR number",
            "examples": [
              123
            ]
          },
          "title": {
            "type": "string",
            "title": "Title",
            "description": "PR title",
            "examples": [
              "Add new feature"
            ]
          },
          "state": {
            "type": "string",
            "title": "State",
            "description": "PR state: open, closed, or merged",
            "examples": [
              "open"
            ]
          },
          "author": {
            "type": "string",
            "title": "Author",
            "description": "Author username",
            "examples": [
              "octocat"
            ]
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "Creation date ISO timestamp",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At",
            "description": "Last update date ISO timestamp",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          },
          "url": {
            "type": "string",
            "title": "Url",
            "description": "GitHub URL for the PR",
            "examples": [
              "https://github.com/owner/repo/pull/123"
            ]
          }
        },
        "type": "object",
        "required": [
          "number",
          "title",
          "state",
          "author",
          "created_at",
          "updated_at",
          "url"
        ],
        "title": "RepoPullRequestInfo",
        "description": "Pull request information from GitHub."
      },
      "RepoPullRequestsResponse": {
        "properties": {
          "repo_id": {
            "type": "string",
            "title": "Repo Id",
            "description": "Repository identifier",
            "examples": [
              "owner/my-app"
            ]
          },
          "pull_requests": {
            "items": {
              "$ref": "#/components/schemas/RepoPullRequestInfo"
            },
            "type": "array",
            "title": "Pull Requests",
            "description": "List of pull requests"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of PRs returned",
            "default": 0,
            "examples": [
              5
            ]
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if lookup failed"
          }
        },
        "type": "object",
        "required": [
          "repo_id"
        ],
        "title": "RepoPullRequestsResponse",
        "description": "Response for GET /ocxp/repo/{id}/pulls."
      },
      "RepoStatusResponse": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "progress": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Progress"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message"
          },
          "repo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Id"
          },
          "files_processed": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Files Processed"
          },
          "total_files": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total Files"
          }
        },
        "type": "object",
        "required": [
          "job_id",
          "status"
        ],
        "title": "RepoStatusResponse",
        "description": "Response for GET /ocxp/repo/status/{job_id}."
      },
      "RepoSyncAllResponse": {
        "properties": {
          "total_repos": {
            "type": "integer",
            "title": "Total Repos",
            "description": "Total repositories checked",
            "examples": [
              5
            ]
          },
          "synced": {
            "type": "integer",
            "title": "Synced",
            "description": "Repositories that were synced",
            "default": 0,
            "examples": [
              2
            ]
          },
          "up_to_date": {
            "type": "integer",
            "title": "Up To Date",
            "description": "Repositories already up to date",
            "default": 0,
            "examples": [
              3
            ]
          },
          "failed": {
            "type": "integer",
            "title": "Failed",
            "description": "Repositories that failed to sync",
            "default": 0,
            "examples": [
              0
            ]
          },
          "jobs": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Jobs",
            "description": "Job IDs for synced repos",
            "examples": [
              [
                "job-abc123",
                "job-def456"
              ]
            ]
          }
        },
        "type": "object",
        "required": [
          "total_repos"
        ],
        "title": "RepoSyncAllResponse",
        "description": "Response for POST /ocxp/repo/sync-all."
      },
      "RepoSyncResponse": {
        "properties": {
          "job_id": {
            "type": "string",
            "title": "Job Id",
            "description": "Job ID for status tracking (empty if up_to_date)",
            "default": "",
            "examples": [
              "job-abc123"
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Sync status",
            "examples": [
              "started",
              "up_to_date",
              "failed"
            ]
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable status message",
            "examples": [
              "Sync started: abc1234 -> def5678"
            ]
          },
          "previous_commit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Previous Commit",
            "description": "Previous commit SHA (7 chars)",
            "examples": [
              "abc1234"
            ]
          },
          "current_commit": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Current Commit",
            "description": "Current/latest commit SHA (7 chars)",
            "examples": [
              "def5678"
            ]
          },
          "changes_detected": {
            "type": "boolean",
            "title": "Changes Detected",
            "description": "Whether changes were detected",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "status",
          "message"
        ],
        "title": "RepoSyncResponse",
        "description": "Response for POST /ocxp/repo/{id}/sync."
      },
      "SMEType": {
        "type": "string",
        "enum": [
          "CODEBASE",
          "CONTEXT",
          "DATABASE",
          "VISUAL"
        ],
        "title": "SMEType",
        "description": "Subject Matter Expert types for task routing."
      },
      "ScreenshotRequest": {
        "properties": {
          "url": {
            "type": "string",
            "title": "Url",
            "description": "URL to screenshot"
          },
          "viewport_width": {
            "type": "integer",
            "title": "Viewport Width",
            "description": "Browser viewport width",
            "default": 1920
          },
          "viewport_height": {
            "type": "integer",
            "title": "Viewport Height",
            "description": "Browser viewport height",
            "default": 1080
          },
          "full_page": {
            "type": "boolean",
            "title": "Full Page",
            "description": "Capture full page or viewport only",
            "default": true
          },
          "wait_until": {
            "type": "string",
            "title": "Wait Until",
            "description": "Wait condition",
            "default": "networkidle"
          }
        },
        "type": "object",
        "required": [
          "url"
        ],
        "title": "ScreenshotRequest",
        "description": "Screenshot capture request."
      },
      "ScreenshotResponse": {
        "properties": {
          "screenshot_link": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Screenshot Link",
            "description": "OCXP link to screenshot"
          },
          "url": {
            "type": "string",
            "title": "Url",
            "description": "Captured URL"
          },
          "viewport": {
            "type": "string",
            "title": "Viewport",
            "description": "Viewport dimensions"
          },
          "full_page": {
            "type": "boolean",
            "title": "Full Page",
            "description": "Whether full page was captured"
          },
          "metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Metadata"
          },
          "message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message",
            "description": "Status message"
          }
        },
        "type": "object",
        "required": [
          "url",
          "viewport",
          "full_page"
        ],
        "title": "ScreenshotResponse",
        "description": "Screenshot capture response."
      },
      "SecurityFinding": {
        "properties": {
          "pattern_type": {
            "type": "string",
            "title": "Pattern Type",
            "description": "Type of pattern detected: password, api_key, aws_secret, etc."
          },
          "severity": {
            "$ref": "#/components/schemas/MemoSeverity",
            "description": "Severity level of this finding"
          },
          "location": {
            "type": "string",
            "title": "Location",
            "description": "File path where finding was detected"
          },
          "match_count": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Match Count",
            "description": "Number of matches found",
            "default": 1
          },
          "first_detected": {
            "type": "string",
            "title": "First Detected",
            "description": "When this finding was first detected"
          }
        },
        "type": "object",
        "required": [
          "pattern_type",
          "severity",
          "location"
        ],
        "title": "SecurityFinding",
        "description": "Single sensitive data finding within a memo."
      },
      "SessionForkResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "parent_session_id": {
            "type": "string",
            "title": "Parent Session Id"
          },
          "fork_depth": {
            "type": "integer",
            "title": "Fork Depth"
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "parent_session_id",
          "fork_depth",
          "message_count"
        ],
        "title": "SessionForkResponse",
        "description": "Response for POST /ocxp/session/{id}/fork."
      },
      "SessionListResponse": {
        "properties": {
          "sessions": {
            "items": {
              "$ref": "#/components/schemas/SessionResponse"
            },
            "type": "array",
            "title": "Sessions"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of items in this response"
          },
          "total": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total",
            "description": "Total number of items matching query (across all pages)"
          },
          "offset": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Offset",
            "description": "Offset used for this query"
          },
          "limit": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Limit",
            "description": "Limit used for this query"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether there are more items after this page",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "sessions",
          "count"
        ],
        "title": "SessionListResponse",
        "description": "Response for GET /ocxp/session with offset-based pagination."
      },
      "SessionMessagesResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id"
          },
          "messages": {
            "items": {
              "$ref": "#/components/schemas/MessageResponse"
            },
            "type": "array",
            "title": "Messages"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "messages",
          "count"
        ],
        "title": "SessionMessagesResponse",
        "description": "Response for GET /ocxp/session/{id}/messages."
      },
      "SessionMetadataUpdate": {
        "properties": {
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          },
          "message_count": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Message Count"
          }
        },
        "type": "object",
        "title": "SessionMetadataUpdate"
      },
      "SessionResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "title": "Session Id",
            "examples": [
              "sess-abc123"
            ]
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "examples": [
              "acme-corp"
            ]
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title",
            "examples": [
              "Feature implementation discussion"
            ]
          },
          "message_count": {
            "type": "integer",
            "title": "Message Count",
            "default": 0,
            "examples": [
              15
            ]
          },
          "created_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created At",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "updated_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Updated At",
            "examples": [
              "2025-01-16T14:00:00Z"
            ]
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "examples": [
              "user@example.com"
            ]
          },
          "status": {
            "type": "string",
            "title": "Status",
            "description": "active|archived",
            "default": "active",
            "examples": [
              "active"
            ]
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "examples": [
              "mission-001"
            ]
          },
          "parent_session_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Parent Session Id",
            "examples": [
              "sess-parent123"
            ]
          },
          "fork_depth": {
            "type": "integer",
            "title": "Fork Depth",
            "default": 0,
            "examples": [
              0
            ]
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "workspace"
        ],
        "title": "SessionResponse",
        "description": "Session metadata response."
      },
      "SetDefaultDatabaseRequest": {
        "properties": {
          "database_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Database Id",
            "description": "Database ID to set as default (None to clear)"
          }
        },
        "type": "object",
        "title": "SetDefaultDatabaseRequest"
      },
      "SetDefaultRepoRequest": {
        "properties": {
          "repo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Repo Id"
          }
        },
        "type": "object",
        "title": "SetDefaultRepoRequest"
      },
      "SourceType": {
        "type": "string",
        "enum": [
          "repo",
          "project",
          "mission",
          "doc",
          "workflow"
        ],
        "title": "SourceType",
        "description": "Type of entity the memo is associated with."
      },
      "SyncMissionsResponse": {
        "properties": {
          "project_id": {
            "type": "string",
            "title": "Project Id"
          },
          "before_count": {
            "type": "integer",
            "title": "Before Count",
            "description": "Number of mission IDs before sync"
          },
          "after_count": {
            "type": "integer",
            "title": "After Count",
            "description": "Number of valid mission IDs after sync"
          },
          "removed_count": {
            "type": "integer",
            "title": "Removed Count",
            "description": "Number of orphaned IDs removed"
          },
          "removed_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Removed Ids",
            "description": "IDs that were removed"
          }
        },
        "type": "object",
        "required": [
          "project_id",
          "before_count",
          "after_count",
          "removed_count"
        ],
        "title": "SyncMissionsResponse",
        "description": "Response model for mission sync operation."
      },
      "SyncRequest": {
        "properties": {
          "force": {
            "type": "boolean",
            "title": "Force",
            "default": false
          }
        },
        "type": "object",
        "title": "SyncRequest",
        "description": "Request body for sync operations."
      },
      "TableOverview": {
        "properties": {
          "name": {
            "type": "string",
            "title": "Name"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "default": ""
          },
          "column_count": {
            "type": "integer",
            "title": "Column Count"
          },
          "columns": {
            "items": {
              "$ref": "#/components/schemas/ColumnOverview"
            },
            "type": "array",
            "title": "Columns"
          },
          "foreign_keys": {
            "items": {
              "$ref": "#/components/schemas/ForeignKeyInfo"
            },
            "type": "array",
            "title": "Foreign Keys",
            "default": []
          }
        },
        "type": "object",
        "required": [
          "name",
          "column_count",
          "columns"
        ],
        "title": "TableOverview",
        "description": "Table information with columns and foreign keys."
      },
      "TaskListResponse": {
        "properties": {
          "tasks": {
            "items": {
              "$ref": "#/components/schemas/TaskResponse"
            },
            "type": "array",
            "title": "Tasks"
          },
          "count": {
            "type": "integer",
            "title": "Count"
          }
        },
        "type": "object",
        "required": [
          "tasks",
          "count"
        ],
        "title": "TaskListResponse",
        "description": "Response for task list."
      },
      "TaskResponse": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id"
          },
          "description": {
            "type": "string",
            "title": "Description"
          },
          "status": {
            "$ref": "#/components/schemas/TaskStatus"
          },
          "priority": {
            "type": "integer",
            "title": "Priority"
          },
          "timeout": {
            "type": "integer",
            "title": "Timeout"
          },
          "dependencies": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Dependencies"
          },
          "sme_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SMEType"
              },
              {
                "type": "null"
              }
            ]
          },
          "skill_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Skill Path"
          },
          "result": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          },
          "retry_count": {
            "type": "integer",
            "title": "Retry Count",
            "default": 0
          },
          "memo_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Memo Id"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "description",
          "status",
          "priority",
          "timeout",
          "dependencies"
        ],
        "title": "TaskResponse",
        "description": "Task data in workflow response (strands-compatible format)."
      },
      "TaskStatus": {
        "type": "string",
        "enum": [
          "pending",
          "in_progress",
          "completed",
          "failed",
          "skipped"
        ],
        "title": "TaskStatus",
        "description": "Status of a workflow task."
      },
      "TaskUpdate": {
        "properties": {
          "task_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Task Id",
            "description": "Task ID (required for bulk updates)"
          },
          "task_status": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/TaskStatus"
              },
              {
                "type": "null"
              }
            ],
            "description": "New task status"
          },
          "result": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Result",
            "description": "Task result output"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error",
            "description": "Error message if failed"
          },
          "retry_count": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0.0
              },
              {
                "type": "null"
              }
            ],
            "title": "Retry Count",
            "description": "Update retry count"
          }
        },
        "type": "object",
        "title": "TaskUpdate",
        "description": "Request to update a task.",
        "example": {
          "result": "Found authentication patterns in src/auth/...",
          "task_status": "completed"
        }
      },
      "TokenResponse": {
        "properties": {
          "accessToken": {
            "type": "string",
            "title": "Accesstoken"
          },
          "tokenType": {
            "type": "string",
            "title": "Tokentype",
            "default": "bearer"
          },
          "expiresIn": {
            "type": "integer",
            "title": "Expiresin",
            "default": 3600
          },
          "idToken": {
            "type": "string",
            "title": "Idtoken"
          },
          "refreshToken": {
            "type": "string",
            "title": "Refreshtoken"
          }
        },
        "type": "object",
        "required": [
          "accessToken",
          "idToken",
          "refreshToken"
        ],
        "title": "TokenResponse",
        "description": "Token response with camelCase output for plugin compatibility."
      },
      "TriggerSyncRequest": {
        "properties": {
          "kb_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Kb Type",
            "description": "KB type to sync: code | docs | visual. If omitted, syncs all."
          },
          "force": {
            "type": "boolean",
            "title": "Force",
            "description": "Force sync even if a job is already running",
            "default": false
          }
        },
        "type": "object",
        "title": "TriggerSyncRequest"
      },
      "TriggerSyncResponse": {
        "properties": {
          "triggered": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Triggered"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "triggered",
          "message"
        ],
        "title": "TriggerSyncResponse"
      },
      "UserResponse": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "email": {
            "type": "string",
            "title": "Email"
          },
          "username": {
            "type": "string",
            "title": "Username"
          }
        },
        "type": "object",
        "required": [
          "id",
          "email",
          "username"
        ],
        "title": "UserResponse",
        "description": "User info response."
      },
      "ValidateRequest": {
        "properties": {
          "response": {
            "type": "string",
            "maxLength": 50000,
            "minLength": 1,
            "title": "Response",
            "description": "AI response to validate"
          },
          "context_ids": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Context Ids",
            "description": "Context IDs that were used to generate response"
          },
          "query": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Query",
            "description": "Original query for relevance checking"
          },
          "strict_mode": {
            "type": "boolean",
            "title": "Strict Mode",
            "description": "If true, require all claims to be verifiable",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "response"
        ],
        "title": "ValidateRequest",
        "description": "Request for POST /ocxp/context/validate.\n\nValidates AI-generated responses against source context."
      },
      "ValidateResponse": {
        "properties": {
          "valid": {
            "type": "boolean",
            "title": "Valid",
            "description": "True if no high-severity issues found"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Confidence in validation result (0.0 - 1.0)"
          },
          "quality_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Quality Score",
            "description": "Overall quality score (0.0 - 1.0)"
          },
          "issues": {
            "items": {
              "$ref": "#/components/schemas/ValidationIssue"
            },
            "type": "array",
            "title": "Issues",
            "description": "List of issues found"
          },
          "verified_claims": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Verified Claims",
            "description": "Number of claims that were verified",
            "default": 0
          },
          "unverified_claims": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Unverified Claims",
            "description": "Number of claims that could not be verified",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "valid",
          "confidence",
          "quality_score"
        ],
        "title": "ValidateResponse",
        "description": "Response from POST /ocxp/context/validate.\n\nContains validation results with quality scores and issues."
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "ValidationIssue": {
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "hallucination",
              "outdated",
              "incomplete",
              "contradiction"
            ],
            "title": "Type",
            "description": "Type of issue found"
          },
          "severity": {
            "type": "string",
            "enum": [
              "low",
              "medium",
              "high"
            ],
            "title": "Severity",
            "description": "Severity of the issue"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Human-readable description of the issue"
          },
          "location": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Location",
            "description": "Location in response where issue was found"
          },
          "suggestion": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggestion",
            "description": "Suggested correction"
          }
        },
        "type": "object",
        "required": [
          "type",
          "severity",
          "description"
        ],
        "title": "ValidationIssue",
        "description": "Single validation issue found in AI response."
      },
      "VersionInfoResponse": {
        "properties": {
          "version_id": {
            "type": "string",
            "title": "Version Id",
            "description": "S3 version ID",
            "examples": [
              "abc123def456"
            ]
          },
          "is_latest": {
            "type": "boolean",
            "title": "Is Latest",
            "description": "Whether this is the latest version",
            "examples": [
              true
            ]
          },
          "last_modified": {
            "type": "string",
            "title": "Last Modified",
            "description": "ISO timestamp of last modification",
            "examples": [
              "2025-01-15T10:30:00Z"
            ]
          },
          "size": {
            "type": "integer",
            "title": "Size",
            "description": "Content size in bytes",
            "examples": [
              1024
            ]
          },
          "etag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Etag",
            "description": "ETag of the content",
            "examples": [
              "d41d8cd98f00b204"
            ]
          }
        },
        "type": "object",
        "required": [
          "version_id",
          "is_latest",
          "last_modified",
          "size"
        ],
        "title": "VersionInfoResponse",
        "description": "Version information for a single file version."
      },
      "VersionListResponse": {
        "properties": {
          "path": {
            "type": "string",
            "title": "Path",
            "description": "File path",
            "examples": [
              "mission/current.md"
            ]
          },
          "versions": {
            "items": {
              "$ref": "#/components/schemas/VersionInfoResponse"
            },
            "type": "array",
            "title": "Versions",
            "description": "List of file versions"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of versions",
            "examples": [
              5
            ]
          }
        },
        "type": "object",
        "required": [
          "path",
          "versions",
          "total"
        ],
        "title": "VersionListResponse",
        "description": "Response for GET /ocxp/{type}/{id}/versions."
      },
      "VisualAnalyseRequest": {
        "properties": {
          "question": {
            "type": "string",
            "title": "Question",
            "description": "Question about image content"
          },
          "image_paths": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Image Paths",
            "description": "S3 paths to analyze (e.g., ['workspaces/prod/visual/screenshots/...'])"
          },
          "search_query": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Search Query",
            "description": "Alternative: search metadata first, then analyze top results"
          },
          "max_images": {
            "type": "integer",
            "maximum": 10.0,
            "minimum": 1.0,
            "title": "Max Images",
            "description": "Max images to analyze",
            "default": 5
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id",
            "description": "Optional mission scope filter"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id",
            "description": "Optional project scope filter"
          }
        },
        "type": "object",
        "required": [
          "question"
        ],
        "title": "VisualAnalyseRequest",
        "description": "Request for POST /ocxp/context/visual/analyse."
      },
      "VisualAnalyseResponse": {
        "properties": {
          "answer": {
            "type": "string",
            "title": "Answer",
            "description": "AI analysis of image content"
          },
          "images_analyzed": {
            "items": {
              "$ref": "#/components/schemas/VisualAnalyseResult"
            },
            "type": "array",
            "title": "Images Analyzed"
          },
          "total_images": {
            "type": "integer",
            "title": "Total Images",
            "description": "Number of images analyzed",
            "default": 0
          },
          "model_used": {
            "type": "string",
            "title": "Model Used",
            "default": "anthropic.claude-3-sonnet-20240229-v1:0"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          }
        },
        "type": "object",
        "required": [
          "answer"
        ],
        "title": "VisualAnalyseResponse",
        "description": "Response from POST /ocxp/context/visual/analyse."
      },
      "VisualAnalyseResult": {
        "properties": {
          "s3_path": {
            "type": "string",
            "title": "S3 Path"
          },
          "ocxp_link": {
            "type": "string",
            "title": "Ocxp Link"
          },
          "analyzed": {
            "type": "boolean",
            "title": "Analyzed"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "s3_path",
          "ocxp_link",
          "analyzed"
        ],
        "title": "VisualAnalyseResult",
        "description": "Individual image analysis result."
      },
      "Workflow": {
        "properties": {
          "workflow_id": {
            "type": "string",
            "title": "Workflow Id",
            "description": "Unique workflow identifier (UUID)"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "description": "Parent mission ID this workflow belongs to"
          },
          "workspace": {
            "type": "string",
            "title": "Workspace",
            "description": "Workspace this workflow belongs to"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Optional workflow name (e.g., 'Research Phase', 'Documentation')"
          },
          "status": {
            "$ref": "#/components/schemas/WorkflowStatus",
            "description": "Current workflow status",
            "default": "pending"
          },
          "created_at": {
            "type": "string",
            "title": "Created At",
            "description": "When the workflow was created"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At",
            "description": "When the workflow was last updated"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At",
            "description": "When the workflow started running"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At",
            "description": "When the workflow completed"
          },
          "total_tasks": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Tasks",
            "description": "Total number of tasks in workflow",
            "default": 0
          },
          "completed_tasks": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Completed Tasks",
            "description": "Number of completed tasks",
            "default": 0
          },
          "failed_tasks": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Failed Tasks",
            "description": "Number of failed tasks",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "mission_id",
          "workspace"
        ],
        "title": "Workflow",
        "description": "Workflow container - groups task memos for a mission.\n\nA mission can have multiple workflows (e.g., research workflow,\ndocumentation workflow). Each workflow manages its own set of tasks\nwhile sharing the mission's context and session data."
      },
      "WorkflowActionResponse": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "message": {
            "type": "string",
            "title": "Message"
          },
          "workflow": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/WorkflowResponse"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "success",
          "message"
        ],
        "title": "WorkflowActionResponse",
        "description": "Response from workflow action endpoints."
      },
      "WorkflowCreate": {
        "properties": {
          "mission_id": {
            "type": "string",
            "title": "Mission Id",
            "description": "Parent mission ID"
          },
          "workflow_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Workflow Id",
            "description": "Optional workflow ID (auto-generated if not provided)"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Optional workflow name"
          },
          "tasks": {
            "items": {
              "$ref": "#/components/schemas/WorkflowTaskCreate"
            },
            "type": "array",
            "title": "Tasks",
            "description": "Initial tasks to create"
          }
        },
        "type": "object",
        "required": [
          "mission_id"
        ],
        "title": "WorkflowCreate",
        "description": "Request to create a workflow with tasks.",
        "example": {
          "mission_id": "550e8400-e29b-41d4-a716-446655440000",
          "name": "Research Phase",
          "tasks": [
            {
              "description": "Research auth patterns",
              "priority": 5,
              "task_id": "gap_1_research"
            },
            {
              "dependencies": [
                "gap_1_research"
              ],
              "description": "Validate research output",
              "task_id": "gap_1_validate"
            }
          ]
        }
      },
      "WorkflowListResponse": {
        "properties": {
          "workflows": {
            "items": {
              "$ref": "#/components/schemas/Workflow"
            },
            "type": "array",
            "title": "Workflows"
          },
          "count": {
            "type": "integer",
            "title": "Count",
            "description": "Number of items in this response"
          },
          "total": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Total",
            "description": "Total number of items matching query (across all pages)"
          },
          "offset": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Offset",
            "description": "Offset used for this query"
          },
          "limit": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Limit",
            "description": "Limit used for this query"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether there are more items after this page",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "workflows",
          "count"
        ],
        "title": "WorkflowListResponse",
        "description": "Response for GET /ocxp/workflow with offset-based pagination."
      },
      "WorkflowResponse": {
        "properties": {
          "workflow_id": {
            "type": "string",
            "title": "Workflow Id"
          },
          "mission_id": {
            "type": "string",
            "title": "Mission Id"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name"
          },
          "status": {
            "$ref": "#/components/schemas/WorkflowStatus"
          },
          "created_at": {
            "type": "string",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "title": "Updated At"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          },
          "total_tasks": {
            "type": "integer",
            "title": "Total Tasks"
          },
          "completed_tasks": {
            "type": "integer",
            "title": "Completed Tasks"
          },
          "failed_tasks": {
            "type": "integer",
            "title": "Failed Tasks"
          },
          "progress": {
            "type": "integer",
            "title": "Progress"
          },
          "tasks": {
            "additionalProperties": {
              "$ref": "#/components/schemas/TaskResponse"
            },
            "type": "object",
            "title": "Tasks"
          }
        },
        "type": "object",
        "required": [
          "workflow_id",
          "mission_id",
          "status",
          "created_at",
          "updated_at",
          "total_tasks",
          "completed_tasks",
          "failed_tasks",
          "progress",
          "tasks"
        ],
        "title": "WorkflowResponse",
        "description": "Workflow with all tasks (strands-compatible format).",
        "example": {
          "completed_tasks": 1,
          "created_at": "2024-01-15T10:00:00Z",
          "failed_tasks": 0,
          "mission_id": "550e8400-e29b-41d4-a716-446655440000",
          "name": "Research Phase",
          "progress": 33,
          "started_at": "2024-01-15T10:01:00Z",
          "status": "running",
          "tasks": {
            "gap_1_research": {
              "dependencies": [],
              "description": "Research auth patterns",
              "priority": 5,
              "result": "Found patterns...",
              "status": "completed",
              "task_id": "gap_1_research",
              "timeout": 300
            }
          },
          "total_tasks": 3,
          "updated_at": "2024-01-15T10:05:00Z",
          "workflow_id": "f47ac10b-58cc-4372-a567-0e02b2c3d479"
        }
      },
      "WorkflowStatus": {
        "type": "string",
        "enum": [
          "pending",
          "running",
          "paused",
          "completed",
          "failed",
          "archived"
        ],
        "title": "WorkflowStatus",
        "description": "Status of a workflow."
      },
      "WorkflowTaskCreate": {
        "properties": {
          "task_id": {
            "type": "string",
            "title": "Task Id",
            "description": "Task identifier (e.g., 'gap_1_research')"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Task description/content"
          },
          "priority": {
            "type": "integer",
            "maximum": 5.0,
            "minimum": 1.0,
            "title": "Priority",
            "description": "Task priority (1=lowest, 5=highest)",
            "default": 3
          },
          "timeout": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Timeout",
            "description": "Task timeout in seconds",
            "default": 300
          },
          "dependencies": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Dependencies",
            "description": "List of task_ids this task depends on"
          },
          "sme_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SMEType"
              },
              {
                "type": "null"
              }
            ],
            "description": "Subject matter expert type"
          },
          "skill_path": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Skill Path",
            "description": "Skill path for task execution"
          }
        },
        "type": "object",
        "required": [
          "task_id",
          "description"
        ],
        "title": "WorkflowTaskCreate",
        "description": "Task definition for workflow creation.",
        "example": {
          "dependencies": [],
          "description": "Research authentication patterns in the codebase",
          "priority": 5,
          "skill_path": "research/codebase-expert",
          "sme_type": "CODEBASE",
          "task_id": "gap_1_research",
          "timeout": 300
        }
      },
      "WorkspaceItem": {
        "properties": {
          "id": {
            "type": "string",
            "title": "Id"
          },
          "name": {
            "type": "string",
            "title": "Name"
          }
        },
        "type": "object",
        "required": [
          "id",
          "name"
        ],
        "title": "WorkspaceItem",
        "description": "Workspace item."
      },
      "WorkspacesResponse": {
        "properties": {
          "workspaces": {
            "items": {
              "$ref": "#/components/schemas/WorkspaceItem"
            },
            "type": "array",
            "title": "Workspaces"
          }
        },
        "type": "object",
        "required": [
          "workspaces"
        ],
        "title": "WorkspacesResponse",
        "description": "Workspaces list response."
      },
      "WriteRequest": {
        "properties": {
          "content": {
            "type": "string",
            "title": "Content"
          },
          "encoding": {
            "type": "string",
            "title": "Encoding",
            "default": "utf-8"
          },
          "etag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Etag"
          },
          "ifNotExists": {
            "type": "boolean",
            "title": "Ifnotexists",
            "default": false
          },
          "manage_metadata": {
            "type": "boolean",
            "title": "Manage Metadata",
            "default": true
          },
          "auto_index": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Index"
          },
          "project_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Project Id"
          },
          "mission_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Mission Id"
          },
          "wait_for_index": {
            "type": "boolean",
            "title": "Wait For Index",
            "default": true
          },
          "verify_access": {
            "type": "boolean",
            "title": "Verify Access",
            "default": true
          },
          "max_retries": {
            "type": "integer",
            "title": "Max Retries",
            "default": 3
          }
        },
        "type": "object",
        "required": [
          "content"
        ],
        "title": "WriteRequest"
      },
      "app__routers__bulk__BulkDeleteRequest": {
        "properties": {
          "ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Ids"
          },
          "manage_metadata": {
            "type": "boolean",
            "title": "Manage Metadata",
            "default": true
          },
          "auto_index": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Index"
          }
        },
        "type": "object",
        "required": [
          "ids"
        ],
        "title": "BulkDeleteRequest"
      },
      "domain__memo_models__BulkDeleteRequest": {
        "properties": {
          "memo_ids": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 25,
            "minItems": 1,
            "title": "Memo Ids",
            "description": "List of memo IDs to delete (max 25)"
          }
        },
        "type": "object",
        "required": [
          "memo_ids"
        ],
        "title": "BulkDeleteRequest",
        "description": "Request for bulk delete operation."
      }
    },
    "securitySchemes": {
      "OAuth2PasswordBearer": {
        "type": "oauth2",
        "description": "Login with your Cognito credentials",
        "flows": {
          "password": {
            "tokenUrl": "/auth/token",
            "scopes": {}
          }
        }
      }
    }
  }
}